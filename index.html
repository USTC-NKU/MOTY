<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2025 Memory of The Year</title>
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/7.0.1/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper@11/swiper-bundle.min.css" />
  <link rel="shortcut icon" href="logo.svg">
  <style>
    :root {
      --primary-color: #4883dc;
      --accent-color: #ff7e6b;
      --light-bg: #f8f9fa;
      --dark-text: #2d3748;
      --border-radius: 8px;
      --primary-color-swiper: #53e832e4;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--dark-text);
      background-color: var(--light-bg);
      overflow-x: hidden;
    }

    /* å¯¼èˆªæ æ ·å¼ */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
      display: flex;
      justify-content: center;
    }

    .nav-container {
      display: flex;
      max-width: 1000px;
      width: 100%;
    }

    .nav-btn {
      flex: 1;
      padding: 18px 0;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--accent2);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-btn.active {
      color: var(--primary-color);
    }

    .nav-btn::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 3px;
      background: var(--primary-color);
      transition: width 0.3s ease;
    }

    .nav-btn.active::after {
      width: 80%;
    }

    /* ä¸»å†…å®¹åŒº */
    main {
      padding-top: 60px;
    }

    .section {
      min-height: 100vh;
      padding: 40px 20px;
      display: none !important;
    }

    .section.active {
      display: block !important;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px 0;
    }

    h1 {
      font-size: 2.5rem;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .subtitle {
      color: #718096;
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    /* æ—¥å†åŒºåŸŸæ ·å¼ */
    .calendar-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .month-card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 15px;
      transition: transform 0.3s ease;
    }

    .month-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .month-header {
      padding-bottom: 10px;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--primary-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .month-title {
      font-size: 1.4rem;
      color: var(--primary-color);
    }

    .days-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
    }

    .day {
      aspect-ratio: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 50%;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s ease;
      position: relative;
    }

    .day.event::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 0;
      width: 8px;
      height: 8px;
      background-color: var(--accent-color);
      border-radius: 50%;
    }

    .day:hover {
      background-color: var(--primary-color);
      color: white;
    }

    .day.event:hover {
      background-color: var(--accent-color);
    }

    
    /* === Important day ring === */
    .day.important::before{
      content: "";
      position: absolute;
      inset: 2px;
      border: 2px dashed red;
      border-radius: 50%;
      pointer-events: none;
    }
    /* æ—…æ¸¸ç›¸å†Œå…¨å±æ»šåŠ¨æ ·å¼ */
    #travelView {
      padding: 0;
    }

    .travel-header {
      text-align: center;
      padding: 40px 20px 30px;
      max-width: 800px;
      margin: 0 auto;
    }

    .travel-title {
      font-size: 2.2rem;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .travel-subtitle {
      color: #718096;
      font-size: 1.1rem;
    }

    .swiper {
      width: 100%;
      height: calc(100vh - 180px);
    }

    .swiper-slide {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: center;
      text-align: center;
      padding: 0;
      overflow: hidden;
      position: relative;
      background-color: rgba(0, 0, 0, 0.05);
      border-radius: 20px;
    }

    .swiper-slide-content {
      max-width: 800px;
      width: 100%;
      z-index: 10;
      position: relative;
    }

    .travel-photo {
      width: 100%;
      height: 350px;
      object-fit: cover;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      transition: transform 0.4s ease;
    }

    .swiper-slide-active .travel-photo {
      transform: scale(1.05);
    }

    .travel-date {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary-color);
      margin-bottom: 10px;
    }

    .travel-location {
      font-size: 1.4rem;
      margin-bottom: 20px;
      color: var(--dark-text);
    }

    .travel-description {
      font-size: 1.1rem;
      line-height: 1.8;
      color: var(--dark-text);
    }

    .swiper-pagination-bullet {
      width: 12px;
      height: 12px;
      background: rgba(0, 0, 0, 0.2);
      opacity: 1;
    }

    .swiper-pagination-bullet-active {
      background: var(--primary-color-swiper);
    }

    .swiper-button-next,
    .swiper-button-prev {
      color: var(--primary-color);
      background: rgba(255, 255, 255, 0.8);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .swiper-button-next::after,
    .swiper-button-prev::after {
      font-size: 1.5rem;
      font-weight: bold;
    }

    /* äº‹ä»¶æ¨¡æ€æ¡† */
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      overflow: auto;
      padding: 20px;
    }

    .modal-content {
      background-color: white;
      margin: auto;
      margin-top: calc(100vh*0.2);
      max-width: 800px;
      width: 90%;
      border-radius: var(--border-radius);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: modalOpen 0.4s;
    }

    @keyframes modalOpen {
      from {
        transform: scale(0.95);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .modal-header {
      padding: 15px 20px;
      background-color: var(--primary-color);
      color: white;
      border-top-left-radius: var(--border-radius);
      border-top-right-radius: var(--border-radius);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: white;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .close-btn:hover {
      transform: rotate(90deg);
    }

    .modal-body {
      padding: 25px;
      max-height: 70vh;
      overflow-y: auto;
    }

    .event-image {
      width: 100%;
      height: calc(100vh * 0.4);
      object-fit: cover;
      border-radius: var(--border-radius);
      margin-bottom: 20px;
    }

    .event-content {
      margin-bottom: 20px;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 1200px) {
      .swiper-slide {
        padding: 0 10%;
      }
    }

    @media (max-width: 900px) {
      .travel-title {
        font-size: 1.8rem;
      }

      .travel-date {
        font-size: 1.5rem;
      }

      .travel-location {
        font-size: 1.2rem;
      }

      .travel-description {
        font-size: 1rem;
      }
    }

    @media (max-width: 768px) {
      .calendar-container {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      }

      .swiper-slide {
        padding: 0 5%;
      }

      .travel-photo {
        height: 250px;
      }

      .day {
        font-size: 0.8rem;
      }

      h1 {
        font-size: 2rem;
      }

      .modal-body {
        padding: 15px;
      }

      .swiper-button-next,
      .swiper-button-prev {
        display: none;
      }
    }

    @media (max-width: 480px) {
      .calendar-container {
        grid-template-columns: 1fr;
      }

      .swiper-slide {
        padding: 0 20px;
      }

      .travel-photo {
        height: 200px;
        margin-bottom: 20px;
      }

      .day {
        font-size: 0.7rem;
      }

      .nav-btn {
        font-size: 0.9rem;
        padding: 15px 0;
      }
    }

    /* æ–°å¢é¢å¥–æ¨¡å—æ ·å¼ */
    .awards-section {
      padding: 40px 20px;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: white;
      position: relative;
      overflow: hidden;
    }

    .awards-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .awards-header h2 {
      font-size: 2.5rem;
      margin-bottom: 15px;
      background: linear-gradient(45deg, #ff9a00, #ff0a78);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .awards-header p {
      color: #a0aec0;
      max-width: 600px;
      margin: 0 auto;
    }

    .awards-container {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }

    .scrolling-tracks {
      position: relative;
      height: 300px;
      overflow: hidden;
    }

    .track {
      position: absolute;
      width: 100%;
      display: flex;
      white-space: nowrap;
      will-change: transform;
    }

    .track.top {
      top: 0;
      animation: scroll-left 40s linear infinite;
    }

    .track.bottom {
      bottom: 0;
      animation: scroll-right 40s linear infinite;
    }

    .award-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px;
      margin: 0 15px;
      min-width: 320px;
      max-width: 360px;
      min-height: 180px;
      max-height: 240px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease, background 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.12);
      overflow: hidden;
      display: block;
    }

    .award-card:hover {
      transform: translateY(-8px);
      background: rgba(34, 114, 234, 0.894);
    }

    .award-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      display: inline-block;
    }

    .award-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: #ff7e6b;
      overflow-wrap: break-word;
    }

    .award-winner {
      font-size: 1.1rem;
      margin-bottom: 12px;
      overflow-wrap: break-word;
    }

    .award-description {
      font-size: 0.9rem;
      color: #cbd5e0;
      line-height: 1.5;
      overflow-wrap: break-word;
    }

    @keyframes scroll-left {
      0% {
        transform: translateX(0);
      }

      100% {
        transform: translateX(-100%);
      }
    }

    @keyframes scroll-right {
      0% {
        transform: translateX(-100%);
      }

      100% {
        transform: translateX(0);
      }
    }

    /* æ§åˆ¶æŒ‰é’® */
    .awards-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
    }

    .control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-btn:hover {
      background: rgba(255, 126, 107, 0.8);
      transform: scale(1.1);
    }

    @media (max-width: 768px) {
      .award-card {
        min-width: 280px;
        height: 160px;
      }

      .track {
        animation-duration: 35s !important;
      }

      .scrolling-tracks {
        height: 280px;
      }
    }

    @media (max-width: 480px) {
      .award-card {
        min-width: 260px;
        padding: 15px;
      }

      .track {
        animation-duration: 30s !important;
      }

      .scrolling-tracks {
        height: 250px;
      }
    }

    /* Long text placement under main text in right column */
    .aw-text,
    .aw-longtext {
      grid-column: 2 / -1;
    }

    .aw-media {
      grid-column: 1 / 2;
      grid-row: 1 / span 2;
    }

    @media (max-width: 860px) {
      .aw-dialog .aw-body {
        grid-template-columns: 1fr;
      }

      .aw-text,
      .aw-longtext,
      .aw-media {
        grid-column: 1 / -1;
        grid-row: auto;
      }
    }
  
/* === Event Gallery (multi-image) === */
.event-gallery{
  position: relative; margin-bottom:16px; background:#0b1220; border-radius: var(--border-radius);
}
.eg-stage{ width:100%; height:calc(100vh * 0.4); display:flex; align-items:center; justify-content:center; overflow:hidden; border-radius:var(--border-radius); }
.eg-stage img{ width:100%; height:100%; object-fit:cover; background:#0b1220; display:block; }
.eg-nav{
  position:absolute; top:50%; transform:translateY(-50%); width:44px; height:44px;
  border-radius:999px; border:1px solid #e5e7eb; background:#ffffffcc; cursor:pointer; font-size:20px;
}
.eg-prev{ left:8px; } .eg-next{ right:8px; }
/* .eg-thumbs{ display:flex; gap:8px; overflow-x:auto; padding:4px 0 12px; }
.eg-thumbs button{ width:68px; height:48px; border:1px solid #d1d5db; border-radius:8px; overflow:hidden; background:#fff; cursor:pointer; opacity:.7 }
.eg-thumbs button.is-active{ outline:2px solid var(--primary-color); opacity:1 }
.eg-thumbs img{ width:100%; height:100%; object-fit:cover; display:block; } */
@media (max-width:768px){
  .eg-stage{ height:calc(100vh * 0.36); }
  .eg-nav{ display:none; } /* ç§»åŠ¨ç«¯ç›´æ¥æ»‘åŠ¨æˆ–ç‚¹ç¼©ç•¥å›¾ */
}

</style>

  <style>
    /* ===== Lazy Section Reveal ===== */
    .lazy-hidden {
      opacity: 0;
      transform: translateY(28px);
      filter: blur(6px);
      transition: opacity .9s cubic-bezier(.22, .61, .36, 1),
        transform .9s cubic-bezier(.22, .61, .36, 1),
        filter .9s cubic-bezier(.22, .61, .36, 1);
      will-change: opacity, transform, filter;
    }

    .lazy-show {
      opacity: 1 !important;
      transform: none !important;
      filter: none !important;
    }

    /* Staggered child reveal */
    .reveal-child {
      opacity: 0;
      transform: translateY(14px);
      filter: blur(8px);
      transition: opacity 1s cubic-bezier(.22, .61, .36, 1),
        transform 1s cubic-bezier(.22, .61, .36, 1),
        filter 1s cubic-bezier(.22, .61, .36, 1);
      will-change: opacity, transform, filter;
    }

    .reveal-child.show {
      opacity: 1;
      transform: none;
      filter: none;
    }

    @media (prefers-reduced-motion: reduce) {

      .lazy-hidden,
      .reveal-child {
        transition: none !important;
      }
    }
  </style>


  <style id="aw-patch-20250930">
    /* === aw-patch-20250930: fix .aw-dialog being covered by #travelView/Swiper; add responsive rules === */
    :root {
      --aw-z-fly: 3500;
      --aw-z-modal: 4000;
      /* higher than any section/swiper */
    }

    .section {
      position: relative;
      z-index: 0;
    }

    .aw-modal {
      position: fixed !important;
      inset: 0;
      display: none;
      z-index: var(--aw-z-modal) !important;
    }

    .aw-dialog {
      z-index: calc(var(--aw-z-modal) + 1) !important;
      top: clamp(6vh, 12vh, 20vh);
      max-height: calc(100vh - 2 * clamp(6vh, 12vh, 20vh));
    }

    @media (max-width: 768px) {
      .aw-dialog {
        left: 50%;
        transform: translateX(-50%);
        width: 100vw;
        border-radius: 12px;
        top: 6vh;
        max-height: 88vh;
      }

      .aw-dialog .aw-body {
        max-height: 72vh;
        grid-template-columns: 1fr;
      }
    }

    /* === end aw-patch-20250930 === */
  </style>
  <style id="map-style-20250930">
    /* ===== åœ°å›¾è§†å›¾æ ·å¼ï¼ˆä¸ç°æœ‰é£æ ¼ä¸€è‡´ï¼‰ ===== */
    #mapView {
      padding: 20px;
    }

    .map-header {
      text-align: center;
      padding: 20px 0 10px;
    }

    .map-title {
      font-size: 2.2rem;
      color: var(--primary-color);
      margin-bottom: 8px;
    }

    .map-subtitle {
      color: #718096;
      font-size: 1.05rem;
    }

    .tmap-container {
      width: 100%;
      height: calc(100vh - 260px);
      background: #eef2f7;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .08);
    }

    .map-toolbar {
      display: flex;
      gap: 16px;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0 16px;
      flex-wrap: wrap;
    }

    .map-search {
      display: flex;
      gap: 8px;
      align-items: center;
      flex: 1 1 420px;
    }

    .map-search input {
      flex: 1;
      height: 42px;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      padding: 0 12px;
      font-size: 14px;
      outline: none;
      background: #fff;
    }

    .map-btn {
      height: 42px;
      padding: 0 12px;
      border: 1px solid #e5e7eb;
      background: #fff;
      border-radius: 10px;
      cursor: pointer;
      transition: transform .15s ease, box-shadow .2s ease;
    }

    .map-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .08);
    }

    .map-key {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .map-key input {
      width: 260px;
      height: 42px;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      padding: 0 12px;
      font-size: 14px;
      background: #fff;
    }

    .map-legend {
      display: flex;
      gap: 18px;
      align-items: center;
      font-size: 13px;
      color: #64748b;
      padding: 10px 2px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      display: inline-block;
      border-radius: 999px;
      margin-right: 6px;
      vertical-align: middle;
    }

    .legend-travel {
      background: var(--primary-color);
    }

    .legend-event {
      background: var(--accent-color);
    }

    /* å“åº”å¼ */
    @media (max-width: 900px) {
      .tmap-container {
        height: calc(100vh - 280px);
      }

      .map-title {
        font-size: 1.8rem;
      }
    }

    @media (max-width: 768px) {
      .map-toolbar {
        gap: 12px;
      }

      .map-key input {
        width: 200px;
      }

      .tmap-container {
        height: calc(100vh - 300px);
      }
    }

    @media (max-width: 480px) {
      .map-key {
        width: 100%;
      }

      .map-key input {
        flex: 1;
        width: auto;
      }

      .tmap-container {
        height: calc(100vh - 320px);
      }
    }

    .map-key {
      display: none !important;
    }
  
.map-layers { display:flex; gap:14px; align-items:center; flex-wrap: wrap; }
.map-layers label { display:flex; gap:8px; align-items:center; font-size: 14px; color:#374151; background:#fff; border:1px solid #e5e7eb; padding:8px 10px; border-radius:10px; }
@media (max-width: 768px){
  .map-layers { width: 100%; }
}

</style>

<!-- BEAUTIFY INJECTION START: neumorphism + micro-interactions -->
<style id="beautify-neumorph">
  :root{
    --neu-bg: #eef3fb;
    --neu-surface: #ffffff;
    --neu-shadow-light: rgba(255,255,255,0.9);
    --neu-shadow-dark: rgba(100,120,150,0.14);
    --glass: rgba(255,255,255,0.6);
    --glass-border: rgba(255,255,255,0.5);
    --accent-soft: linear-gradient(135deg, rgba(72,131,220,0.12), rgba(255,126,107,0.08));
  }

  /* Apply gentle background overlay */
  body { background: radial-gradient(1200px 600px at 10% 10%, rgba(72,131,220,0.03), transparent 10%),
                 radial-gradient(800px 400px at 90% 90%, rgba(255,126,107,0.02), transparent 8%),
                 var(--light-bg); }

  /* Neumorphic cards */
  .month-card, .award-card, .aw-card, .month-header, .modal-content, .event-gallery, .eg-stage {
    background: linear-gradient(180deg, rgba(255,255,255,0.65), rgba(246,249,255,0.65));
    border-radius: 14px;
    box-shadow: 12px 12px 24px var(--neu-shadow-dark), -8px -8px 20px var(--neu-shadow-light);
    border: 1px solid rgba(255,255,255,0.5);
    transition: transform .6s cubic-bezier(.2,.9,.2,1), box-shadow .6s ease, background .6s ease;
  }

  .month-card:hover, .award-card:hover, .aw-card:hover, .event-gallery:hover {
    transform: translateY(-8px) scale(1.01);
    box-shadow: 18px 22px 40px rgba(80,100,140,0.18), -12px -12px 28px rgba(255,255,255,0.95);
  }

  /* Slight glass effect for nav */
  nav {
    backdrop-filter: blur(6px) saturate(120%);
    background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6));
    border-bottom: 1px solid rgba(255,255,255,0.6);
  }

  .nav-btn {
    background: transparent;
    border-radius: 12px;
    padding: 18px 18px;
  }

  .nav-btn.active {
    background: var(--accent-soft);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    color: var(--primary-color);
  }

  /* Soft focus outlines for accessibility */
  .aw-card:focus, .aw-card[tabindex]:focus, .month-card:focus, .month-card[tabindex]:focus {
    outline: none;
    box-shadow: 0 6px 30px rgba(72,131,220,0.12), 0 0 0 4px rgba(72,131,220,0.06);
    transform: translateY(-6px);
  }

  /* Days micro-interaction */
  .day {
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,252,255,0.6));
    transition: transform .18s cubic-bezier(.2,.8,.2,1), box-shadow .18s ease;
  }
  .day:hover { transform: translateY(-6px); box-shadow: 6px 8px 18px rgba(60,80,120,0.08); }


  /* Awards area: subtle vignette and soft card separation */
  .aw-viewport { background: linear-gradient(180deg, rgba(10,12,20,0.02), rgba(10,12,20,0.04)); padding: 18px; border-radius: 14px; }
  .aw-fly { backdrop-filter: blur(6px) saturate(120%); }

  /* Event modal gallery: center crop polish */
  .eg-stage img, .eg-stage video, .travel-photo { border-radius: 12px; box-shadow: 0 12px 36px rgba(16,24,40,0.18); }

  /* Focus-visible only (better keyboard UX) */
  :focus-visible { outline: 3px solid rgba(83,121,255,0.14); outline-offset: 3px; }

  /* Respect user reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .month-card, .award-card, .aw-card, .day, .nav-btn, .swiper-slide { transition: none !important; transform: none !important; }
  }

  /* Small responsive tweak */
  @media (max-width:480px){
    .month-card, .award-card { border-radius: 12px; }
  }
</style>

<!-- ADVANCED BEAUTIFY: gradient theme + scroll reveal + dark mode toggle -->
<style id="enhanced-theme">
  :root {
    --light-bg: #eef3fb;
    --light-text: #1e2433;
    --dark-bg: #999b9f;
    --dark-text: #000000;
    --accent1: #4883dc;
    --accent2: #ff7e6b;
    --accent-grad: linear-gradient(135deg, var(--accent1), var(--accent2));
  }

  body {
    color: var(--light-text);
    background: linear-gradient(120deg, rgba(72,131,220,0.08), rgba(255,126,107,0.05));
    background-attachment: fixed;
    transition: background 1.6s ease, color 0.8s ease;
  }

  [data-theme="dark"] body {
    color: var(--dark-text);
  }

  /* smooth color transition for cards */
  .month-card, .aw-card, .award-card {
    transition: background 0.8s ease, color 0.8s ease, box-shadow 0.8s ease;
  }

  /* Scroll reveal animation */
  .reveal {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity .8s ease-out, transform .8s cubic-bezier(.22,.61,.36,1);
  }
  .reveal.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Dark mode toggle button */
  #theme-toggle {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 9999;
    background: var(--accent-grad);
    border: none;
    color: #fff;
    border-radius: 50%;
    width: 52px;
    height: 52px;
    cursor: pointer;
    box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  #theme-toggle:hover {
    transform: scale(1.08);
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
  }
  #theme-toggle svg {
    width: 26px;
    height: 26px;
  }

  /* ğŸŒ™ æš—è‰²æ¨¡å¼ä¸‹çš„å¡ç‰‡å»å‘å…‰ & æ›´æŸ”å’Œçš„é˜´å½± */
  [data-theme="dark"] .month-card,
  [data-theme="dark"] .month-header,
  [data-theme="dark"] .award-card,
  [data-theme="dark"] .aw-card,
  [data-theme="dark"] .day,
  [data-theme="dark"] .month-title,
  [data-theme="dark"] .modal-content,
  [data-theme="dark"] .event-gallery,
  [data-theme="dark"] .eg-stage {
    box-shadow: 0 0px 0px rgba(0, 0, 0, 0.6);
    border: 0px solid rgba(255, 255, 255, 0.05);
    background: var(--dark-surface, rgba(255, 255, 255, 0.69));
    color: var(--dark-text);
    opacity: 0.8;
    transition: background 0.6s ease, box-shadow 0.6s ease;
  }

  [data-theme="dark"] .nav-btn {
      flex: 1;
      padding: 18px 0;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--light-text);
      background: transparent;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }
    [data-theme="dark"] .nav-btn.active {
      color: var(--primary-color);
    }

    [data-theme="dark"] .nav-btn::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 3px;
      background: var(--primary-color);
      transition: width 0.3s ease;
    }

    [data-theme="dark"] .nav-btn.active::after {
      width: 80%;
    }

  /* æ‚¬åœæ—¶åªç¨å¾®æäº®ï¼Œè€Œä¸å‘å…‰ */
  [data-theme="dark"] .month-card:hover,
  [data-theme="dark"] .award-card:hover,
  [data-theme="dark"] .aw-card:hover,
  [data-theme="dark"] .day:hover {
    transform: translateY(-4px);
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.4),
      inset -1px -1px 3px rgba(255, 255, 255, 0.04);
  }
  [data-theme="dark"] .aw-card .aw-w{
    color: var(--light-bg) !important;
  }

  /* === Global scrollbar (WebKit + Firefox) === */
  :root{
    /* å¯æŒ‰éœ€è°ƒæ•´é…è‰²ã€å°ºå¯¸ */
    --sb-track: rgba(0,0,0,0.06);
    --sb-thumb: rgba(72,131,220,0.75);         /* æ‹‡æŒ‡é¢œè‰² = ä¸»è‰² */
    --sb-thumb-hover: rgba(72,131,220,0.95);
    --sb-width: 10px;
    --logo-height: 76px;                        /* é¡¶éƒ¨ Logo åŒºé«˜åº¦ */
    --nav-height: 60px;                         /* ç°æœ‰å¯¼èˆªé«˜åº¦ */
    --header-offset: calc(var(--logo-height) + var(--nav-height));
  }

  /* Firefox */
  *{
    scrollbar-width: thin;
    scrollbar-color: var(--sb-thumb) var(--sb-track);
  }

  /* WebKit (Chrome/Edge/Safari) */
  ::-webkit-scrollbar{ width: var(--sb-width); }
  ::-webkit-scrollbar-track{
    background: var(--sb-track);
    border-left: 1px solid rgba(0,0,0,0.04);
  }
  ::-webkit-scrollbar-thumb{
    background: var(--sb-thumb);
    border-radius: 999px;
    border: 2px solid transparent;
    background-clip: content-box;
  }
  ::-webkit-scrollbar-thumb:hover{ background: var(--sb-thumb-hover); }

  /* æš—è‰²æ¨¡å¼é€‚é…ï¼ˆè‹¥å·²å¯ç”¨ data-theme="dark"ï¼‰ */
  [data-theme="dark"]{
    --sb-track: rgba(255,255,255,0.08);
    --sb-thumb: rgba(13, 232, 150, 0.75);
    --sb-thumb-hover: rgba(13, 232, 150, 0.95);
  }

  /* === é¡¶éƒ¨ Logo æ¡æ ·å¼ === */
  #topLogoBar{
    position: fixed;
    top: 0; left: 0; right: 0;
    height: var(--logo-height);
    z-index: 1001;                              /* é«˜äºå¯¼èˆª */
    display: grid;
    place-items: center;
    padding: 12px 16px;
    background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.72));
    backdrop-filter: blur(6px) saturate(120%);
    border-bottom: 1px solid rgba(0,0,0,0.06);
    transition: transform .28s ease, opacity .28s ease;
    /* æ–°å¢ï¼šä¸ºäº†æ°´æ³¢æ•ˆæœ */
    overflow: hidden;           /* æŠŠæº¢å‡ºçš„æ°´æ³¢è£æ‰ï¼Œåªåœ¨æ¡å†…å¯è§ */
    isolation: isolate;         /* ä¼ªå…ƒç´ çš„æ··åˆæ¨¡å¼åªä½œç”¨åœ¨è¿™ä¸ªåŒºåŸŸ */
  }

  /* é¡¶éƒ¨ Logo æ¡æ°´æ³¢æµåŠ¨æ•ˆæœ */
  #topLogoBar::before{
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      radial-gradient(circle at 0% 0%, rgba(56,189,248,0.28), transparent 55%),
      radial-gradient(circle at 100% 100%, rgba(16,185,129,0.22), transparent 55%),
      repeating-linear-gradient(-45deg,
        rgba(59,130,246,0.18) 0px,
        rgba(59,130,246,0.18) 2px,
        transparent 2px,
        transparent 6px);
    mix-blend-mode: screen;
    opacity: 0.75;
    transform: translate3d(0,0,0) scale(1.02);
    animation: topLogoWave 14s ease-in-out infinite alternate;
  }

  /* æ·±è‰²æ¨¡å¼ä¸‹ç¨å¾®æ›´äº®ä¸€ç‚¹çš„æ°´æ³¢ */
  [data-theme="dark"] #topLogoBar::before{
    background:
      radial-gradient(circle at 0% 0%, rgba(56,189,248,0.55), transparent 55%),
      radial-gradient(circle at 100% 100%, rgba(34,197,94,0.50), transparent 55%),
      repeating-linear-gradient(-45deg,
        rgba(59,130,246,0.45) 0px,
        rgba(59,130,246,0.45) 2px,
        transparent 2px,
        transparent 6px);
    mix-blend-mode: screen;
    opacity: 0.9;
  }

  /* æ°´æ³¢æµåŠ¨åŠ¨ç”» */
  @keyframes topLogoWave{
    0%{
      transform: translate3d(-6%,0,0) scale(1.02);
      filter: hue-rotate(0deg);
    }
    50%{
      transform: translate3d(4%,3%,0) scale(1.05);
      filter: hue-rotate(8deg);
    }
    100%{
      transform: translate3d(-4%,0,0) scale(1.02);
      filter: hue-rotate(0deg);
    }
  }

  #topLogoBar .logo-wrap{
    display:flex; align-items:center; gap:12px;
    z-index: 1; /* ä¿è¯æ–‡å­—å’Œ Logo åœ¨é¢‘è°±ä¹‹ä¸Š */
    font-weight: 800; font-size: 22 px; font-family:Cambria !important;
  }
  #topLogoBar .logo-wrap img{ height: 36px; width:auto; display:block; }
  #topLogoBar .logo-wrap span{ color: var(--primary-color) }
  [data-theme="dark"]   #topLogoBar .logo-wrap span{ color: var(--light-text) }

  /* å¯¼èˆªä¸‹ç§»åˆ° Logo ä¹‹ä¸‹ï¼›æ»šåŠ¨åå›åˆ°é¡¶è´´ */
  nav{
    top: var(--logo-height) !important;         /* é»˜è®¤é¡¶è¾¹è· = logo é«˜åº¦ */
    z-index: 1000;
    transition: top .28s ease;
  }

  /* ä¸»ä½“é¡¶éƒ¨ç•™ç™½ï¼šLogo + å¯¼èˆªï¼ˆæ»šåŠ¨åä¼šåŠ¨æ€å˜æ›´ï¼‰ */
  main{ padding-top: var(--header-offset) !important; }

  /* === å½“é¡µé¢æ»šåŠ¨ã€Œå¸é¡¶ã€åï¼šéšè— Logoï¼Œå¯¼èˆªé¡¶è´´ï¼Œä¸»ä½“ç•™ç™½å˜å° === */
  html.is-stuck #topLogoBar{ transform: translateY(-100%); opacity: 0; pointer-events: none; }
  html.is-stuck{
    --logo-height: 0px;
    --header-offset: var(--nav-height);
  }

</style>



<script id="beautify-script">
  // Non-intrusive enhancement: add a data attribute for CSS hooks and gentle enter animations
  (function(){
    try {
      document.documentElement.dataset.beautified = "true";
      document.querySelectorAll('.month-card, .aw-card, .award-card').forEach((el,i)=>{
        el.style.opacity = 0;
        el.style.transform = 'translateY(8px)';
        setTimeout(()=>{ el.style.transition = 'opacity .6s ease, transform .6s cubic-bezier(.22,.61,.36,1)'; el.style.opacity=1; el.style.transform='none'; }, 120 + i*40);
      });
    } catch(e){}
  })();
</script>
<!-- BEAUTIFY INJECTION END -->

<script id="enhanced-script-fixed">
window.addEventListener('DOMContentLoaded', function() {
  // ğŸŒˆ Animated gradient background (light & dark)
  function startGradientAnimation() {
    const bodyEl = document.body;
    if (!bodyEl) { requestAnimationFrame(startGradientAnimation); return; }

    let gradientAngle = 0;
    function animateGradient() {
      gradientAngle = (gradientAngle + 0.2) % 360;

      const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
      if (isDark) {
        // ğŸŒ™ æš—æ¨¡å¼æ¸å˜ï¼ˆæ›´æ·±ã€æ›´æŸ”å’Œï¼‰
        bodyEl.style.background =
          "linear-gradient(" + gradientAngle + "deg, #2CD8D5 0%, #C5C1FF 56%, #FFBAC3 100%)";
      } else {
        // â˜€ï¸ äº®æ¨¡å¼æ¸å˜ï¼ˆåŸè‰²5
        bodyEl.style.background =
          "linear-gradient(" + gradientAngle + "deg, #a8edea 0%, #fed6e3 100%)";
      }
      requestAnimationFrame(animateGradient);
    }
    animateGradient();
  }
  startGradientAnimation();

  // ğŸ‘€ Scroll reveal
  const reveals = document.querySelectorAll('.month-card, .award-card, .aw-card, .day, .month-header');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.12 });
  reveals.forEach(r => { r.classList.add('reveal'); observer.observe(r); });

  // ğŸŒ™ Dark mode toggle button
  const btn = document.createElement('button');
  btn.id = "theme-toggle";
  btn.setAttribute('aria-label','åˆ‡æ¢å¤œé—´æ¨¡å¼');
  btn.innerHTML = '<svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>';
  document.body.appendChild(btn);

  btn.addEventListener('click', () => {
    const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
    if (isDark) {
      document.documentElement.removeAttribute('data-theme');
      localStorage.setItem('theme','light');
    } else {
      document.documentElement.setAttribute('data-theme','dark');
      localStorage.setItem('theme','dark');
    }
  });

  // â˜€ï¸ Load saved theme preference
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') {
    document.documentElement.setAttribute('data-theme','dark');
  }
});
</script>
<!-- END ADVANCED BEAUTIFY -->



<style id="introView-mobile-patch">
  :root{
    --intro-height: calc(100dvh - var(--header-offset, 120px));
    --intro-fade-dur: 6s;
    --intro-fade-gap: .6s;
  }
  #introView .intro-slide{
    background-image: var(--bg, none);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }
  #introView.section{ padding: 0 !important; }
  #introView .intro-hero{
    height: var(--intro-height);
    width: 100%;
    position: relative;
    overflow: hidden;
    isolation: isolate;
    border-radius: 0;
  }
  #introView .intro-copy-wrap{ 
    position: absolute; inset: 0; display: grid; place-items: center; z-index: 2; 
    padding: clamp(12px, 4vw, 32px);
    pointer-events: none;
  }
  #introView .intro-copy{
    max-width: min(800px, 86vw);
    width: 100%;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.25);
    padding: clamp(14px, 4vw, 28px);
    text-align: center;
    color: #f8fafc;
  }
  #introView .intro-title{
    font-size: clamp(20px, 4.6vw, 34px);
    font-weight: 800;
    letter-spacing: .2px;
    margin-bottom: .4em;
    color: rgba(255,255,255,.9);
  }
  #introView .intro-sub{
    font-size: clamp(13px, 2.8vw, 18px);
    line-height: 1.9;
    color: rgba(255,255,255,.8);
    max-width: 60ch;
    margin: 0 auto;
    font-weight: 600;
    font-family: Cambria;
  }
  #introView .intro-slide::after{
    content: "";
    position: absolute; inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,.50), rgba(0,0,0,.18), transparent);
  }
  @media (max-width: 768px){
    :root{ --intro-height: calc(100dvh - var(--header-offset, 120px)); }
    #introView .intro-copy{ border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.22); max-width: min(556px, 86vw); width: 100%;}
    .swiper-button-next, .swiper-button-prev{ display: none !important; }
    #introView .intro-title{ margin: 0 0 6px; font-size: clamp(16px, 4.0vw, 28px);}
    #introView .intro-sub{ font-size: clamp(10px, 2.2vw, 14px);}
  }
  @media (max-width: 480px){
    #introView .intro-copy{
      padding: 12px clamp(10px, 4vw, 18px);
      margin-bottom: env(safe-area-inset-bottom, 0px);
      backdrop-filter: blur(6px);
      max-width: min(480px, 100vw); 
      width: 100%;
      max-height: min(360px,50vh) 
    }
    #introView .intro-title{ font-size: clamp(18px, 5.4vw, 28px); }
    #introView .intro-sub{ font-size: clamp(10px, 2.4vw, 16px); line-height: 1.8; }
  }
  @media (orientation: landscape) and (max-height: 520px){
    :root{ --intro-height: calc(100dvh - var(--header-offset, 72px)); }
    #introView .intro-copy-wrap{ align-items: end; padding-bottom: clamp(8px, 4vh, 24px); }
    #introView .intro-copy{ padding: 10px 14px; border-radius: 10px; }
    #introView .intro-title{ margin: 0 0 6px; }
    #introView .intro-sub{ line-height: 1.4; font-size: clamp(10px, 2.0vw, 14px); }
  }
  @media (prefers-reduced-motion: reduce){
    #introView .intro-slide{ animation: none !important; opacity: 0; }
    #introView .intro-slide:nth-child(1){ opacity: 1; }
  }
</style>

  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

<style>
  .travel-disc-container {
    margin: 24px auto 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }
  .travel-disc {
    position: relative;
    width: 220px;
    height: 220px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.12), 0 18px 40px rgba(15, 23, 42, 0.35);
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25), rgba(15,23,42,0.9));
    overflow: hidden;
  }
  .travel-disc-dot {
    position: absolute;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.7);
    background: rgba(15,23,42,0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    transform: translate(-50%, -50%);
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, border-color 0.25s ease;
  }
  .travel-disc-dot::after {
    content: "";
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: rgba(255,255,255,0.9);
  }
  .travel-disc-dot.active {
    background: var(--accent-color, #ffb347);
    border-color: rgba(255, 228, 180, 0.9);
    box-shadow: 0 0 0 6px rgba(252, 211, 77, 0.35);
    transform: translate(-50%, -50%) scale(1.1);
  }
  .travel-disc-center {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 120px;
    height: 120px;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.1));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 10px;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.45);
    pointer-events: none;
  }
  .travel-disc-center-title {
    font-size: 1.0rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: rgba(9, 9, 9, 0.9);
  }
  .travel-disc-center-sub {
    margin-top: 4px;
    font-size: 0.9rem;
    color: rgba(19, 19, 19, 0.9);
  }
  .travel-disc-caption {
    font-size: 0.85rem;
    color: rgba(7, 7, 7, 0.9);
    text-align: center;
  }
  @media (max-width: 600px) {
    .travel-disc {
      width: 180px;
      height: 180px;
    }
    .travel-disc-center {
      width: 100px;
      height: 100px;
    }
  }
</style>

<style>
  /* ä»…é€šè¿‡åœ†ç›˜åˆ‡æ¢å¹´åº¦ç¬é—´ï¼šéšè—å·¦å³åˆ‡æ¢æŒ‰é’®ä¸è‡ªåŠ¨è½®æ’­å…¥å£ */
  #travelSwiper .swiper-button-next,
  #travelSwiper .swiper-button-prev {
    display: none !important;
  }
</style>

<style>
  /* æ˜Ÿç›˜æ˜Ÿäº‘ï¼šé€‚é… light / dark æ¨¡å¼ï¼Œå¹¶æ·»åŠ æ˜Ÿå…‰ä¸æµæ˜Ÿ */
  .travel-disc-container {
    position: relative;
    padding: 32px 0 40px;
  }

  .travel-disc-container::before {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    width: 340px;
    height: 340px;
    border-radius: 50%;
    background:
      radial-gradient(circle at 30% 20%, rgba(248,250,252,0.9), transparent 55%),
      radial-gradient(circle at 75% 80%, rgba(59,130,246,0.5), transparent 60%),
      radial-gradient(circle at 10% 90%, rgba(236,72,153,0.5), transparent 55%);
    opacity: 0.75;
    filter: blur(8px);
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 0;
  }

  @media (prefers-color-scheme: light) {
    .travel-disc-container::before {
      background:
        radial-gradient(circle at 25% 20%, rgba(255,255,255,0.95), transparent 55%),
        radial-gradient(circle at 70% 80%, rgba(59,130,246,0.35), transparent 60%),
        radial-gradient(circle at 10% 90%, rgba(236,72,153,0.28), transparent 55%);
      opacity: 0.9;
      filter: blur(10px);
    }
  }

  @media (prefers-color-scheme: dark) {
    .travel-disc-container::before {
      background:
        radial-gradient(circle at 15% 10%, rgba(148,163,184,0.45), transparent 55%),
        radial-gradient(circle at 80% 85%, rgba(56,189,248,0.55), transparent 65%),
        radial-gradient(circle at 10% 90%, rgba(244,114,182,0.6), transparent 60%);
      opacity: 0.85;
      filter: blur(12px);
    }
  }

  .travel-disc {
    position: relative;
    z-index: 1;
    transition: transform 0.6s ease;
    transform-origin: 50% 50%;
    will-change: transform;
  }

  .travel-disc::before,
  .travel-disc::after {
    content: "";
    position: absolute;
    left: 50%;
    top: 50%;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
  }

  /* å†…åœˆæ˜Ÿè½¨ */
  .travel-disc::before {
    width: 170px;
    height: 170px;
    border: 1px dashed rgba(148,163,184,0.65);
    box-shadow: 0 0 12px rgba(148,163,184,0.6);
    opacity: 0.9;
  }

  /* å¤–åœˆæŠ¤ç›¾å…‰ç¯ */
  .travel-disc::after {
    width: 210px;
    height: 210px;
    border: 1px solid rgba(15,23,42,0.6);
    box-shadow: 0 0 32px rgba(15,23,42,0.95);
    opacity: 0.9;
  }

  /* æ˜Ÿç›˜æ–‡å­—ç¨å¾®æ›´æœ‰ä»ªå¼æ„Ÿ */
  .travel-disc-center-title {
    letter-spacing: 0.3em;
  }
  .travel-disc-center-sub {
    font-weight: 500;
  }

  /* æ˜Ÿå…‰å±‚ */
  .travel-disc-sky {
    position: absolute;
    inset: -40px;
    pointer-events: none;
    z-index: 0;
    overflow: visible;
  }

  .travel-disc-sky .star {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 999px;
    background: rgba(255,255,255,0.95);
    box-shadow: 0 0 10px rgba(255,255,255,0.9);
    opacity: 0;
    animation: travel-star-twinkle 2.4s ease-in-out infinite;
  }

  /* ä¸»è¦çš„å››é¢—æ˜Ÿï¼ŒèŠ‚å¥æ˜æ˜¾ä¸€ç‚¹ */
  .travel-disc-sky .star.star-1 { top: 8%;  left: 18%; animation-delay: 0s; }
  .travel-disc-sky .star.star-2 { top: 22%; right: 6%; animation-delay: 0.7s; }
  .travel-disc-sky .star.star-3 { bottom: 12%; left: 10%; animation-delay: 1.4s; }
  .travel-disc-sky .star.star-4 { bottom: 20%; right: 22%; animation-delay: 2.1s; }

  /* é¢å¤–ä¸€äº›æ›´å¾®å¼±çš„æ˜Ÿå…‰ï¼Œå‘¨æœŸæ›´é•¿ */
  .travel-disc-sky .star.star-5 { top: 35%; left: 4%;  opacity: 0.3; animation-duration: 3.2s; animation-delay: 0.9s; }
  .travel-disc-sky .star.star-6 { top: 10%; right: 28%; opacity: 0.3; animation-duration: 3.6s; animation-delay: 1.8s; }
  .travel-disc-sky .star.star-7 { bottom: 30%; left: 26%; opacity: 0.35; animation-duration: 3.4s; animation-delay: 2.4s; }
  .travel-disc-sky .star.star-8 { bottom: 6%;  right: 12%; opacity: 0.35; animation-duration: 3.8s; animation-delay: 3.1s; }

  @keyframes travel-star-twinkle {
    0%, 100% {
      opacity: 0;
      transform: scale(0.4);
    }
    40% {
      opacity: 1;
      transform: scale(1);
    }
    60% {
      opacity: 0.65;
      transform: scale(0.8);
    }
  }

  /* æå¾®å¼±çš„æµæ˜Ÿåˆ’è¿‡ */
  .travel-disc-sky .shooting-star {
    position: absolute;
    width: 70px;
    height: 2px;
    border-radius: 999px;
    background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(255,255,255,0));
    opacity: 0;
    filter: blur(0.5px);
    transform-origin: 0% 50%;
    animation: travel-shooting-star 5.5s ease-in-out infinite;
  }

  .travel-disc-sky .shooting-star-1 {
    top: 18%;
    left: 5%;
    transform: rotate(15deg);
    animation-delay: .8s;
  }

  .travel-disc-sky .shooting-star-2 {
    bottom: 22%;
    right: 8%;
    transform: rotate(-20deg);
    animation-delay: 1.4s;
  }

  .travel-disc-sky .shooting-star-3 {
    top: 28%;
    left: 8%;
    transform: rotate(15deg);
    animation-delay: .8s;
  }

  .travel-disc-sky .shooting-star-4 {
    bottom: 32%;
    right: 5%;
    transform: rotate(-20deg);
    animation-delay: 1.4s;
  }

  @keyframes travel-shooting-star {
    0%, 50% {
      opacity: 0;
      transform: translate3d(0, 0, 0) scaleX(0.4);
    }
    58% {
      opacity: 0.95;
      transform: translate3d(40px, 6px, 0) scaleX(1);
    }
    100% {
      opacity: 0;
      transform: translate3d(75px, 14px, 0) scaleX(0.2);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .travel-disc-sky .star,
    .travel-disc-sky .shooting-star {
      animation: none;
      opacity: 0.6;
    }
  }
</style>
</head>

<body>
  <div id="app-loader">
    <div class="loader-content">
      <div class="loader-title">Â©Floral Sunsunrise</div>
      <div class="typing-box">
        <span id="typing-text"></span>
        <span class="cursor">|</span>
      </div>
      <div class="petal-loader">
        <div class="petal petal-1"></div>
        <div class="petal petal-2"></div>
        <div class="petal petal-3"></div>
        <div class="petal petal-4"></div>
        <div class="petal petal-5"></div>
      </div>
    </div>
  </div>

  <style>
    #app-loader {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      transition: opacity .8s ease, visibility .8s ease;
    }

    #app-loader.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    
  .loader-content {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 26px;
  }

  .loader-title {
    font-size: 2.0rem;
    font-weight: 600;
    color: #ffffff;
    margin-top: 6px;
    margin-bottom: 4px;
    text-align: center;
    letter-spacing: 1px;
    opacity: 0;
    animation: titleFadeIn 1.0s ease forwards 0.3s;
  }

  .petal-loader {
    position: relative;
    width: 90px;
    height: 90px;
    margin-top: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .petal {
    position: absolute;
    width: 21px;
    height: 36px;
    background: linear-gradient(135deg, #ff7e6b 0%, #ffb7a5 100%);
    border-radius: 50% 50% 40% 40%;
    opacity: 0.7;
    transform-origin: 50% 80%;
    animation: petalPulse 1s ease-in-out infinite;
    filter: drop-shadow(0 0 6px rgba(255, 160, 140, 0.25));
    margin-top: 10px;
  }

  /* è®¾ç½®æ¯ä¸ªèŠ±ç“£çš„æ—‹è½¬è§’åº¦ */
  .petal-1 { transform: rotate(0deg); }
  .petal-2 { transform: rotate(72deg); }
  .petal-3 { transform: rotate(144deg); }
  .petal-4 { transform: rotate(216deg); }
  .petal-5 { transform: rotate(288deg); }

  @keyframes petalPulse {
    0% { transform: scale(0.95) rotate(var(--rot)); opacity: 0.55; }
    50% { transform: scale(1.12) rotate(calc(var(--rot) + 8deg)); opacity: 0.9; }
    100% { transform: scale(0.95) rotate(var(--rot)); opacity: 0.55; }
  }

  /* åŠ¨æ€åˆ†é…æ¯ä¸ªèŠ±ç“£çš„è§’åº¦ï¼ˆè‡ªå®šä¹‰å±æ€§ï¼‰ */
  .petal-1 { --rot:   0deg; }
  .petal-2 { --rot:  72deg; }
  .petal-3 { --rot: 144deg; }
  .petal-4 { --rot: 216deg; }
  .petal-5 { --rot: 288deg; }


  @keyframes titleFadeIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }


    .typing-box {
      font-size: 1.8rem;
      color: #e6edf3;
      font-family: Consolas, "Courier New", monospace;
      display: flex;
      align-items: center;
    }

    .cursor {
      margin-left: 6px;
      font-weight: bold;
      animation: blink .9s infinite;
      color: #58a6ff;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      50.1%, 100% { opacity: 0; }
    }
  </style>

  <script>
    (function() {
      const loader = document.getElementById('app-loader');
      const textEl = document.getElementById('typing-text');

      // ä½ è¦æ˜¾ç¤ºçš„æ‰“å­—æœºæ–‡å­—
      const message = "2025 Memory of The Year";
      let index = 0;
      const speed = 60;

      // æ‰“å­—æœºæ•ˆæœ
      function type() {
        if (index < message.length) {
          textEl.textContent += message.charAt(index);
          index++;
          setTimeout(type, speed);
        }
      }
      type();

      // === æ–°å¢ï¼šè®°å½•åŠ¨ç”»å¼€å§‹æ—¶é—´ ===
      const startTime = Date.now();
      const MIN_DURATION = 3000; // è‡³å°‘ 3 ç§’

      let hasHidden = false;

      function hideLoader() {
        if (hasHidden) return;
        hasHidden = true;
        loader.classList.add("fade-out");
      }

      // å½“é¡µé¢çœŸæ­£åŠ è½½å®Œæ¯•æ—¶è§¦å‘
      function tryHide() {
        const elapsed = Date.now() - startTime;
        const remaining = MIN_DURATION - elapsed;

        if (remaining > 0) {
          // å¦‚æœæœªè¾¾åˆ° 3 ç§’ â†’ è¡¥è¶³å‰©ä½™æ—¶é—´åå†æ·¡å‡º
          setTimeout(hideLoader, remaining);
        } else {
          // å·²è¶…è¿‡ 3 ç§’ â†’ ç«‹å³æ·¡å‡º
          hideLoader();
        }
      }

      // DOM + å›¾ç‰‡åŠ è½½å®Œæˆ
      window.addEventListener('load', tryHide);

      // å…œåº• 8 ç§’ï¼ˆé˜²æ­¢åŠ è½½å¤±è´¥å¡ä½ï¼‰
      setTimeout(hideLoader, 8000);

    })();
  </script>

  <!-- é¡¶éƒ¨ Logo æ¡ï¼ˆéšæ»šåŠ¨ä¸å¯¼èˆªåˆ‡æ¢æ˜¾ç°ï¼‰ -->
  <div id="topLogoBar" role="banner" aria-label="ç«™ç‚¹æ ‡è¯†">
    <div class="logo-wrap">
      <!-- ä½ å·²æœ‰ faviconï¼šlogo.svgï¼›è‹¥æ²¡æœ‰å›¾å¯åªä¿ç•™æ–‡æœ¬ -->
      <img src="logo.svg" alt="ç«™ç‚¹ Logo" onerror="this.style.display='none'">
      <span>2025 Memory of The Year | Floral-Sunsunrise</span>
    </div>
  </div>

  <button class="nav-btn active" data-section="introView">å¯¼è¨€</button>

  <!-- å¯¼èˆªæ  -->
  <nav>
    <div class="nav-container">
      <button class="nav-btn" data-section="introView">å¹´åº¦åºè¨€</button>
      <button class="nav-btn" data-section="calendarView">è®°å¿†æ—¥å†</button>
      <button class="nav-btn" data-section="travelView">å®šæ ¼ç¬é—´</button>
      <button class="nav-btn" data-section="tourView">çºªå¿µç¥¨æ ¹</button>
      <button class="nav-btn" data-section="capsuleView">æ—¶é—´èƒ¶å›Š</button>
      <button class="nav-btn" data-section="mapView">è¶³è¿¹åœ°å›¾</button>
      <button class="nav-btn" data-section="MOTY2024" onclick="MOTY2024()">MOTY2024</button>
    </div>
  </nav>

  <script>
    function MOTY2024(){
      var url="https://moty.staryhti.top/MOTY.html";
      window.open(url, '_self');
    }
  </script>

  <main>
    <section id="introView" class="section active" aria-label="å¯¼è¨€">
    <style>
      /* ===== Intro Hero Slideshow ===== */
      :root {
        --intro-height: calc(100vh - var(--header-offset, 120px));
        --intro-fade-dur: 6s;         /* æ¯å¼ åœç•™+æ·¡å˜èŠ‚å¥ */
        --intro-fade-gap: 0.6s;       /* äº¤å‰æ·¡å…¥é‡å æ—¶é—´ */
      }
      body > .nav-btn[data-section="introView"]{ display: none !important; }
      #introView{
        padding: 0;
        min-height: var(--intro-height);
        display: block;
      }
      #introView.section{ padding: 0 !important; }
      #introView .intro-hero{ margin-top: 0 !important;}
      .intro-hero{
        position: relative;
        height: var(--intro-height);
        width: 100%;
        overflow: hidden;
        isolation: isolate;
        border-radius: 0; /* ä¸å…¨å±ä¸€è‡´ */
      }
      /* èƒŒæ™¯å±‚ï¼šå››å¼ å›¾å †å ï¼Œçº¯ CSS äº¤é”™æ·¡å…¥ */
      .intro-slide{
        position: absolute; inset: 0;
        background-size: cover; background-position: center;
        opacity: 0;
        animation: introFade calc(var(--intro-fade-dur) * 4) linear infinite;
        transition: filter .3s ease;
        will-change: opacity, transform, filter;
      }
      /* äº®/æš—æ¨¡å¼ä¸‹å ä¸€å±‚æ¸å˜ï¼Œä¿è¯ç™½æ¡†å†…æ–‡å­—å¯¹æ¯” */
      .intro-slide::after{
        content:"";
        position:absolute; inset:0;
        background: linear-gradient(to top, rgba(0,0,0,.45), rgba(0,0,0,.18), rgba(0,0,0,0));
      }
      /* å››å¼ åˆ†åˆ«é”™å¼€èµ·å§‹æ—¶é—´ */
      .intro-slide:nth-child(1){ animation-delay:  0s; }
      .intro-slide:nth-child(2){ animation-delay: calc(var(--intro-fade-dur) * 1); }
      .intro-slide:nth-child(3){ animation-delay: calc(var(--intro-fade-dur) * 2); }
      .intro-slide:nth-child(4){ animation-delay: calc(var(--intro-fade-dur) * 3); }

      @keyframes introFade{
        /* æ¯å¼ å›¾çš„å¯è§çª—å£å  1/4 æ—¶é•¿ï¼Œä¸­é—´ç”¨äº¤å‰æ·¡å…¥ */
        0%   { opacity: 1; }
        20%  { opacity: 1; }
        25%  { opacity: 0; }  /* æ·¡å‡º */
        100% { opacity: 0; }
      }

      /* ä¸­éƒ¨ç™½æ¡†ï¼šä¸ä½ å›¾ç‰‡ä¸­éƒ¨â€œå¤§ç™½æ¡†â€é‡åˆåŒºåŸŸå‘ˆç°æ–‡æ¡ˆ */
      .intro-copy-wrap{
        position: absolute; inset: 0;
        display: grid; place-items: center;
        z-index: 2; pointer-events: none; /* åªå±•ç¤ºä¸æŠ¢äº¤äº’ */
        padding: clamp(12px, 4vw, 32px);
      }
      .intro-copy{
        max-width: min(800px, 86vw);
        width: 100%;
        /* è¿™é‡Œç”¨çº¯ç™½åŠé€æ˜&é˜´å½±ï¼Œè¦†ç›–åœ¨ä½ å›¾ç‰‡â€œå¤§ç™½æ¡†â€å¤„
          å¦‚æœä½ çš„ç™½æ¡†å·²ç»åœ¨å›¾é‡Œï¼Œå¯æŠŠèƒŒæ™¯é€æ˜åº¦è°ƒå¤§/å°ä»¥å¯¹é½ */
        background: rgba(255,255,255,0.0);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 16px;
        box-shadow: 0 12px 40px rgba(16,24,40,0.18);
        padding: clamp(18px, 4vw, 36px);
        text-align: center;
        color: #1f2937;
      }
      .intro-title{
        font-size: clamp(22px, 4vw, 36px);
        font-weight: 800;
        letter-spacing: .2px;
        margin-bottom: .4em;
        color: rgba(255,255,255,0.6);
      }
      .intro-sub{
        font-size: clamp(14px, 2.2vw, 18px);
        line-height: 2;
        color: rgba(255,255,255,0.6);
        max-width: 60ch;
        margin: 0 auto;
        font-family: Cambria;
        font-weight: 600;
      }

      /* æ— éšœç¢ï¼šå‡å°‘åŠ¨ç”»åå¥½æ—¶ç¦ç”¨è‡ªåŠ¨åˆ‡æ¢ï¼Œå±•ç¤ºç¬¬ä¸€å¼  */
      @media (prefers-reduced-motion: reduce){
        .intro-slide{ animation: none !important; opacity: 0; }
        .intro-slide:nth-child(1){ opacity: 1; }
      }

      /* ç§»åŠ¨ç«¯é«˜åº¦ä¸ç•™ç™½ä¼˜åŒ– */
      @media (max-width: 768px){
        :root{ --intro-height: calc(100vh - var(--header-offset, 120px)); }
        .intro-copy{ border-radius: 12px; }
      }
    </style>

    <div class="intro-hero" id="introHero" aria-hidden="false">
      <!-- èƒŒæ™¯å››å›¾ï¼ˆJS ä¼šæŠŠä½ çš„å››å¼ å›¾ç‰‡å†™è¿›æ¥ï¼‰ -->
      <div class="intro-slide" style="--bg:url('');"></div>
      <div class="intro-slide" style="--bg:url('');"></div>
      <div class="intro-slide" style="--bg:url('');"></div>
      <div class="intro-slide" style="--bg:url('');"></div>

      <div class="intro-copy-wrap">
        <div class="intro-copy" role="group" aria-label="å¯¼è¨€">
          <div class="intro-title">å¹´åº¦åºè¨€</div>
          <p class="intro-sub">
            ã€ŒWelcome to The 2025 Memory of The Year<br>
            Wander through days and revisit the moments that made heart skip a beat<br>
            Gently tuck those important memories back into mind.<br>
            Click categories above to explore journey through the year.ã€
          </p>
        </div>
      </div>
    </div>
  </section>

    <!-- æ—¥å†è§†å›¾ -->
    <section id="calendarView" class="section active">
      <header>
        <h1>å¹´åº¦è®°å¿†</h1>
        <p class="subtitle">ã€Œæ–¹å¯¸ä¹‹é—´ï¼Œå‡æˆæ•…äº‹ã€</p>
      </header>

      <div class="calendar-container" id="calendarContainer">
        <!-- æœˆä»½æ—¥å†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
    </section>

    <!-- æ—…æ¸¸ç›¸å†Œè§†å›¾ -->
    <section id="travelView" class="section">
      <div class="travel-header">
        <h2 class="travel-title">å¹´åº¦ç¬é—´</h2>
        <p class="travel-subtitle">ã€Œçœ‰çœ¼åˆ¹é‚£ï¼ŒæƒŠé¸¿ä¸€ç¥ã€</p>
      </div>

      <!-- åœ†ç›˜çŠ¶å¯¼èˆª -->
      <div class="travel-disc-container">
        <div class="travel-disc-sky" aria-hidden="true">
          <span class="star star-1"></span>
          <span class="star star-2"></span>
          <span class="star star-3"></span>
          <span class="star star-4"></span>
          <span class="star star-5"></span>
          <span class="star star-6"></span>
          <span class="star star-7"></span>
          <span class="star star-8"></span>
          <span class="shooting-star shooting-star-1"></span>
          <span class="shooting-star shooting-star-2"></span>
          <span class="shooting-star shooting-star-3"></span>
          <span class="shooting-star shooting-star-4"></span>
        </div>
        <div class="travel-disc" id="travelDiscNav" aria-label="ç‚¹å‡»åœ†ç›˜åˆ‡æ¢å¹´åº¦ç¬é—´"></div>
        <div class="travel-disc-caption">ç”¨æ˜Ÿç›˜ï¼Œåˆ‡æ¢è¿™ä¸€å¹´çš„å®šæ ¼ç¬é—´</div>
      </div>

      <!-- Swiperæ—…æ¸¸ç›¸å†Œå®¹å™¨ -->
      <div class="swiper" id="travelSwiper">
        <div class="swiper-wrapper">
          <!-- æ—…æ¸¸ç›¸å†Œå¹»ç¯ç‰‡ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
      </div>

    </section>
    <!-- Responsive, accessible, selfâ€‘contained "å¹´åº¦é¢å¥–ç››å…¸" module
     Drop this <section> (and its <style>/<script>) into your page and remove the old awards block.
     No external dependencies. Works with reducedâ€‘motion, resizes, and very small screens. -->



    <!-- Tour è§†å›¾ï¼šç¥¨æ ¹æ”¶è— -->
    <section id="tourView" class="section">
      <style>
        #tourView {
          padding: clamp(24px, 5vw, 40px) clamp(8px, 4vw, 28px);
          display: flex;
          flex-direction: column;
          /* è®©è¿™ä¸€å±çœ‹èµ·æ¥å æ»¡ä¸€ç‚¹é«˜åº¦ï¼Œå¯æŒ‰éœ€è¦è°ƒ */
          min-height: min(100vh, 900px);
        }

        /* æ–°å¢ï¼šåŒ…ä½æ ‡é¢˜ + ç¥¨æ ¹çš„å¸ƒå±€å®¹å™¨ */
        #tourView .tour-layout {
          flex: 1;
          display: flex;
          flex-direction: column;
          /* æ ¸å¿ƒï¼šå‚ç›´å±…ä¸­ */
          justify-content: center;
          /* æ°´å¹³å±…ä¸­ç¥¨æ ¹ï¼ˆheader å®½åº¦ä¸å®šä¹Ÿæ²¡å…³ç³»ï¼‰ */
          align-items: center;
        }

        #tourView .tour-header {
          text-align: center;
          padding: 40px 20px 30px;
          max-width: 800px;
          margin: 0 auto;
        }
    
        #tourView .tour-title {
          font-size: 2.2rem;
          color: var(--primary-color);
          margin-bottom: 10px;
        }
    
        #tourView .tour-subtitle {
          color: #718096;
          font-size: 1.1rem;
        }
    
        #tourView .swiper {
          width: 100%;
          max-width: 900px;
          margin: 0 auto;
          height: auto;
          padding-bottom: 40px;
        }
    
        #tourView .swiper-slide {
          display: flex;
          justify-content: center;
          align-items: center;
          background: transparent;
        }
    
        #tourView .tour-ticket-eraser {
          position: relative;
          width: 100%;
          max-width: 800px;
          border-radius: 24px;
          overflow: hidden;
          filter: url(#â„ï¸);
          box-shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
          --max-a: 36;
        }
    
        #tourView .tour-ticket-surface {
          position: relative;
          padding: clamp(20px, 3vw, 28px);
          background: radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.95), rgba(204, 230, 255, 0.92));
          filter: url(#pack-upper);
          min-height: 220px;
          display: flex;
          flex-direction: column;
          gap: 18px;
        }
    
        #tourView .ticket {
          display: grid;
          grid-template-columns: minmax(0, 2.1fr) minmax(0, 1fr);
          gap: 18px;
          align-items: stretch;
          position: relative;
        }
    
        #tourView .ticket::before {
          content: "";
          position: absolute;
          top: 12px;
          bottom: 12px;
          left: calc(100% * 2.1 / 3.1);
          border-left: 1px dashed rgba(0, 106, 255, 0.7);
        }
    
        #tourView .ticket-main {
          display: flex;
          flex-direction: column;
          gap: 14px;
          padding-right: 18px;
          font-family: Cambria;
        }
    
        #tourView .ticket-tag {
          font-size: 0.75rem;
          letter-spacing: 0.22em;
          text-transform: uppercase;
          opacity: 0.75;
        }
    
        #tourView .ticket-route {
          font-size: clamp(1.6rem, 3vw, 2.1rem);
          font-weight: 600;
          display: flex;
          align-items: baseline;
          gap: 10px;
        }
    
        #tourView .ticket-route span.icon {
          font-size: 1.2rem;
          opacity: 0.8;
        }
    
        #tourView .ticket-meta {
          display: grid;
          grid-template-columns: repeat(3, minmax(0, 1fr));
          gap: 10px;
          font-size: 0.8rem;
        }
    
        #tourView .ticket-meta span.label {
          display: block;
          text-transform: uppercase;
          letter-spacing: 0.14em;
          opacity: 0.6;
          margin-bottom: 2px;
        }
    
        #tourView .ticket-meta span.value {
          font-weight: 600;
        }
    
        #tourView .ticket-note {
          font-size: 0.8rem;
          opacity: 0.7;
        }
    
        #tourView .ticket-stub {
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          align-items: flex-end;
          padding-left: 18px;
          text-align: right;
          font-size: 0.8rem;
        }
    
        #tourView .ticket-stub .stub-title {
          text-transform: uppercase;
          letter-spacing: 0.18em;
          opacity: 0.7;
          margin-bottom: 4px;
        }
    
        #tourView .ticket-stub .stub-value {
          font-size: 1.1rem;
          font-weight: 600;
        }
    
        #tourView .ticket-stub .stub-extra {
          margin-top: 8px;
          opacity: 0.7;
        }
    
        #tourView .ticket-plane .tour-ticket-surface {
          background: radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.96), rgba(191, 219, 254, 0.94));
        }
    
        #tourView .ticket-train .tour-ticket-surface {
          background: radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.96), rgba(221, 239, 187, 0.94));
        }
    
        #tourView .tour-ticket-footer {
          display: flex;
          justify-content: space-between;
          margin-top: 6px;
          font-size: 0.7rem;
          opacity: 0.65;
        }
    
        /* æ°´æ±½æ“¦é™¤è’™å±‚ */
        #tourView .tour-hover-area {
          position: absolute;
          --p: 1.2rem;
          inset: calc(var(--p) * -1);
          padding: var(--p);
          z-index: 5;
          display: grid;
          grid-template-columns: repeat(var(--max-a, 36), 1fr);
          background: #000;
          mix-blend-mode: plus-lighter;
          filter: blur(19px) brightness(5) contrast(80) invert(1) blur(5px) url("#gray-pack-2b") url("#pack-lower");
          cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100' height='120' viewport='0 0 100 100' style='fill:white;font-size:80px; opacity:.8;'><text y='50%'>â„</text></svg>") 45 35, auto;
        }
    
        #tourView .tour-hover-area i {
          background: #fff;
          opacity: 0;
          transition: opacity 16s;
          border-radius: 50%;
          transform: scale(2);
        }
    
        #tourView .tour-hover-area i:is(:hover, :active) {
          opacity: 1;
          transition-duration: 0s;
        }
    
        #tourView [defs] {
          position: absolute;
          pointer-events: none;
          opacity: 0;
        }
    
        @media (max-width: 768px) {
          #tourView .ticket {
            grid-template-columns: 1fr;
          }
    
          #tourView .ticket::before {
            display: none;
          }
    
          #tourView .ticket-stub {
            align-items: flex-start;
            text-align: left;
            border-top: 1px dashed rgba(0, 106, 255, 0.7);
            margin-top: 8px;
            padding-top: 10px;
          }
        }
    
        #tourView .tour-ticket-stack {
          width: 100%;
          max-width: 900px;
          display: flex;
          vertical-align: middle;
          flex-direction: column;
          /* æ ¹æ®ç¥¨æ ¹æ•°é‡è‡ªåŠ¨æ’‘å¼€é«˜åº¦ï¼Œå¹¶ç•™å‡ºåˆç†é—´è· */
          gap: clamp(16px, 2.5vw, 28px);
        }
      </style>
       
      <div class="tour-header">
        <h2 class="tour-title">çºªå¿µç¥¨æ ¹</h2>
        <p class="tour-subtitle">ã€Œé›¶è½æˆé›¨ï¼Œå†»ç»“æˆå†°ã€</p>
      </div>
      
      <div class="tour-layout">  
        <div class="tour-ticket-stack">
          <!-- Train ticket -->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-train">
              <div class="ticket-main">
                <div class="ticket-tag">TRAIN TICKET Â· 2025</div>
                <div class="ticket-route">
                  <span>å—å……</span>
                  <span class="icon">ğŸš†</span>
                  <span>é‡åº†è¥¿</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Train</span>
                    <span class="value">C798</span>
                  </div>
                  <div>
                    <span class="label">Coach / Seat</span>
                    <span class="value">02è½¦ Â· 14A</span>
                  </div>
                  <div>
                    <span class="label">Departure</span>
                    <span class="value">12:14 Â· 07/01</span>
                  </div>
                </div>
                <p class="ticket-note">å±±åŸé‡åº†ï¼Œæ–°æ¡¥ï¼Œä¸€æ®µçŸ­é€”ç›¸èš</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">From</div>
                  <div class="stub-value">å—å……</div>
                </div>
                <div>
                  <div class="stub-title">To</div>
                  <div class="stub-value">é‡åº†è¥¿</div>
                </div>
                <div class="stub-extra">Journey to Â· A New Visit</div>
                <div class="tour-ticket-footer">
                  <span>Scan to enter</span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Train ticket -->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-train">
              <div class="ticket-main">
                <div class="ticket-tag">TRAIN TICKET Â· 2025</div>
                <div class="ticket-route">
                  <span>é‡åº†åŒ—</span>
                  <span class="icon">ğŸš†</span>
                  <span>æƒ å·</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Train</span>
                    <span class="value">K1171</span>
                  </div>
                  <div>
                    <span class="label">Coach / Seat</span>
                    <span class="value">02è½¦ Â· 081</span>
                  </div>
                  <div>
                    <span class="label">Departure</span>
                    <span class="value">19:23 Â· 07/01</span>
                  </div>
                </div>
                <p class="ticket-note">å²­å—åéƒ¡ï¼Œæƒ å·æ–°åŸï¼Œæ•…äº‹ä»è”æè¯´èµ·</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">From</div>
                  <div class="stub-value">é‡åº†åŒ—</div>
                </div>
                <div>
                  <div class="stub-title">To</div>
                  <div class="stub-value">æƒ å·</div>
                </div>
                <div class="stub-extra">Journey to Â· An Encounter and Memory</div>
                <div class="tour-ticket-footer">
                  <span>Scan to enter</span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Boarding pass 0-->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-plane">
              <div class="ticket-main">
                <div class="ticket-tag">BOARDING PASS Â· 2025</div>
                <div class="ticket-route">
                  <span>TSN</span>
                  <span class="icon">âœˆ</span>
                  <span>SZX</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Passenger</span>
                    <span class="value">Floral-Sunsunrise</span>
                  </div>
                  <div>
                    <span class="label">Flight</span>
                    <span class="value">MF8365</span>
                  </div>
                  <div>
                    <span class="label">Date</span>
                    <span class="value">2025 Â· 08 Â· 02</span>
                  </div>
                </div>
                <p class="ticket-note">æ—¶é—´åœ¨ç››å¤æŠ˜å ï¼Œç¢°åœ¨ä¸€èµ·ä¾¿è¸©ä¸­äº†å¹¸è¿ï¼Œè¿™å°±è¶³ä»¥è®©æ—¥å­é€šçº¢æˆå¤å¤©çš„è®°å¿†</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">Gate</div>
                  <div class="stub-value">226</div>
                </div>
                <div>
                  <div class="stub-title">Seat</div>
                  <div class="stub-value">59A</div>
                  <div class="stub-extra">BOEING737-85C Â· Boarding 17:21</div>
                </div>
                <div class="tour-ticket-footer">
                  <span>MOTY </span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Boarding pass 1-->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-plane">
              <div class="ticket-main">
                <div class="ticket-tag">BOARDING PASS Â· 2025</div>
                <div class="ticket-route">
                  <span>PEK</span>
                  <span class="icon">âœˆ</span>
                  <span>SZX</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Passenger</span>
                    <span class="value">Floral-Sunsunrise</span>
                  </div>
                  <div>
                    <span class="label">Flight</span>
                    <span class="value">CA1375</span>
                  </div>
                  <div>
                    <span class="label">Date</span>
                    <span class="value">2025 Â· 09 Â· 13</span>
                  </div>
                </div>
                <p class="ticket-note">èˆ·çª—å¤–çš„å…‰å½±æ›¿ä½ æ”¶è—äº†é‚£äº›è¿˜æ²¡è¯´å®Œçš„æ„¿æœ›ï¼Œç­‰ç€åœ¨ä¸‹ä¸€ç«™æ”¾å£°</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">Gate</div>
                  <div class="stub-value">C60</div>
                </div>
                <div>
                  <div class="stub-title">Seat</div>
                  <div class="stub-value">37E</div>
                  <div class="stub-extra">BOEING777-39L Â· Boarding 08:00</div>
                </div>
                <div class="tour-ticket-footer">
                  <span>MOTY </span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Boarding pass 2-->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-plane">
              <div class="ticket-main">
                <div class="ticket-tag">BOARDING PASS Â· 2025</div>
                <div class="ticket-route">
                  <span>PEK</span>
                  <span class="icon">âœˆ</span>
                  <span>SZX</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Passenger</span>
                    <span class="value">Floral-Sunsunrise</span>
                  </div>
                  <div>
                    <span class="label">Flight</span>
                    <span class="value">CA1375</span>
                  </div>
                  <div>
                    <span class="label">Date</span>
                    <span class="value">2025 Â· 10 Â· 25</span>
                  </div>
                </div>
                <p class="ticket-note">å¶è½åƒä¿¡ï¼Œæ¯ä¸€é¡µéƒ½å†™ç€ä½ çš„åå­—ï¼Œæ‰˜ç§‹é£å°†å®ƒé€åˆ°ä¸‹ä¸€ç«™</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">Gate</div>
                  <div class="stub-value">C60</div>
                </div>
                <div>
                  <div class="stub-title">Seat</div>
                  <div class="stub-value">43H</div>
                  <div class="stub-extra">AIRBUS350-941 Â· Boarding 07:50</div>
                </div>
                <div class="tour-ticket-footer">
                  <span>MOTY </span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Boarding pass 3-->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-plane">
              <div class="ticket-main">
                <div class="ticket-tag">BOARDING PASS Â· 2025</div>
                <div class="ticket-route">
                  <span>SZX</span>
                  <span class="icon">âœˆ</span>
                  <span>PEK</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Passenger</span>
                    <span class="value">Floral-Sunsunrise</span>
                  </div>
                  <div>
                    <span class="label">Flight</span>
                    <span class="value">CA1334</span>
                  </div>
                  <div>
                    <span class="label">Date</span>
                    <span class="value">2025 Â· 11 Â· 17</span>
                  </div>
                </div>
                <p class="ticket-note">ä»å†¬æœ«çš„äº‘å±‚ä¸­å‡èµ·ï¼Œä¿¯ç°åŸå¸‚ä¸æµ·ã€‚é‚£ä¸€åˆ»ï¼Œæ–°çš„æ•…äº‹å·²ç»åœ¨ç©ºä¸­å†™å¥½</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">Gate</div>
                  <div class="stub-value">503</div>
                </div>
                <div>
                  <div class="stub-title">Seat</div>
                  <div class="stub-value">38H</div>
                  <div class="stub-extra">BOEING777-39L Â· Boarding 07:45</div>
                </div>
                <div class="tour-ticket-footer">
                  <span>MOTY </span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>
      
          <!-- Train ticket -->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-train">
              <div class="ticket-main">
                <div class="ticket-tag">TRAIN TICKET Â· 2025</div>
                <div class="ticket-route">
                  <span>åŒ—äº¬å—</span>
                  <span class="icon">ğŸš†</span>
                  <span>å¤©æ´¥</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Train</span>
                    <span class="value">C2569</span>
                  </div>
                  <div>
                    <span class="label">Coach / Seat</span>
                    <span class="value">06è½¦ Â· 18B</span>
                  </div>
                  <div>
                    <span class="label">Departure</span>
                    <span class="value">10:27 Â· 11/22</span>
                  </div>
                </div>
                <p class="ticket-note">å¤©æ´¥ä¹‹å¿ƒï¼Œäº‘ç«¯ä¹‹ä¸Šï¼Œæ›¼æ¸¸ä¸­å›½ä¹‹æ—…</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">From</div>
                  <div class="stub-value">åŒ—äº¬å—</div>
                </div>
                <div>
                  <div class="stub-title">To</div>
                  <div class="stub-value">å¤©æ´¥</div>
                </div>
                <div class="stub-extra">Journey to Â· Manchester City Parade</div>
                <div class="tour-ticket-footer">
                  <span>Scan to enter</span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          <!-- Boarding pass 4-->
          <div class="tour-ticket-eraser" style="--max-a: 34;">
            <div class="tour-ticket-surface ticket ticket-plane">
              <div class="ticket-main">
                <div class="ticket-tag">BOARDING PASS Â· 2025</div>
                <div class="ticket-route">
                  <span>SZX</span>
                  <span class="icon">âœˆ</span>
                  <span>PEK</span>
                </div>
                <div class="ticket-meta">
                  <div>
                    <span class="label">Passenger</span>
                    <span class="value">Floral-Sunsunrise</span>
                  </div>
                  <div>
                    <span class="label">Flight</span>
                    <span class="value">CA1334</span>
                  </div>
                  <div>
                    <span class="label">Date</span>
                    <span class="value">2025 Â· 12 Â· 01</span>
                  </div>
                </div>
                <p class="ticket-note">å®šæ ¼ä½è§å¹•å‰çš„ç¬‘å£°ï¼Œæ·±åœ³æ¹¾çš„æµ·é£ä¸æµªæ¶›ï¼Œè¿˜æœ‰åŸå¸‚å…‰å½±ä¸‹çš„æˆ‘ä»¬</p>
              </div>
              <div class="ticket-stub">
                <div>
                  <div class="stub-title">Gate</div>
                  <div class="stub-value">503</div>
                </div>
                <div>
                  <div class="stub-title">Seat</div>
                  <div class="stub-value">38H</div>
                  <div class="stub-extra">BOEING777-300ER Â· Boarding 07:45</div>
                </div>
                <div class="tour-ticket-footer">
                  <span>MOTY </span>
                  <span>2025 Â· MEMORY OF THE YEAR</span>
                </div>
              </div>
            </div>
            <aside class="tour-hover-area"></aside>
          </div>

          
        </div>
      </div> 
      <svg defs height="0" width="0" viewBox="0 0 1 1" color-interpolation-filters="sRGB">
        <filter id="â„ï¸" primitiveUnits="userSpaceOnUse" x="0%" y="0%" width="120%" height="120%">
          <feComponentTransfer result="SourceBackground" in="SourceGraphic">
            <feFuncR type="discrete"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncR>
            <feFuncG type="discrete"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncG>
            <feFuncB type="discrete"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncB>
          </feComponentTransfer>
          <feBlend result="blend-0" in="SourceBackground" in2="none"></feBlend>
          <feGaussianBlur result="gaussian-blur-6" in="blend-0" stdDeviation="10"></feGaussianBlur>
          <feTurbulence result="turbulence-0" baseFrequency="0.420" type="fractalNoise" />
          <feDisplacementMap result="displacement-map-0" in="gaussian-blur-6" in2="turbulence-0" scale="150"
            xChannelSelector="R" yChannelSelector="G"></feDisplacementMap>
          <feComponentTransfer result="SourceMask" in="SourceGraphic">
            <feFuncR type="discrete"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncR>
            <feFuncG type="discrete"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncG>
            <feFuncB type="discrete"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncB>
          </feComponentTransfer>
          <feBlend result="SourceMask"></feBlend>
          <feColorMatrix result="color-matrix-0" in="SourceMask"
            values="0.761905 0.190476 0.047619 0 0 0.761905 0.190476 0.047619 0 0 0.761905 0.190476 0.047619 0 0 0 0 0 1 0">
          </feColorMatrix>
          <feColorMatrix result="color-matrix-1" in="color-matrix-0" type="luminanceToAlpha"></feColorMatrix>
          <feGaussianBlur result="gaussian-blur-0" in="color-matrix-1" stdDeviation="0"></feGaussianBlur>
          <feComposite result="composite-1" in="displacement-map-0" in2="gaussian-blur-0" operator="in"></feComposite>
          <feMerge result="merge-0">
            <feMergeNode in="blend-0"></feMergeNode>
            <feMergeNode in="composite-1"></feMergeNode>
          </feMerge>
        </filter>
        <filter id="gray-unpack-2b">
          <feColorMatrix id="unpackMatrix" in="SourceGraphic" result="unpackedGray" type="matrix"
            values="0.761905 0.190476 0.047619 0 0 0.761905 0.190476 0.047619 0 0 0.761905 0.190476 0.047619 0 0 0 0 0 1 0" />
        </filter>
        <filter id="gray-pack-2b">
          <feComponentTransfer id="feComponentTransfer-1" result="packed" in="SourceGraphic">
            <feFuncR id="feFuncR-1" type="discrete" tableValues="0 0.3333 0.6667 1"></feFuncR>
            <feFuncG id="feFuncG-1" type="discrete"
              tableValues="0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1" />
            <feFuncB id="feFuncB-1" type="discrete"
              tableValues="0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1 0 0.3333 0.6667 1">
            </feFuncB>
            <feFuncA type="identity"></feFuncA>
          </feComponentTransfer>
        </filter>
        <filter id="unpack-lower">
          <feComponentTransfer in="SourceGraphic" result="component-transfer-0">
            <feFuncR type="discrete" id="unpack-lower-r"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncR>
            <feFuncG type="discrete" id="unpack-lower-g"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncG>
            <feFuncB type="discrete" id="unpack-lower-b"
              tableValues="0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000 0.000 0.333 0.667 1.000">
            </feFuncB>
          </feComponentTransfer>
        </filter>
        <filter id="pack-upper">
          <feColorMatrix type="matrix" id="pack-upper-quantize" result="quantized"
            values="0.24705882352941178 0 0 0 0 0 0.24705882352941178 0 0 0 0 0 0.24705882352941178 0 0 0 0 0 1 0"
            in="SourceGraphic"></feColorMatrix>
          <feComposite in="quantized" operator="over" result="composited" in2="quantized"></feComposite>
          <feColorMatrix in="composited" type="matrix" id="pack-upper-shift"
            values="4 0 0 0 0 0 4 0 0 0 0 0 4 0 0 0 0 0 1 0" result="color-matrix-0"></feColorMatrix>
        </filter>
        <filter id="pack-lower">
          <feColorMatrix type="matrix" id="pack-lower-matrix"
            values="0.011764705882352941 0 0 0 0 0 0.011764705882352941 0 0 0 0 0 0.011764705882352941 0 0 0 0 0 1 0">
          </feColorMatrix>
        </filter>
        <filter id="unpack-upper">
          <feComponentTransfer in="SourceGraphic" result="component-transfer-0">
            <feFuncR type="discrete" id="unpack-upper-r"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncR>
            <feFuncG type="discrete" id="unpack-upper-g"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncG>
            <feFuncB type="discrete" id="unpack-upper-b"
              tableValues="0.000 0.016 0.032 0.048 0.063 0.079 0.095 0.111 0.127 0.143 0.159 0.175 0.190 0.206 0.222 0.238 0.254 0.270 0.286 0.302 0.317 0.333 0.349 0.365 0.381 0.397 0.413 0.429 0.444 0.460 0.476 0.492 0.508 0.524 0.540 0.556 0.571 0.587 0.603 0.619 0.635 0.651 0.667 0.683 0.698 0.714 0.730 0.746 0.762 0.778 0.794 0.810 0.825 0.841 0.857 0.873 0.889 0.905 0.921 0.937 0.952 0.968 0.984 1.000">
            </feFuncB>
          </feComponentTransfer>
        </filter>
      </svg>
    </section>
    <!-- æ—¶é—´èƒ¶å›Šï¼šé€šä¿¡æ•°æ®å¯è§†åŒ– -->
    <section id="capsuleView" class="section" aria-label="æ—¶é—´èƒ¶å›Š">
      <style>
        #capsuleView {
          padding: clamp(24px, 5vw, 40px) clamp(8px, 4vw, 28px);
        }
        #capsuleView .capsule-header {
          text-align: center;
          margin-bottom: 24px;
        }
        #capsuleView .capsule-title {
          font-size: 2.2rem;
          color: var(--primary-color);
          margin-bottom: 8px;
        }
        #capsuleView .capsule-subtitle {
          color: #718096;
          font-size: 1.05rem;
        }
        #capsuleView .chart-row {
          display: flex;
          flex-wrap: wrap;
          gap: 16px;
          margin-bottom: 16px;
        }
        #capsuleView .chart {
          flex: 1 1 480px;
          height: 360px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 8px 20px rgba(0,0,0,0.04);
          padding: 8px;
        }
        #capsuleView .monthly-row {
          display: flex;
          flex-wrap: nowrap;
          gap: 16px;
          margin: 8px 0 8px;
          justify-content: space-between;
        }
        #capsuleView .small-chart {
          flex: 1 1 0;
          max-width: 280px;
          height: 240px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 8px 20px rgba(0,0,0,0.04);
          padding: 4px;
        }
        @media (max-width: 768px) {
          #capsuleView .chart {
            flex: 1 1 100%;
            height: 320px;
          }
          #capsuleView .monthly-row {
            flex-wrap: wrap;
          }
          #capsuleView .small-chart {
            max-width: 100%;
          }
        }
      </style>

      <header class="capsule-header">
        <h2 class="capsule-title">æ—¶é—´èƒ¶å›Š</h2>
        <p class="capsule-subtitle">ã€Œæ—¶é—´èƒ¶å›Šï¼Œå®«ç¯é•¿æ˜ã€</p>
      </header>

      <div class="chart-row">
        <div id="pieChart" class="chart" aria-label="é€šä¿¡æ–¹å¼å æ¯”å›¾"></div>
        <div id="barLineChart" class="chart" aria-label="æ¯æ—¥é€šè¯æ—¶é•¿å›¾"></div>
      </div>

      <div id="monthlyRow1" class="monthly-row" aria-label="7-9 æœˆé€šè¯åˆ†å¸ƒå›¾"></div>
      <div id="monthlyRow2" class="monthly-row" aria-label="10-12 æœˆé€šè¯åˆ†å¸ƒå›¾"></div>

      <div class="chart-row">
        <div id="stackedChart" class="chart" aria-label="æ¯æ—¥é€šè¯æ–¹å¼å †å å›¾"></div>
        <div id="cumulativeChart" class="chart" aria-label="ç´¯è®¡é€šè¯æ—¶é•¿å›¾"></div>
      </div>
    </section>

    
    <!-- åœ°å›¾è§†å›¾ -->
    <section id="mapView" class="section" aria-label="åœ°å›¾">
      <header class="map-header">
        <h2 class="map-title">å¹´åº¦åœ°å›¾</h2>
        <p class="map-subtitle">ã€Œç‚¹æ»´çºµæ¨ªï¼Œäº¤æ±‡æˆçº¿ã€</p>
      </header>
      <div class="map-toolbar">
        <div class="map-search">
          <!-- <input id="mapSearchInput" type="search" placeholder="æœç´¢åœ°ç‚¹æˆ–è¾“å…¥å…³é”®å­—ï¼ˆæ”¯æŒè…¾è®¯ä½ç½®æœåŠ¡è‡ªåŠ¨å®Œæˆï¼‰" aria-label="æœç´¢åœ°ç‚¹"> -->
          <!-- <button id="mapLocateBtn" class="map-btn" title="å®šä½åˆ°æˆ‘">ğŸ“</button> -->
          <button id="mapResetBtn" class="map-btn" title="é‡ç½®è§†å›¾">âŸ³</button>
        </div>
        <div class="map-key">
          <label for="amapKey">è…¾è®¯åœ°å›¾Key</label>
          <input id="tmapKey" type="password" inputmode="text" placeholder="ç²˜è´´ä½ çš„è…¾è®¯ä½ç½®æœåŠ¡ Web JS API Key">
          <button id="saveKeyBtn" class="map-btn">ä¿å­˜Key</button>
        </div>
      </div>
      <div id="tmapContainer" class="tmap-container" role="application" aria-label="è…¾è®¯åœ°å›¾"></div>
      <div class="map-legend">
        <span class="legend-dot legend-travel"></span> Tier One
        <span class="legend-dot legend-event"></span> Others
      </div>
    </section>

    <section id="awards" class="awards" aria-label="å¹´åº¦é¢å¥–ç››å…¸">
      <style>
        :root {
          --aw-bg-1: #1a1a2e;
          --aw-bg-2: #16213e;
          --aw-fg: #ffffff;
          --aw-muted: #b8c2d8;
          --aw-accent-1: #ff9a00;
          --aw-accent-2: #ff0a78;
          --aw-card-bg: rgba(255, 255, 255, 0.08);
          --aw-card-border: rgba(255, 255, 255, 0.12);
          --aw-radius: 14px;
          --aw-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
          --aw-speed: 90;
          --aw-gap: clamp(10px, 2vw, 16px);
          --aw-card-min: 260px;
          --aw-card-max: 360px;
          --aw-z-fly: 50;
          --aw-z-modal: 4000;
        }

        .awards {
          position: relative;
          overflow: hidden;
          color: var(--aw-fg);
          background: linear-gradient(135deg, var(--aw-bg-1), var(--aw-bg-2));
          padding: clamp(28px, 5vw, 48px) clamp(16px, 4vw, 28px);
          container-type: inline-size;
          container-name: awards;
          isolation: isolate;
        }

        .aw-header {
          text-align: center;
          margin-bottom: clamp(16px, 3vw, 28px);
        }

        .aw-title {
          font-size: clamp(22px, 4cqi, 40px);
          line-height: 1.15;
          margin: 0 0 8px;
          background: linear-gradient(45deg, var(--aw-accent-1), var(--aw-accent-2));
          -webkit-background-clip: text;
          background-clip: text;
          color: transparent;
          font-weight: 800;
          letter-spacing: .5px;
        }

        .aw-subtitle {
          color: var(--aw-muted);
          font-size: clamp(13px, 2.2cqi, 16px);
        }

        .aw-viewport {
          position: relative;
          overflow: hidden;
          margin-top: clamp(12px, 2.5vw, 20px);
        }

        .aw-track {
          position: relative;
          display: inline-flex;
          align-items: stretch;
          gap: var(--aw-gap);
          will-change: transform;
          padding-block: var(--aw-gap);
        }

        @keyframes aw-left {
          from {
            transform: translateX(0);
          }

          to {
            transform: translateX(-50%);
          }
        }

        @keyframes aw-right {
          from {
            transform: translateX(-50%);
          }

          to {
            transform: translateX(0);
          }
        }

        .aw-row {
          display: block;
          white-space: nowrap;
          width: max-content;
          animation-timing-function: linear;
          animation-iteration-count: infinite;
          animation-play-state: running;
        }

        .aw-row[data-dir="left"] {
          animation-name: aw-left;
        }

        .aw-row[data-dir="right"] {
          animation-name: aw-right;
        }

        .aw-segment {
          display: inline-flex;
          gap: var(--aw-gap);
        }

        .aw-card {
          background: var(--aw-card-bg);
          border: 1px solid var(--aw-card-border);
          border-radius: var(--aw-radius);
          box-shadow: var(--aw-shadow);
          min-width: var(--aw-card-min);
          max-width: var(--aw-card-max);
          width: clamp(var(--aw-card-min), 28cqi, var(--aw-card-max));
          padding: clamp(12px, 2.2cqi, 20px);
          overflow: hidden;
          transition: transform .25s ease, background .25s ease, box-shadow .25s ease;
          position: relative;
        }

        .aw-card:hover {
          transform: translateY(-6px);
          background: rgba(34, 114, 234, 0.9);
        }

        .aw-icon {
          font-size: clamp(20px, 3cqi, 32px);
          margin-bottom: 8px;
          display: inline-block;
        }

        .aw-t {
          font-size: clamp(14px, 2.4cqi, 18px);
          font-weight: 700;
          color: #ffb79a;
          margin-bottom: 6px;
        }

        .aw-w {
          font-size: clamp(13px, 2.2cqi, 16px);
          font-weight: 600;
          margin-bottom: 6px;
        }

        .aw-d {
          font-size: clamp(12px, 2cqi, 14px);
          color: #e2e8f0;
          line-height: 1.5;
        }

        .aw-ctrls {
          display: flex;
          justify-content: center;
          gap: 12px;
          margin-top: clamp(12px, 2.5vw, 18px);
        }

        .aw-btn {
          appearance: none;
          border: 1px solid var(--aw-card-border);
          background: var(--aw-card-bg);
          color: var(--aw-fg);
          width: 44px;
          height: 44px;
          border-radius: 50%;
          cursor: pointer;
          display: grid;
          place-items: center;
          transition: transform .2s ease, background .2s ease;
        }

        .aw-btn:hover {
          transform: scale(1.06);
          background: rgba(255, 255, 255, 0.14);
        }

        .awards:focus-within .aw-btn {
          outline: 2px solid #fff3;
          outline-offset: 2px;
        }

        @media (prefers-reduced-motion: reduce) {
          .aw-row {
            animation: none !important;
          }

          .aw-viewport {
            overflow: visible;
          }

          .aw-track {
            flex-wrap: wrap;
          }
        }

        @container awards (max-width: 460px) {
          .aw-card {
            min-width: 85cqi;
            width: 85cqi;
          }

          .aw-ctrls {
            gap: 8px;
          }
        }

        /* ===== Hover Fly Card ===== */
        .aw-fly {
          position: fixed;
          inset: auto auto 0 0;
          transform: translate3d(-9999px, -9999px, 0);
          min-width: 280px;
          max-width: min(420px, 90vw);
          padding: 12px;
          background: rgba(20, 24, 40, .9);
          border: 1px solid rgba(255, 255, 255, .12);
          border-radius: 12px;
          box-shadow: 0 12px 40px rgba(0, 0, 0, .45);
          z-index: var(--aw-z-fly);
          pointer-events: none;
          backdrop-filter: blur(6px);
        }

        .aw-fly.is-visible {
          transform: translate3d(var(--x, 0), var(--y, 0), 0);
        }

        .aw-fly h4 {
          margin: 0 0 6px;
          font-size: 16px;
        }

        .aw-fly p {
          margin: 0 0 8px;
          font-size: 13px;
          color: #dbeafe;
        }

        .aw-fly .aw-fly-media {
          display: flex;
          gap: 8px;
          overflow: hidden;
        }

        .aw-fly .aw-fly-media img {
          width: 90px;
          height: 60px;
          object-fit: cover;
          border: 1px solid rgba(255, 255, 255, .15);
        }

        .aw-fly .aw-fly-actions {
          text-align: right;
          margin-top: 8px;
        }

        .aw-fly .aw-link {
          pointer-events: auto;
          background: #ffffff10;
          border: 1px solid #ffffff22;
          border-radius: 10px;
          padding: 6px 10px;
          font-size: 12px;
          color: #fff;
          text-decoration: none;
        }

        /* ===== Modal (Rich Detail) ===== */
        .aw-modal {
          position: fixed;
          inset: 0;
          display: none;
          z-index: var(--aw-z-modal);
        }

        .aw-modal[aria-hidden="false"] {
          display: block;
        }

        .aw-backdrop {
          position: absolute;
          inset: 0;
          background: rgba(0, 0, 0, .6);
        }

        .aw-dialog {
          position: fixed;
          left: 50%;
          top: calc(100vh * 0.2);
          transform: translateX(-50%);
          margin: 0;
          max-width: min(960px, 92vw);
          max-height: 90vh;
          z-index: var(--aw-z-modal);
          background: #0f172a;
          color: #fff;
          border: 1px solid #334155;
          border-radius: 16px;
          box-shadow: 0 20px 80px rgba(0, 0, 0, .6);
          overflow: hidden;
          display: flex;
          flex-direction: column;
        }

        .aw-dialog header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 14px 16px;
          border-bottom: 1px solid #1f2937;
        }

        .aw-dialog .aw-title-lg {
          font-size: 18px;
          margin: 0;
        }

        .aw-dialog .aw-close {
          background: none;
          border: 0;
          color: #fff;
          font-size: 22px;
          width: 40px;
          height: 40px;
          cursor: pointer;
        }

        .aw-dialog .aw-body {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0;
          overflow: hidden;
          max-height: var(--aw-body-max, 60vh);
        }

        .aw-media {
          position: relative;
          background: #0b1220;
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: min(360px, calc(var(--aw-body-max, 60vh) * .6));
        }

        .aw-media .aw-slide {
          display: none;
          width: 100%;
          height: 100%;
        }

        .aw-media .aw-slide.is-active {
          display: block;
        }

        .aw-media img,
        .aw-media video {
          width: 100%;
          height: 100%;
          object-fit: contain;
          background: #0b1220;
        }

        .aw-thumbs {
          display: flex;
          gap: 8px;
          padding: 10px;
          overflow: hidden;
          border-top: 1px solid #1f2937;
        }

        .aw-thumbs button {
          width: 64px;
          height: 46px;
          border-radius: 8px;
          border: 1px solid #334155;
          background: #0b1220;
          cursor: pointer;
          overflow: hidden;
        }

        .aw-thumbs img,
        .aw-thumbs video {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .aw-text {
          padding: 14px 16px;
          font-size: 14px;
          line-height: 1.7;
          border-left: 1px solid #1f2937;
        }

        .aw-nav {
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: space-between;
          pointer-events: none;
        }

        .aw-nav button {
          pointer-events: auto;
          width: 44px;
          height: 44px;
          margin: 0 8px;
          border-radius: 999px;
          background: #ffffff20;
          border: 1px solid #ffffff35;
          color: #fff;
          font-size: 20px;
          cursor: pointer;
        }

        @media (max-width: 860px) {
          .aw-dialog .aw-body {
            grid-template-columns: 1fr;
          }

          .aw-text {
            border-left: none;
            border-top: 1px solid #1f2937;
          }
        }


        /* === Travel Album: .travel-photo as full-slide background (2025-09-29) === */
        .swiper {
          width: 100%;
          height: calc(100vh - 180px);
        }

        .swiper-slide {
          position: relative;
          padding: 0;
          overflow: hidden;
          border-radius: 0px;
          display: flex;
          align-items: flex-end;
          justify-content: center;
        }

        .travel-photo {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 0;
          margin: 0;
          box-shadow: none;
          z-index: 0;
          pointer-events: none;
        }

        .swiper-slide::after {
          content: "";
          position: absolute;
          inset: 0;
          background: linear-gradient(to top,
              rgba(0, 0, 0, 0.6) 0%,
              rgba(0, 0, 0, 0.4) 45%,
              rgba(0, 0, 0, 0.20) 70%,
              rgba(0, 0, 0, 0.00) 100%);
          z-index: 1;
        }

        .swiper-slide-content {
          position: relative;
          z-index: 2;
          width: 100%;
          max-width: 1000px;
          padding: clamp(16px, 6vw, 48px);
          text-align: left;
          color: #fff;
        }

        .travel-date {
          font-size: clamp(1.3rem, 2.6vw, 2rem);
          font-weight: 800;
          color: #fff;
          margin-bottom: 6px;
        }

        .travel-location {
          font-size: clamp(1rem, 2.2vw, 1.3rem);
          color: #f1f5f9;
          margin-bottom: 12px;
        }

        .travel-description {
          font-size: clamp(0.95rem, 2vw, 1.1rem);
          line-height: 1.8;
          color: #e2e8f0;
          max-width: 70ch;
        }

        .swiper-slide-active .travel-photo {
          transform: scale(1.02);
          transition: transform .6s ease;
        }

        @media (max-width: 768px) {
          .swiper {
            height: calc(100vh - 160px);
          }

          .swiper-slide-content {
            padding: 20px;
          }
        }

        @media (max-width: 480px) {
          .swiper {
            height: calc(100vh - 150px);
          }

          .swiper-slide-content {
            padding: 16px;
          }
        }

        /* === End Travel Album override === */


        /* ===== Mobile adaptations ===== */
        @media (max-width: 768px) {
          .aw-dialog {
            top: 6vh;
            width: 100vw;
            border-radius: 12px;
          }

          .aw-dialog .aw-body {
            grid-template-columns: 1fr;
            max-height: var(--aw-body-max, 72vh);
          }

          .aw-media {
            min-height: 42vh;
          }

          .aw-thumbs {
            overflow-x: auto;
            overflow-y: hidden;
            gap: 6px;
            -webkit-overflow-scrolling: touch;
          }

          .aw-thumbs button {
            flex: 0 0 72px;
          }

          .aw-nav button {
            width: 40px;
            height: 40px;
            font-size: 18px;
          }
        }

        /* Hide hover fly-card on touch/mobile */
        @media (hover:none) {
          .aw-fly {
            display: none !important;
          }
        }

        @media (pointer:coarse) {
          .aw-fly {
            display: none !important;
          }
        }

        /* Travel album tweaks on mobile */
        @media (max-width: 768px) {
          .swiper {
            height: calc(100vh - 140px);
          }

          .swiper-pagination-bullet {
            width: 10px;
            height: 10px;
          }

          .travel-description {
            max-width: 100%;
          }
        }
      </style>

      <header class="aw-header">
        <h2 class="aw-title">å¹´åº¦å…¸ç¤¼</h2>
        <p class="aw-subtitle">å›é¡¾ä¸€å¹´çš„ç²¾å½©æ—¶åˆ»ï¼Œè‡´æ•¬æ¯ä¸€ä¸ªè®©ä½ é—ªå…‰çš„ç¬é—´</p>
      </header>

      <div class="aw-viewport" role="list" aria-label="å¥–é¡¹æ»šåŠ¨åˆ—è¡¨">
        <div class="aw-track">
          <div class="aw-row" data-dir="left" aria-hidden="false">
            <div class="aw-segment" id="aw-seg-1"></div>
            <div class="aw-segment" id="aw-seg-1b" aria-hidden="true"></div>
          </div>
        </div>
        <div class="aw-track">
          <div class="aw-row" data-dir="right" aria-hidden="false">
            <div class="aw-segment" id="aw-seg-2"></div>
            <div class="aw-segment" id="aw-seg-2b" aria-hidden="true"></div>
          </div>
        </div>
      </div>

      <div class="aw-ctrls">
        <button class="aw-btn" id="aw-toggle" aria-pressed="false" aria-label="æ’­æ”¾/æš‚åœ">â¯ï¸</button>
        <button class="aw-btn" id="aw-speed-down" aria-label="é™ä½é€Ÿåº¦">â–</button>
        <button class="aw-btn" id="aw-speed-up" aria-label="æé«˜é€Ÿåº¦">â•</button>
      </div>

      <!-- Hover fly-card (single reused instance) -->
      <div class="aw-fly" id="aw-fly" role="dialog" aria-live="polite" aria-hidden="true"></div>

      <!-- Modal for rich details -->
      <div class="aw-modal" id="aw-modal" aria-hidden="true" aria-labelledby="aw-modal-title" role="dialog"
        aria-modal="true">
        <div class="aw-backdrop" data-close></div>
        <div class="aw-dialog" role="document">
          <header>
            <h3 class="aw-title-lg" id="aw-modal-title">è¯¦ç»†ä¿¡æ¯</h3>
            <button class="aw-close" data-close aria-label="å…³é—­">âœ•</button>
          </header>
          <div class="aw-body">
            <div class="aw-media">
              <div class="aw-nav">
                <button class="aw-prev" aria-label="ä¸Šä¸€å¼ ">â€¹</button>
                <button class="aw-next" aria-label="ä¸‹ä¸€å¼ ">â€º</button>
              </div>
              <!-- slides inserted here -->
            </div>
            <div class="aw-text" id="aw-modal-text"></div>
          </div>
          <div class="aw-thumbs" id="aw-thumbs"></div>
        </div>
      </div>

      <script>
        (function () {
          const IS_TOUCH = window.matchMedia('(hover: none), (pointer: coarse)').matches;

          /* ===== Data with rich details ===== */
          const data = [
            {
              icon: "ğŸµ", title: "å¹´åº¦æ­Œæ›²", winner: "ã€ŠI Really Like Youã€‹- Carly Rae Jepsen", desc: "I really really really really really really like you",
              detail: {
                text: "å±±æœ‰æœ¨å…®æœ¨æœ‰æï¼Œå¿ƒæ‚¦å›å…®å›å·²çŸ¥",
                photos: ["./pic/award1.avif"]
              }
            },
            {
              icon: "ğŸ“º", title: "å¹´åº¦ç”µè§†å‰§", winner: "ã€Šå”æœè¯¡äº‹å½•ä¹‹é•¿å®‰ã€‹", desc: "è¯¡æ¡ˆäº‘è°²ï¼Œå‹˜æ­£äººå¿ƒï¼Œè§è¯ç››å”",
              detail: {
                text: "æ˜¯ä¸€éƒ¨æ‚¬ç–‘æ¢æ¡ˆå‰§ï¼Œäº¦æ˜¯ä¸€éƒ¨å…·æœ‰å†å²åšé‡æ„Ÿâ€Œçš„ä½œå“",
                photos: ["./pic/award2.avif"]
              }
            },
            {
              icon: "ğŸ¬", title: "å¹´åº¦ç”µå½±", winner: "ã€Šç–¯ç‹‚åŠ¨ç‰©åŸ2ã€‹", desc: "æ•…äº‹å› ä½ è€Œç²¾å½©",
              detail: {
                text: "ã€Šç–¯ç‹‚åŠ¨ç‰©åŸ2ã€‹å¼€å¯äº†æ–°çš„å……æ»¡æœªçŸ¥ä¸æƒŠå–œçš„å†’é™©ä¹‹æ—…ï¼ŒåŒäºˆä½ æˆ‘ã€‚â€œå¹¸ç¦å°±æ˜¯ï¼Œä¸€åªå°ç‹—ï¼Œæ¯›èŒ¸èŒ¸ï¼Œè½¯ä¹ä¹ï¼Œæœ‰ä½ å°±æ‹¥æœ‰äº†å…¨ä¸–ç•Œã€‚â€",
                photos: ["./pic/award3.avif"]
              }
            },
            {
              icon: "ğŸ“š", title: "å¹´åº¦é˜…è¯»", winner: "ã€Šäº²çˆ±çš„å°ç‹—ã€‹", desc: "å°é¸¡æ¯›ï¼Œæˆ‘è§‰å¾—å¹¸ç¦æ˜¯ä¸€åªå°ç‹—ã€‚",
              detail: {
                text: "è¿™äº›ç®€å•è€Œç¾å¥½çš„ç¬é—´ï¼Œç»ˆå°†åœ¨è®°å¿†é‡Œé…¿æˆæœ€é†‡åšçš„é…’ï¼Œè®©æˆ‘ä»¬åœ¨æŸä¸ªä¸ç»æ„çš„é»„æ˜ï¼Œå“å‡ºç”Ÿæ´»æœ€æœ¬çœŸçš„å‘³é“",
                photos: ["./pic/award4.avif"]
              }
            },
            {
              icon: "ğŸ–ï¸", title: "å¹´åº¦ä¹‹æ—…", winner: "å¤©æ´¥ä¹‹å¿ƒ", desc: "è®©åŸå¸‚å¤©é™…çº¿ä¸€è§ˆæ— ä½™",
              detail: {
                text: "åœ¨å¤©æ´¥ä¹‹å¿ƒï¼ŒåŒ…çº³ä½ çš„å¿ƒ",
                photos: ["./pic/award6.avif"]
              }
            },
            {
              icon: "âš½", title: "å¹´åº¦èµ›äº‹", winner: "æ‰«è¡ç¤¼ç‰©é“º", desc: "åŒåä¸€æ‰«è¡åˆ©ç‰©æµ¦",
              detail: {
                text: "ä¸‰å…ƒåŸæ„è´­ï¼Œæ‰«è¡ç¤¼ç‰©é“º",
                photos: ["./pic/award5.avif", "./pic/award5-2.avif", "./pic/award5-3.avif"]
              }
            },
            // {
            //   icon: "ğŸ²", title: "å¹´åº¦ç¾é£Ÿ", winner: "é»‘æ¾éœ²ç«é”…", desc: "ä¼ ç»ŸÃ—é¡¶çº§é£Ÿæçš„èåˆ",
            //   detail: {
            //     text: "æ±¤åº•ä»¥æ³•å¼æ¸…æ±¤æ‰“åº•ï¼ŒåŠ å…¥æ–°é²œé»‘æ¾éœ²ç‰‡ä¸ç‰›è‚èŒã€‚",
            //     photos: ["https://bing.img.run/rand_uhd.php"]
            //   }
            // },
            {
              icon: "ğŸ’—", title: "äººç”Ÿæ—¶åˆ»", winner: "ä¾å¤æ¯”å¤æ˜¯è“è‰²çš„", desc: "ä¹¦å†™ä½ æˆ‘çš„æ•…äº‹",
              detail: {
                text: "",
                photos: ["./pic/event22.avif"]
              }
            },
            // {
            //   icon: "ğŸ§ ", title: "å¹´åº¦æ—¶åˆ»", winner: "NeoVision AR çœ¼é•œ", desc: "é‡å¡‘äººæœºäº¤äº’",
            //   detail: {
            //     text: "é‡‡ç”¨åŒç›®å…¨å½© Microâ€‘OLEDï¼Œå»¶è¿Ÿä½äº 12msï¼Œæ”¯æŒæ‰‹åŠ¿è¿½è¸ªã€‚",
            //     photos: ["https://bing.img.run/rand_uhd.php"]
            //   }
            // },
          ];

          const seg1 = document.getElementById('aw-seg-1');
          const seg1b = document.getElementById('aw-seg-1b');
          const seg2 = document.getElementById('aw-seg-2');
          const seg2b = document.getElementById('aw-seg-2b');
          const fly = document.getElementById('aw-fly');
          const modal = document.getElementById('aw-modal');
          const modalTitle = document.getElementById('aw-modal-title');
          const modalText = document.getElementById('aw-modal-text');
          const thumbs = document.getElementById('aw-thumbs');
          const mediaBox = modal.querySelector('.aw-media');

          function layoutAwardsModal() {
            const dialog = modal.querySelector('.aw-dialog');
            const head = dialog.querySelector('header');
            const thumbs = dialog.querySelector('#aw-thumbs');
            const vh = Math.max(window.innerHeight || 0, 360);
            const hHead = head ? head.getBoundingClientRect().height : 0;
            const hThumb = thumbs ? thumbs.getBoundingClientRect().height : 0;
            const padding = 24;
            const maxDialog = Math.min(vh * 0.90, vh - 20);
            const bodyMax = Math.max(240, maxDialog - hHead - hThumb - padding);
            dialog.style.setProperty('--aw-body-max', bodyMax + 'px');
          }


          function createCard(item, idx) {
            const el = document.createElement('article');
            el.className = 'aw-card';
            el.setAttribute('role', 'listitem');
            el.setAttribute('tabindex', '0'); // focusable for keyboard users
            el.dataset.index = String(idx);
            el.innerHTML = `
          <div class="aw-icon">${item.icon}</div>
          <div class="aw-t">${item.title}</div>
          <div class="aw-w">${item.winner}</div>
          <div class="aw-d">${item.desc}</div>`;
            return el;
          }

          function populate() {
            [seg1, seg1b, seg2, seg2b].forEach(s => s.innerHTML = '');
            data.forEach((d, i) => seg1.appendChild(createCard(d, i)));
            data.slice().reverse().forEach((d, i) => seg2.appendChild(createCard(d, data.length - 1 - i)));
            seg1b.innerHTML = seg1.innerHTML;
            seg2b.innerHTML = seg2.innerHTML;
            setDurations();
            bindCardInteractions();
          }

          function setDurations() {
            const root = document.documentElement;
            const baseSpeed = Number(getComputedStyle(root).getPropertyValue('--aw-speed')) || 90;
            document.querySelectorAll('.aw-row').forEach(row => {
              const content = row.firstElementChild;
              if (!content) return;
              const segWidth = content.getBoundingClientRect().width;
              const duration = Math.max(10, (segWidth) / baseSpeed);
              row.style.animationDuration = duration + 's';
            });
          }

          /* ===== Hover Fly Card ===== */
          let flyTimer;
          function showFly(evt, idx) {
            const d = data[idx]; if (!d) return;
            fly.innerHTML = `
          <h4>${d.title} Â· ${d.winner}</h4>
          <p>${d.detail?.text || d.desc}</p>
          <div class="aw-fly-media">${(d.detail?.photos || []).slice(0, 2).map(src => `<img src="${src}" alt="" referrerpolicy="no-referrer" decoding="async">`).join('')
              }</div>    
          <div class="aw-fly-actions">
            <a class="aw-link" href="javascript:void(0)" data-open="${idx}">æŸ¥çœ‹è¯¦æƒ…</a>
          </div>`;
            const { clientX: x, clientY: y } = evt.type.startsWith('mouse') ? evt : { clientX: 0, clientY: 0 };
            const pad = 16;
            const vw = window.innerWidth, vh = window.innerHeight;
            const w = Math.min(420, vw * 0.9), h = 140;
            const nx = Math.min(vw - w - pad, x + 18);
            const ny = Math.min(vh - h - pad, y + 18);
            fly.style.setProperty('--x', nx + 'px');
            fly.style.setProperty('--y', ny + 'px');
            fly.classList.add('is-visible');
            fly.setAttribute('aria-hidden', 'false');
            clearTimeout(flyTimer);
          }
          function moveFly(evt) {
            if (!fly.classList.contains('is-visible')) return;
            const pad = 16;
            const vw = window.innerWidth, vh = window.innerHeight;
            const rect = fly.getBoundingClientRect();
            const w = rect.width || 320, h = rect.height || 160;
            const nx = Math.min(vw - w - pad, evt.clientX + 18);
            const ny = Math.min(vh - h - pad, evt.clientY + 18);
            fly.style.setProperty('--x', nx + 'px');
            fly.style.setProperty('--y', ny + 'px');
          }
          function hideFly() {
            flyTimer = setTimeout(() => {
              fly.classList.remove('is-visible');
              fly.setAttribute('aria-hidden', 'true');
            }, 80);
          }

          function bindCardInteractions() {
            const cards = document.querySelectorAll('.aw-card');
            if (IS_TOUCH) {
              // On touch devices: no hover fly, click opens modal directly
              fly.setAttribute('aria-hidden', 'true');
              fly.style.display = 'none';
              cards.forEach(card => {
                const idx = Number(card.dataset.index);
                card.addEventListener('click', () => openModal(idx));
                card.addEventListener('keydown', (e) => { if (e.key === 'Enter') { openModal(idx); } });
              });
              return;
            }
            cards.forEach(card => {
              const idx = Number(card.dataset.index);
              card.addEventListener('mouseenter', (e) => showFly(e, idx));
              card.addEventListener('mousemove', (e) => moveFly(e));
              card.addEventListener('mouseleave', hideFly);
              card.addEventListener('focus', (e) => showFly({ type: 'mouse', clientX: card.getBoundingClientRect().left, clientY: card.getBoundingClientRect().top }, idx));
              card.addEventListener('blur', hideFly);
              card.addEventListener('click', () => openModal(idx));
              card.addEventListener('keydown', (e) => { if (e.key === 'Enter') { openModal(idx); } });
            });
            fly.addEventListener('click', (e) => {
              const a = e.target.closest('[data-open]'); if (a) { openModal(Number(a.dataset.open)); }
            });
          }

          /* ===== Modal / Gallery ===== */
          let currentIdx = -1, slides = [], curSlide = 0;
          function buildSlides(detail) {
            mediaBox.querySelectorAll('.aw-slide').forEach(n => n.remove());
            slides = [];
            const media = [...(detail.photos || []).map(src => ({ type: 'img', src })), ...(detail.videos || []).map(src => ({ type: 'video', src }))];
            media.forEach(m => {
              const wrap = document.createElement('div'); wrap.className = 'aw-slide';
              if (m.type === 'img') { const img = document.createElement('img'); img.src = m.src; img.alt = ''; wrap.appendChild(img); }
              else { const v = document.createElement('video'); v.src = m.src; v.controls = true; wrap.appendChild(v); }
              mediaBox.appendChild(wrap); slides.push(wrap);
            });
            thumbs.innerHTML = '';
            media.forEach((m, i) => {
              const btn = document.createElement('button'); btn.setAttribute('aria-label', 'é¢„è§ˆ ' + (i + 1));
              btn.innerHTML = m.type === 'img' ? `<img src="${m.src}" alt="">` : `<video src="${m.src}"></video>`;
              btn.addEventListener('click', () => setSlide(i));
              thumbs.appendChild(btn);
            });
            setSlide(0);
            layoutAwardsModal();
          }
          function setSlide(i) {
            curSlide = Math.max(0, Math.min(slides.length - 1, i));
            slides.forEach((s, idx) => s.classList.toggle('is-active', idx === curSlide));
          }

          function openModal(idx) {
            const d = data[idx]; if (!d) return;
            currentIdx = idx;
            modalTitle.textContent = `${d.title} Â· ${d.winner}`;
            modalText.textContent = d.detail?.text || d.desc || '';
            buildSlides(d.detail || {});
            modal.setAttribute('aria-hidden', 'false');
            layoutAwardsModal();
            document.body.style.overflow = 'hidden';
          }
          function closeModal() {
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            mediaBox.querySelectorAll('video').forEach(v => { try { v.pause(); } catch (e) { } });
          }

          modal.addEventListener('click', (e) => { if (e.target.hasAttribute('data-close')) closeModal(); });
          modal.querySelector('.aw-close').addEventListener('click', closeModal);
          modal.querySelector('.aw-prev').addEventListener('click', () => setSlide(curSlide - 1));
          modal.querySelector('.aw-next').addEventListener('click', () => setSlide(curSlide + 1));
          window.addEventListener('resize', layoutAwardsModal);
          document.addEventListener('keydown', (e) => {
            if (modal.getAttribute('aria-hidden') === 'false') {
              if (e.key === 'Escape') closeModal();
              if (e.key === 'ArrowLeft') setSlide(curSlide - 1);
              if (e.key === 'ArrowRight') setSlide(curSlide + 1);
            }
          });

          /* ===== Base controls from previous version ===== */
          let playing = true;
          function setPlayState(run) {
            playing = run;
            document.querySelectorAll('.aw-row').forEach(r => { r.style.animationPlayState = run ? 'running' : 'paused'; });
            toggleBtn.setAttribute('aria-pressed', String(!run));
          }
          const toggleBtn = document.getElementById('aw-toggle');
          const speedUp = document.getElementById('aw-speed-up');
          const speedDown = document.getElementById('aw-speed-down');
          const awards = document.getElementById('awards');
          toggleBtn.addEventListener('click', () => setPlayState(!playing));
          awards.addEventListener('mouseenter', () => setPlayState(false));
          awards.addEventListener('mouseleave', () => setPlayState(true));
          awards.addEventListener('focusin', () => setPlayState(false));
          awards.addEventListener('focusout', () => setPlayState(true));
          document.addEventListener('visibilitychange', () => setPlayState(document.visibilityState === 'visible'));

          function adjustSpeed(delta) {
            const root = document.documentElement;
            const cur = Number(getComputedStyle(root).getPropertyValue('--aw-speed')) || 90;
            const nxt = Math.min(200, Math.max(30, cur + delta));
            root.style.setProperty('--aw-speed', String(nxt));
            setDurations();
          }
          speedUp.addEventListener('click', () => adjustSpeed(+15));
          speedDown.addEventListener('click', () => adjustSpeed(-15));

          const ro = new ResizeObserver(() => setDurations());
          ro.observe(seg1); ro.observe(seg2);

          populate();
          requestAnimationFrame(() => setPlayState(true));
        })();
      </script>
    </section>
  </main>

  <!-- äº‹ä»¶è¯¦æƒ…æ¨¡æ€æ¡† -->
  <div class="modal" id="eventModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">äº‹ä»¶è¯¦æƒ…</h2>
        <button class="close-btn" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="event-gallery"><button class="eg-nav eg-prev" aria-label="ä¸Šä¸€å¼ ">â€¹</button><div class="eg-stage" id="eventStage" aria-live="polite"></div><button class="eg-nav eg-next" aria-label="ä¸‹ä¸€å¼ ">â€º</button></div>
        <!-- <div class="eg-thumbs" id="eventThumbs"></div> -->
        <div id="eventContent" class="event-content"></div>
        <p class="event-date"><strong>æ—¥æœŸ:</strong> <span id="eventDate"></span></p>
      </div>
    </div>
  </div>



  <!-- å¼•å…¥Swiperåº“ -->
  <script src="https://unpkg.com/swiper@11/swiper-bundle.min.js"></script>

  <script>
    // äº‹ä»¶æ•°æ®å­˜å‚¨
    const events = {
      "2025-01-01": {
        title: "æ–°å¹´å¿«ä¹",
        date: "2025å¹´1æœˆ1æ—¥",
        content: "æŸ¯å—è·¨å¹´åœºæ¨±èŠ±é›¨ï¼Œå’Œå¢å¥æ°ä¸€èµ·è¿æ¥æ–°å¹´ï¼Œè¿˜æœ‰å›åˆ°å­¦æ ¡æ¸å…¥å°¾å£°çš„æ–°å¹´é’Ÿå£°ç¯ç«æ™šä¼šã€‚åœ¨æ™šä¼šä¸Šè®¤è¯†äº†ä»Šå¹´çš„ç¬¬ä¸€ä¸ªæœ‹å‹ï¼Œæ˜¯æ·±åœ³çš„å­¦å¼Ÿå‘¢ã€‚å—¯è¿˜æœ‰å’Œç½—æ–‡è½©å¢å¥æ°çš„æ·±å¤œé£Ÿå ‚çƒ§çƒ¤",
        image: "./pic/event1.avif",
      },
      "2025-01-04": {
        title: "è±¡é™ä»ªåº§",
        date: "2025å¹´1æœˆ4æ—¥",
        content: "æ–°çš„ä¸€å¹´ï¼Œä»å’Œå¤§å®¶ä¸€èµ·èººå¹³çœ‹è±¡é™ä»ªåº§æµæ˜Ÿé›¨å¼€å§‹ã€‚é‚£å¤©æ™šä¸Šæˆ‘ä»¬åœ¨æœå£³ç”µå°é“ºå¥½äº†åœ°é“ºï¼Œä½†è¿˜æ˜¯å¯’é£å½»éª¨ã€‚å¤©ç©ºä¸­åˆ’è¿‡çš„æµæ˜Ÿï¼Œä»¿ä½›åœ¨ä¸ºæ–°çš„ä¸€å¹´è®¸ä¸‹ç¾å¥½çš„æ„¿æœ›",
        image: "./pic/event2.avif",
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½åŒ—äº¬",
        description: "åœ¨æœå£³çš„æœ€åä¸€ä¸ªå­¦æœŸï¼Œå’Œæœ‹å‹ä»¬ä¸€èµ·è¿æ¥æ–°å¹´çš„ç¬¬ä¸€åœºæµæ˜Ÿé›¨"
      },
      "2025-03-10": {
        title: "çš®åˆ’è‰‡è¯¾",
        date: "2025å¹´3æœˆ10æ—¥",
        content: "ç¬¬ä¸€æ¬¡æ˜¯åŒäººè‰‡ï¼Œå’Œå¢å¥æ°ä¸€èµ·åˆ’è¿‡å¹³é™çš„æ¹–é¢ï¼Œæ„Ÿå—å¾®é£æ‹‚é¢ï¼Œä»¿ä½›ä¸å¤§è‡ªç„¶èä¸ºä¸€ä½“ã€‚è™½ç„¶ç¬¬ä¸€æ¬¡ä¸‹è‰‡æ—¶å¿å¿å¿‘å¿‘ï¼Œåˆ’è¿‡çš„è½¨è¿¹æ­ªæ­ªæ‰­æ‰­ï¼Œä½†ç€å®å¾ˆæœ‰è¶£",
        image: "./pic/event3.avif",
      },
      "2025-03-15": {
        title: "æ˜¥æ—¥åˆé›ª",
        date: "2025å¹´3æœˆ15æ—¥",
        content: "å†¬å°†ç§¯è“„çš„é›ªå†™æˆä¿¡ç¬ºï¼Œå¯„ç»™ä¸‰æœˆçš„é£ï¼Œåœ¨æ˜¥çš„åºå¹•é‡Œç°Œç°Œè€Œä¸‹ã€‚ä¸‰æœˆä¸‹åˆçªå¦‚å…¶æ¥çš„çš„é›ªï¼Œåƒæ˜¯å†¬å¤©çš„æœ€åä¸€åœºå‘Šåˆ«ï¼Œå¸¦ç€æœ€åçš„å¯’æ„ï¼Œå´ä¹Ÿé¢„ç¤ºç€æ˜¥å¤©çš„åˆ°æ¥",
        images: ["./pic/event4.avif", "./pic/event4-2.avif"],
      },
      "2025-03-21": {
        title: "å±±èŒ¶èŠ±å¼€",
        date: "2025å¹´3æœˆ21æ—¥",
        content: "æ•™ä¸€æ¥¼å‰çš„å±±èŒ¶èŠ±å¼€å•¦ï¼Œæ¸©æš–çš„é˜³å…‰æ´’åœ¨èŠ±ç“£ä¸Šï¼Œæ˜ ç…§å‡ºå®ƒä»¬ç‹¬ç‰¹çš„ç¾ä¸½ã€‚èŠ±æœµåœ¨å¾®é£ä¸­è½»è½»æ‘‡æ›³ï¼Œå‘äººä»¬ä¼ é€’æ˜¥å¤©çš„è®¯æ¯",
        image: "./pic/event5.avif",
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½åŒ—äº¬",
        description: "å±±èŒ¶èŠ±å¼€ï¼Œæ˜¥æ„ç›ç„¶"
      },
      "2025-04-04": {
        title: "è¸é’é™¶ç„¶",
        date: "2025å¹´4æœˆ4æ—¥",
        content: "åœ¨æ­£å¼å‡ºå‘å¤©æ´¥æ‰¾èˆå‹å‰çš„æ—¶æ®µï¼Œé—²æ¸¸åœ¨é‚»è¿‘çš„é™¶ç„¶äº­å…¬å›­çš„èŠ±æµ·ä¸­ï¼ŒèŠ±é¦™å››æº¢ï¼Œä»¤äººå¿ƒæ—·ç¥æ€¡",
        image: "./pic/event6.avif",
      },
      "2025-04-11": {
        title: "å¤§é›¨çº·é£",
        date: "2025å¹´4æœˆ11æ—¥",
        content: "ååœ¨æ•™ä¸€æ¥¼äºŒå±‚å…¬å…±ç©ºé—´çš„çª—è¾¹ï¼Œé›¨ä¸å¼€å§‹é¡ºç€ç»ç’ƒå‡ç»“ã€‚çª—å¤–çš„æœå£³é’Ÿæ¥¼åœ¨æ­¤åˆ»ä¾¿æ˜¾å¾—å¤è´¨å¹½ç„¶",
        image: "./pic/event7.avif",
      },
      "2025-05-04": {
        title: "äº”ä¸€å‡ºè¡Œ",
        date: "2025å¹´5æœˆ4æ—¥",
        content: "äº”ä¸€å‡æœŸå’Œå´å¥‡å¤ä¸€èµ·å»ç¥å ‚å³ªå¾’æ­¥ï¼Œå·§å¦™é¿å¼€äººç¾¤å–§åš£ï¼Œåœ¨å¤©ç„¶æ°§å§é‡Œï¼Œäº«å—å¤§è‡ªç„¶çš„å®é™ä¸ç¾å¥½ã€‚åˆ«å¿˜äº†ä»Šå¤©ä¹Ÿä»æ¡¨æ¿ä¸Šæ»‘æºœæºœåœ°è½æ°´å•¦",
        images: ["./pic/event8.avif", "./pic/event9.avif"],
      },
      "2025-05-17": {
        title: "å…¬ä¼—ç§‘å­¦",
        date: "2025å¹´5æœˆ17æ—¥",
        content: "ä»Šå¹´çš„å…¬ä¼—ç§‘å­¦æ—¥å’Œå´å¥‡å¤ä¸€èµ·å‚è§‚ä¸­å›½ç§‘å­¦é™¢é«˜èƒ½ç‰©ç†æ‰€çš„HEPSé«˜èƒ½åŒæ­¥è¾å°„å…‰æºï¼Œå‚è§‚å®Œååœ¨äºŒå±‚å…¬äº¤ä¸Šå›ä¸œæ ¡åŒºï¼Œåœ¨å››é£Ÿå ‚äºŒæ¥¼åƒçš„è‡ªåŠ©æ™šé¤",
        image: "./pic/event10.avif",
      },
      "2025-05-21": {
        title: "ä¼šé¢å¼ å“¥",
        date: "2025å¹´5æœˆ21æ—¥",
        content: "é«˜ä¸­æ¯•ä¸šå››å¹´åå¼ å“¥å‡ºå·®åŒ—äº¬ï¼Œç»ˆäºå’Œå¼ å“¥åœ¨åŒ—äº¬è§é¢äº†ã€‚åœ¨åŒ—äº¬åŒ—ç«™é™„è¿‘çš„æµ·åº•æåƒé¥­ï¼ŒèŠäº†å¾ˆå¤šä»¥å‰çš„ã€ç°åœ¨çš„æ—¶å…‰ã€‚é¥­ååœ¨é™„è¿‘çš„é“è·¯ä¸Šæ•£æ­¥ï¼Œå¼ å“¥æŠ½çƒŸäº†",
        image: "./pic/event11.avif",
      },
      "2025-05-28": {
        title: "å¤œéª‘é›æ –",
        date: "2025å¹´5æœˆ28æ—¥",
        content: "å€Ÿç”¨äº†åˆ˜ç¦¹çš„è½¦ï¼Œå’Œç‹å®‡å³°ä¸€èµ·å¤œéª‘é›æ –æ¹–ã€‚æ™šä¸Šçš„è›‹å£³å°±æ˜¯å¥½çœ‹ï¼Œé™¤äº†èšŠå­å¤šã€‚æ¹–é¢å¾®é£ä¹ ä¹ ï¼Œå¹æ•£äº†ç™½å¤©çš„ç‡¥çƒ­ï¼Œå¤œè‰²ä¸­çš„é›æ –æ¹–æ˜¾å¾—æ ¼å¤–å®é™å’Œç¾ä¸½",
        images: ["./pic/event12.avif", "./pic/event12-2.avif"],
      },
      "2025-06-01": {
        title: "æ¸…å‡‰è°·è¡Œ",
        date: "2025å¹´6æœˆ1æ—¥",
        content: "åœ¨æœå£³æœ€åçš„åŠä¸ªæœˆï¼Œå’Œå´å¥‡å¤ã€ç‹å®‡å³°ã€åˆ˜ç¦¹ã€å§šæœ‹ä¸€è¡Œäº”äººå‰å¾€æ¸…å‡‰è°·æ™¯åŒºæ¸¸ç©ï¼Œä¸´æ—¶çš„èµ·æ„ä¹Ÿä¼šè¿¸å‘å¾ˆå¤šä¹è¶£ã€‚æ¸…å‡‰è°·çš„å±±æ°´é£å…‰ä»¤äººå¿ƒæ—·ç¥æ€¡ï¼Œç€‘å¸ƒé£æµç›´ä¸‹ï¼Œæºªæ°´æ¸…æ¾ˆè§åº•",
        images: ["./pic/event13-2.avif", "./pic/event13.avif", "./pic/event13-3.avif"],
      },
      "2025-06-07": {
        title: "åˆ’è‰‡ç»“è¯¾",
        date: "2025å¹´6æœˆ07æ—¥",
        content: "ç»™æ¯å‘¨å¸¦æ¥å¿«ä¹çš„çš®åˆ’è‰‡è¯¾è½ä¸‹å¸·å¹•ï¼Œè¿™å­¦æœŸåœ¨å¤§åº†æ•™ç»ƒçš„å¸¦é¢†ä¸‹æŒæ¡äº†å¾ˆå¤šæŠ€æœ¯åŠ¨ä½œï¼Œä¹Ÿç»“è¯†äº†å¾ˆå¤šçš„æœ‹å‹ï¼Œç¥å¤§å®¶åœ¨æ–°çš„å·¥ä½œå²—ä½ä¸Šä¸€åˆ‡é¡ºåˆ©",
        image: "./pic/event14.avif",
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½åŒ—äº¬",
        description: "å°è‰‡ä¸€åˆ’ï¼Œçƒ¦æ¼ä¸å†"
      },
      "2025-06-14": {
        title: "æ¬¢ä¹æ¡Œæ¸¸",
        date: "2025å¹´6æœˆ14æ—¥",
        content: "ç¦»æ¹–å‰ä¸‰å¤©ï¼Œå’Œå¢å¥æ°ã€ç½—æ–‡è½©ä¸€èµ·åœ¨å¢å¥æ°ä¸œåŒºçš„ä¸´æ—¶å®¿èˆç”¨æ‰‘å…‹ç‰Œç©åšå¼ˆï¼Œç¬¬ä¸€æ¬¡ç©è¿™ç§ç©æ³•ä¹Ÿæ˜¯å¢å¥æ°åˆ†äº«çš„ã€‚æ™šä¸Šä¹Ÿä¾¿åœ¨å¢å¥æ°å®¿èˆæ‰“åœ°é“ºè€Œç¡ï¼Œå­¦æ ¡çš„æ–°å®¿èˆç€å®ä¸é”™",
        image: "./pic/event15.avif",
      },
      "2025-06-16": {
        title: "ç¦»æ¹–å…¸ç¤¼",
        date: "2025å¹´6æœˆ16æ—¥",
        content: "åœ¨æ¹–é‡Œçš„æœ€åä¸€å¤©ï¼Œå…ˆæ˜¯å’Œèˆå‹ä»¬ä¸€èµ·å°†è¡Œæè£…ç®±æ‰“åŒ…é€å…¥æ•™å®¤å®‰ç½®ï¼Œä¸‹åˆå’Œç‹å®‡å³°ã€åˆ˜ç¦¹ä¸€èµ·å‰å¾€è§‚æ™¯å°ä¿¯ç°æœå£³å…¨æ™¯ï¼Œæ™šé¥­åå‚åŠ å­¦é™¢ä¸»åŠçš„å…¨æ ¡çš„ç¦»æ¹–æ™šä¼š",
        image: "./pic/event16.avif",
      },
      "2025-07-01": {
        title: "ä¸´è®¿é‡åº†",
        date: "2025å¹´7æœˆ1æ—¥",
        content: "åœ¨é™†å†›å†›åŒ»å¤§å­¦æ–°æ¡¥åŒ»é™¢è®¿é—®äº†å¾ˆä¹…æ²¡è§çš„èµµå³»å’Œä¸ä¹…å‰è§é¢çš„å¼ å“¥ï¼Œèµµè€å¸ˆè‚‰çœ¼å¯è§åœ°æ›´åŠ ç»“å®äº†ï¼Œäº”ç‚¹åœ¨é™„è¿‘çš„é¥­åº—é‡Œåƒäº†ä¸€é¤ï¼Œä¾¿å¼€å¯ä¸‹ä¸€ç¨‹",
        image: "./pic/event17.avif",
      },
      "2025-07-03": {
        title: "ç§‘å­¦è£…ç½®",
        date: "2025å¹´7æœˆ3æ—¥",
        content: "åˆ°è®¿äº†ä½äºæƒ å·æƒ ä¸œå¿ä¸­å›½ç§‘å­¦é™¢è¿‘ä»£ç‰©ç†æ‰€çš„ä¸¤å¤§ç§‘å­¦è£…ç½®ï¼Œå¼ºæµé‡ç¦»å­åŠ é€Ÿå™¨HIAFå’ŒåŠ é€Ÿå™¨é©±åŠ¨å¬—å˜è£…ç½®CiADSã€‚æ„Ÿè°¢è‹—å®œéœ–åŒå­¦çš„æ¥å¾…å’Œè®²è§£",
        image: "./pic/event18.avif",
      },
      "2025-07-05": {
        title: "å¤§äºšæ¹¾æµ·",
        date: "2025å¹´7æœˆ5æ—¥",
        content: "é¡¶ç€ä¸­åˆé«˜ç…§çš„è‰³é˜³ï¼Œè¸®ç€è„šåœ¨å¤§äºšæ¹¾çš„æ²™æ»©ä¸Šèµ°ç€ï¼Œå–œæ¬¢é˜µé˜µçš„æµªæ¶›æ‹æ‰“å£°ï¼Œå°±æ˜¯æ²™å­ç¡®å®å¾ˆçƒ«å¾ˆçƒ«ã€‚æ¡äº†ä¸€ä¸ªæµ·èºç•™ä½œçºªå¿µ",
        image: "./pic/event19.avif",
      },
      "2025-07-06": {
        title: "å¥½ä¹…ä¸è§",
        date: "2025å¹´7æœˆ6æ—¥",
        content: "Je ne tâ€™ai pas vu depuis longtemps, et tu me manques beaucoup",
        image: "./pic/event20.avif",
        important: true,
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½æ·±åœ³",
        description: "è‡³äºä½ ï¼Œåªä¸ä½ ï¼Œæ­¢äºä½ "
      },
      "2025-07-09": {
        title: "åå¹´ä¹‹çº¦",
        date: "2025å¹´7æœˆ9æ—¥",
        content: "å†æ¬¡è§é¢ï¼Œå·²è¿‘åå¹´",
        image: "./pic/event21.avif",
      },
      "2025-07-11": {
        title: "æˆ‘å–œæ¬¢ä½ ",
        date: "2025å¹´7æœˆ11æ—¥",
        content: "Je t'aime et tu me plais beaucoup",
        image: "./pic/event22.avif",
        important: true,
      },
      "2025-07-12": {
        title: "æ˜¯è¯•è¿è¡Œ",
        date: "2025å¹´7æœˆ12æ—¥",
        content: "Essayons dâ€™Ãªtre ensemble",
        image: "./pic/event23.avif",
        important: true,
      },
      "2025-08-03": {
        title: "ä¸€çº¸é•¿æƒ…",
        date: "2025å¹´8æœˆ3æ—¥",
        content: "å¥½çš„å‘¢äººæ°‘ç¾¤ä¼—",
        image: "./pic/event24.avif",
        important: true,
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½æ·±åœ³",
        description: "ç°åœ¨æœªæ¥ï¼Œæºæ‰‹å‰è¿›"
      },
      "2025-08-29": {
        title: "ä¸ƒå¤•ä¹å·§",
        date: "2025å¹´8æœˆ29æ—¥",
        content: "æˆ‘ä»¬çš„ç¬¬1ä¸ªä¸ƒå¤•",
        image: "./pic/event25.avif",
        important: true,
      },
      "2025-09-03": {
        title: "èƒœåˆ©é˜…å…µ",
        date: "2025å¹´9æœˆ3æ—¥",
        content: "å’Œç‹å®‡å³°ã€ç‹å®£çš“ã€å§šæœ‹ã€è‘£å­˜é¾™ã€åˆ˜èªä¸€è¡Œå…­äººæ—©èµ·éª‘è¡Œåˆ°å…¬ä¸»åŸç­‰å¾…å—é˜…ç»“æŸçš„è£…å¤‡è½¦é˜Ÿï¼Œç»“æŸåä¸€èµ·åœ¨é‡‘å‹ºç¼˜åƒåˆé¥­",
        image: "./pic/event26.avif",
      },
      "2025-09-08": {
        title: "å…¨é£Ÿçº¢æœˆ",
        date: "2025å¹´9æœˆ8æ—¥",
        content: "å’Œç‹å®‡å³°ã€é‡‘ä¸€å¸†ã€è°¢å®‡æ‰¿ä¸€åŒåœ¨å®¿èˆæ¥¼é¡¶æ‹æ‘„ä»Šæ™šçš„çº¢æœˆï¼ŒèšŠå­å¾ˆå¤š",
        image: "./pic/event27.avif",
      },
      "2025-10-06": {
        title: "æ³¢æ¾œä¸­ç§‹",
        date: "2025å¹´10æœˆ6æ—¥",
        content: "æ˜¯æ³¢æ¾œå£®é˜”çš„ç§‹ï¼Œå’Œä¸­ç§‹",
        images: ["./pic/event28.avif", "./pic/event28-2.avif"],
      },
      "2025-10-10": {
        title: "æ±ŸåŸç¼©å½±",
        date: "2025å¹´10æœˆ10æ—¥",
        content: "æœºç¼˜ä¸‹ï¼Œèµ°è¿‡ä½ èµ°è¿‡çš„è·¯ï¼Œå¯»æ‰¾æ—¶ç©ºä¸­ç•™ä¸‹çš„ä½ çš„èº«å½±ï¼Œå¿ƒä¹‹æ‰€å‘ï¼Œæ­¥å±¥çš†å¾€",
        image: "./pic/event29.avif",
      },
      "2025-10-20": {
        title: "ç™¾å¤©çºªå¿µ",
        date: "2025å¹´10æœˆ20æ—¥",
        content: "æƒ³è¦é€ä½ ä¸€å¼ çº¸ï¼Œâ€œä¸€è¾ˆçº¸â€",
        image: "./pic/event30.avif",
        important: true,
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½æ·±åœ³",
        description: "æƒ³è¦é€ä½ ä¸€å¼ çº¸ï¼Œâ€œä¸€è¾ˆçº¸â€"
      },
      "2025-11-15": {
        title: "å…‰å½±å›å¿†",
        date: "2025å¹´11æœˆ15æ—¥",
        content: "ä¼šæƒ³èµ·ï¼Œä¸ä½ ä¸€èµ·çœ‹çš„ç¬¬ä¸€åœºç”µå½±ï¼Œæ˜¯é‚£ä¸ªå’Œç…¦ä¸‹åˆå››ç‚¹ï¼Œåœ¨é¾™åæ±‡æµ·å¹¿åœºçš„ä¸‡è¾¾å½±åŸé‡Œï¼Œæ”¾æ˜ çš„ã€ŠæƒŠå¤©é­”ç›—å›¢3ã€‹",
        image: "./pic/event32.avif",
        important: true,
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½æ·±åœ³",
        description: "æ˜æš—çš„å½±å¹•å‰ï¼Œå…‰å½±æ‰«è¿‡ï¼Œçœ‹åˆ°çš„æ˜¯ä½ æ¸©æŸ”çš„ä¾§é¢œ"
      },
      "2025-11-18": {
        title: "æœ±è¿ªå°¼å…‹",
        date: "2025å¹´11æœˆ18æ—¥",
        content: "æ¯”å¦‚è¯´ï¼Œåˆšå¥½æ˜¯ä¸€æ¯é…å¯¹çš„zootopia2ç‘å¹¸è”åç–¯ç‹‚è‰è“å†°èŒ¶ï¼Œå°±ä¼šè®©è¿™ä¸ªå‘¨äºŒçš„ä¸‹åˆæ ¼å¤–åœ°ç¿çƒ‚",
        image: "./pic/event33.avif",
        important: true,
        // æ—…æ¸¸ç›¸å†Œä¸“ç”¨æ•°æ®
        travel: true,
        location: "ä¸­å›½æ·±åœ³&ä¸­å›½åŒ—äº¬",
        description: "ğŸ“è‰è“å¾ˆç”œï¼Œæˆ‘æƒ³ä½ ä¹Ÿæ˜¯"
      },
      "2025-11-22": {
        title: "æ›¼æ¸¸ä¸­å›½",
        date: "2025å¹´11æœˆ22æ—¥",
        content: "åœ¨79å±‚çš„å¤©æ´¥ä¹‹å¿ƒï¼Œä¸è“æœˆç›¸é‡",
        images: ["./pic/event34.avif", "./pic/event34-2.avif", "./pic/event34-3.avif"],
      },
      "2025-11-29": {
        title: "çˆ±ä½ ï¼Œæ­æ¡£",
        date: "2025å¹´11æœˆ29æ—¥",
        content: "æ˜¯å½¼æ­¤çš„å…”å­çªï¼Œæ˜¯æ·±åœ³æ¹¾ç•”çš„æ˜æœˆæ¸…é£ï¼Œæ˜¯ç´§æ‰£çš„åæŒ‡å’Œèº«æ—çš„ä½ ",
        images: ["./pic/event35.avif", "./pic/event35-2.avif", "./pic/event35-3.avif"],
        important: true
      },
    };

    // æœˆä»½æ•°æ®
    const months = [
      { name: "ä¸€æœˆ", days: 31 },
      { name: "äºŒæœˆ", days: 28 },
      { name: "ä¸‰æœˆ", days: 31 },
      { name: "å››æœˆ", days: 30 },
      { name: "äº”æœˆ", days: 31 },
      { name: "å…­æœˆ", days: 30 },
      { name: "ä¸ƒæœˆ", days: 31 },
      { name: "å…«æœˆ", days: 31 },
      { name: "ä¹æœˆ", days: 30 },
      { name: "åæœˆ", days: 31 },
      { name: "åä¸€æœˆ", days: 30 },
      { name: "åäºŒæœˆ", days: 31 }
    ];

    // DOM åŠ è½½å®Œæˆååˆå§‹åŒ–é¡µé¢
    document.addEventListener('DOMContentLoaded', function () {
      const calendarContainer = document.getElementById('calendarContainer');

      // åˆ›å»ºæ¯ä¸ªæœˆçš„æ—¥å†å¡ç‰‡
      months.forEach((month, index) => {
        const monthCard = document.createElement('div');
        monthCard.className = 'month-card';

        monthCard.innerHTML = `
          <div class="month-header">
              <h3 class="month-title">${month.name}</h3>
          </div>
          <div class="days-grid" id="month-${index}"></div>
      `;

        calendarContainer.appendChild(monthCard);

        // æ·»åŠ è¿™ä¸ªæœˆçš„æ¯ä¸€å¤©
        const daysGrid = document.getElementById(`month-${index}`);
        for (let day = 1; day <= month.days; day++) {
          const dayElement = document.createElement('div');
          dayElement.className = 'day';
          dayElement.textContent = day;

          // æ£€æŸ¥è¿™ä¸€å¤©æ˜¯å¦æœ‰äº‹ä»¶
          const monthNumber = (index + 1).toString().padStart(2, '0');
          const dayNumber = day.toString().padStart(2, '0');
          const dateKey = `2025-${monthNumber}-${dayNumber}`;

          if (events[dateKey]) {
            dayElement.classList.add('event');
          }

          
            if (events[dateKey] && events[dateKey].important) {
              dayElement.classList.add('important');
            }
    // è®¾ç½®ç‚¹å‡»äº‹ä»¶
          dayElement.addEventListener('click', () => {
            if (events[dateKey]) {
              showEventModal(dateKey);
            }
          });

          daysGrid.appendChild(dayElement);
        }
      });

      // åˆå§‹åŒ–æ—…æ¸¸ç›¸å†Œ
      /* init deferred until visible */

      // è®¾ç½®æ¨¡æ€æ¡†å…³é—­æŒ‰é’®
      document.getElementById('closeModal').addEventListener('click', closeModal);

      // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
      window.addEventListener('click', function (event) {
        const modal = document.getElementById('eventModal');
        if (event.target === modal) {
          closeModal();
        }
      });

      // å¯¼èˆªæ åˆ‡æ¢
      const navButtons = document.querySelectorAll('.nav-btn');
      navButtons.forEach(button => {
        button.addEventListener('click', function () {
          const targetSection = this.getAttribute('data-section');

          // æ›´æ–°æ´»åŠ¨æŒ‰é’®
          navButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');

          // æ›´æ–°æ´»åŠ¨è§†å›¾
          document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
          });
          document.getElementById(targetSection).classList.add('active');
          if (targetSection === 'travelView') { try { ensureTravelAlbum(); } catch (e) { } }
          if (targetSection === 'capsuleView') {
            try { if (window.tcResizeAll) { window.tcResizeAll(); } } catch (e) {}
          }
        });
      });
    });

    // åˆå§‹åŒ–æ—…æ¸¸ç›¸å†Œ
    let travelSwiper = null;
    let travelBuilt = false;
    let travelDiscDots = [];
    let travelDiscRotation = 0;
    let travelLastIndex = 0;

    function updateTravelDiscActive(activeIndex) {
      if (!travelDiscDots || !travelDiscDots.length) return;
      const total = travelDiscDots.length;
      if (!total) return;
      const normalized = ((activeIndex % total) + total) % total;

      travelDiscDots.forEach(function (dot, idx) {
        if (idx === normalized) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    function ensureTravelAlbum() {
      const travelRoot = document.getElementById('travelSwiper');
      if (!travelRoot) return;

      // é¦–æ¬¡è¿›å…¥æ—¶ï¼Œæ ¹æ® events æ„å»ºå¹»ç¯ç‰‡ä¸æ˜Ÿç›˜
      if (!travelBuilt) {
        if (typeof events === 'undefined' || !events) return;

        const travelEvents = Object.keys(events)
          .filter(function (dateKey) {
            const evt = events[dateKey];
            return evt && evt.travel;
          })
          .map(function (dateKey) { return events[dateKey]; });

        const swiperWrapper = travelRoot.querySelector('.swiper-wrapper');
        if (!swiperWrapper) return;

        swiperWrapper.innerHTML = '';

        travelEvents.forEach(function (event) {
          const slide = document.createElement('div');
          slide.className = 'swiper-slide';
          slide.innerHTML = `
                <img src="${event.image}" alt="" class="travel-photo" aria-hidden="true">
                <div class="swiper-slide-content">
                    <div class="travel-date">${event.date}</div>
                    <div class="travel-location">
                        <i class="fas fa-map-marker-alt"></i> ${event.location}
                    </div>
                    <p class="travel-description">${event.description}</p>
                </div>`;
          swiperWrapper.appendChild(slide);
        });

        // æ„å»ºæ˜Ÿç›˜å¯¼èˆª
        const disc = document.getElementById('travelDiscNav');
        travelDiscDots = [];
        if (disc && travelEvents.length) {
          disc.innerHTML = '';

          const total = travelEvents.length;
          const radius = 42; // ä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½çš„åŠå¾„
          const center = 50;
          const startAngle = -Math.PI / 2;

          travelEvents.forEach(function (event, idx) {
            const angle = startAngle + (2 * Math.PI * idx / total);
            const x = center + radius * Math.cos(angle);
            const y = center + radius * Math.sin(angle);

            const dot = document.createElement('button');
            dot.type = 'button';
            dot.className = 'travel-disc-dot';
            dot.style.left = x + '%';
            dot.style.top = y + '%';
            dot.setAttribute('data-index', String(idx));
            dot.setAttribute('aria-label', (event.date || 'ç¬¬ ' + (idx + 1) + ' ä¸ªç¬é—´'));

            dot.addEventListener('click', function () {
              if (travelSwiper) {
                travelSwiper.slideTo(idx, 600);
              }
            });

            disc.appendChild(dot);
            travelDiscDots.push(dot);
          });

          // æ˜Ÿç›˜ä¸­å¿ƒæ–‡æ¡ˆ
          const centerNode = document.createElement('div');
          centerNode.className = 'travel-disc-center';
          centerNode.innerHTML = `
              <div class="travel-disc-center-title">æ˜Ÿç›˜</div>
              <div class="travel-disc-center-sub">STEERING</div>`;
          disc.appendChild(centerNode);

          updateTravelDiscActive(0);
        }

        travelBuilt = true;
      }

      // åˆå§‹åŒ–æˆ–å¤ç”¨ Swiper å®ä¾‹ï¼Œä»…ä½œç”¨äº #travelSwiper
      if (!travelSwiper) {
        if (typeof Swiper === 'undefined') return;

        travelSwiper = new Swiper('#travelSwiper', {
          effect: 'slide',
          speed: 600,
          allowTouchMove: true,
          pagination: {
            el: '#travelSwiper .swiper-pagination',
            clickable: true
          },
          on: {
            init: function () {
              const idx = this.activeIndex || 0;
              travelLastIndex = idx;
              updateTravelDiscActive(idx);
              const disc = document.getElementById('travelDiscNav');
              if (disc) {
                disc.style.transform = 'rotate(' + (travelDiscRotation || 0) + 'deg)';
              }
            },
            slideChange: function () {
              const newIndex = this.activeIndex || 0;
              const oldIndex = typeof travelLastIndex === 'number' ? travelLastIndex : 0;
              let totalSlides = this.slides && this.slides.length ? this.slides.length : 1;
              if (totalSlides < 1) totalSlides = 1;

              const delta = newIndex - oldIndex;
              if (delta !== 0) {
                const steps = Math.abs(delta);
                const baseStep = 360 / totalSlides;
                const dir = delta > 0 ? -1 : 1; // å‘å³åˆ‡å›¾æ—¶æ˜Ÿç›˜å‘å·¦è½¬ï¼Œåä¹‹äº¦ç„¶
                travelDiscRotation += dir * baseStep * steps;
              }

              const disc = document.getElementById('travelDiscNav');
              if (disc) {
                disc.style.transform = 'rotate(' + travelDiscRotation + 'deg)';
              }

              travelLastIndex = newIndex;
              updateTravelDiscActive(newIndex);
            }
          },
          breakpoints: {
            320: {
              slidesPerView: 1
            },
            768: {
              slidesPerView: 1
            }
          }
        });
      } else {
        travelSwiper.update();
      }
    }
// æ˜¾ç¤ºäº‹ä»¶æ¨¡æ€æ¡†
    
function showEventModal(dateKey){
  const modal = document.getElementById('eventModal');
  const titleEl = document.getElementById('modalTitle');
  const contentEl = document.getElementById('eventContent');
  const dateEl = document.getElementById('eventDate');
  const stage = document.getElementById('eventStage');
  // const thumbs = document.getElementById('eventThumbs');
  const prevBtn = modal.querySelector('.eg-prev');
  const nextBtn = modal.querySelector('.eg-next');

  const e = events[dateKey];
  if(!e) return;

  // åª’ä½“æ•°ç»„ï¼šä¼˜å…ˆ imagesï¼›å¦åˆ™å›é€€ image
  const media = Array.isArray(e.images) && e.images.length ? e.images.slice()
               : (e.image ? [e.image] : []);

  let cur = 0;

  function render(){
    // èˆå°
    stage.innerHTML = '';
    if(media.length){
      const img = document.createElement('img');
      img.src = media[cur];
      img.alt = e.title || 'event photo';
      stage.appendChild(img);
    }

    // ç¼©ç•¥å›¾
    // thumbs.innerHTML = '';
    // media.forEach((src, i)=>{
    //   const b = document.createElement('button');
    //   b.innerHTML = `<img src="${src}" alt="">`;
    //   if(i===cur) b.classList.add('is-active');
    //   b.addEventListener('click', ()=>{ cur = i; render(); });
    //   thumbs.appendChild(b);
    // });

    // å¯¼èˆªæ˜¾éš
    const showNav = media.length>1;
    prevBtn.style.display = nextBtn.style.display = showNav ? '' : 'none';
    prevBtn.disabled = (cur===0);
    nextBtn.disabled = (cur===media.length-1);
  }

  function showPrev(){ if(cur>0){ cur--; render(); } }
  function showNext(){ if(cur < media.length-1){ cur++; render(); } }

  // æ–‡æœ¬
  titleEl.textContent = e.title || 'äº‹ä»¶è¯¦æƒ…';
  contentEl.textContent = e.content || '';
  dateEl.textContent = e.date || dateKey;

  // äº‹ä»¶ç»‘å®š
  prevBtn.onclick = showPrev;
  nextBtn.onclick = showNext;

  function onKey(ev){
    if(modal.style.display !== 'block') return;
    if(ev.key === 'ArrowLeft') showPrev();
    if(ev.key === 'ArrowRight') showNext();
    if(ev.key === 'Escape') closeModal();
  }
  document.addEventListener('keydown', onKey, { once:true });

  // è§¦æ‘¸æ»‘åŠ¨
  let sx=0;
  stage.ontouchstart = (ev)=>{ sx = ev.touches[0].clientX; };
  stage.ontouchend = (ev)=>{
    const dx = ev.changedTouches[0].clientX - sx;
    if(Math.abs(dx)>40){ dx<0 ? showNext() : showPrev(); }
  };

  render();
  modal.style.display = 'block';
}



    // å…³é—­æ¨¡æ€æ¡†
    function closeModal() {
      document.getElementById('eventModal').style.display = 'none';
    }
  </script>

  <script>
    // ===== Lazy Section System =====
    (function () {
      const OPTS = {
        threshold: 0.15,
        rootMargin: "0px 0px -10% 0px"
      };

      function lazyLoadMedia(container) {
        // Upgrade <img loading>, swap data-src if present
        container.querySelectorAll('img').forEach(img => {
          if (!img.hasAttribute('loading')) img.setAttribute('loading', 'lazy');
          if (img.dataset && img.dataset.src && !img.dataset._swapped) {
            img.src = img.dataset.src;
            img.dataset._swapped = "1";
          }
        });
        // Backgrounds via data-bg
        container.querySelectorAll('[data-bg]').forEach(el => {
          if (!el.dataset._bgApplied) {
            const url = el.getAttribute('data-bg');
            if (url) {
              el.style.backgroundImage = `url("${url}")`;
              el.dataset._bgApplied = "1";
            }
          }
        });
        // Autoplay videos
        container.querySelectorAll('video[autoplay]').forEach(v => {
          if (v.paused) { try { v.play().catch(() => { }); } catch (e) { } }
        });
      }

      function unloadMedia(container) {
        // Pause videos
        container.querySelectorAll('video').forEach(v => { try { v.pause(); } catch (e) { } });
        // Optionally clear heavy dynamic areas if author opted in
        // If an element carries data-unmount selector, empty those children
        container.querySelectorAll('[data-unmount]').forEach(el => { el.innerHTML = ''; });
        // We intentionally do not destroy carousels/swipers here to avoid breaking re-entry;
        // hiding is typically enough for performance.
      }

      document.addEventListener('DOMContentLoaded', function () {
        const allSections = Array.from(document.querySelectorAll('section'));
        // Mark heavy sections to support unload behavior
        allSections.forEach(sec => {
          // Skip the very first visible section (commonly ".active")
          if (!sec.classList.contains('active')) {
            sec.classList.add('lazy-hidden');
          }
          // Default: make images within sections lazy
          sec.querySelectorAll('img').forEach(img => {
            if (!img.hasAttribute('loading')) img.setAttribute('loading', 'lazy');
          });
          // Heavier sections that can unload when off-screen
          if (sec.id === 'travelView' || sec.id === 'awards') {
            sec.dataset.unload = "1";
          }
        });

        const io = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            const el = entry.target;
            if (entry.isIntersecting) {
              el.classList.add('lazy-show');
              el.classList.remove('lazy-hidden');
              // Stagger immediate children for a softer reveal
              const kids = Array.from(el.children);
              kids.forEach((child, idx) => {
                // Skip elements that are purely structural (script/style)
                const tag = child.tagName;
                if (tag === 'SCRIPT' || tag === 'STYLE') return;
                child.classList.add('reveal-child');
                // æ§åˆ¶çº§è”æ˜¾ç¤ºå»¶æ—¶
                child.style.transitionDelay = (idx * 100) + 'ms';
                // Force reflow then toggle
                requestAnimationFrame(() => child.classList.add('show'));
                if (el.id === 'travelView') { try { ensureTravelAlbum(); } catch (e) { } }
              });
              lazyLoadMedia(el);
            } else {
              el.classList.remove('lazy-show');
              el.classList.add('lazy-hidden');
              Array.from(el.children).forEach(ch => {
                ch.classList.remove('show');
                ch.style.transitionDelay = '';
              });
              if (el.dataset.unload === "1") {
                unloadMedia(el);
              }
            }
          });
        }, OPTS);

        allSections.forEach(sec => io.observe(sec));
      });
    })();
  </script>


  <script id="aw-patch-20250930">/* === aw-patch-20250930: ensure .aw-modal sits at <body> top-level to avoid being covered === */
    (function () {
      function ensureModalAtBody(modal) {
        if (!modal) return;
        try {
          if (modal.parentElement !== document.body) {
            document.body.appendChild(modal);
          }
          // Prevent background scroll
          document.body.style.overflow = 'hidden';
        } catch (e) { }
      }

      // 2.1 Hook common openModal if present
      try {
        var _openModal = window.openModal;
        if (typeof _openModal === 'function' && !_openModal.__aw_patched__) {
          window.openModal = function () {
            var res = _openModal.apply(this, arguments);
            var modal = document.querySelector('.aw-modal');
            ensureModalAtBody(modal);
            return res;
          };
          window.openModal.__aw_patched__ = true;
        }
      } catch (e) { }

      // 2.2 MutationObserver fallback: watch .aw-modal aria-hidden changes
      try {
        var modal = document.querySelector('.aw-modal');
        if (modal) {
          var obs = new MutationObserver(function (muts) {
            muts.forEach(function (m) {
              if (m.type === 'attributes' && (m.attributeName === 'style' || m.attributeName === 'aria-hidden')) {
                var isHidden = modal.getAttribute('aria-hidden');
                // When shown (null or "false"), move to body
                if (isHidden === null || isHidden === 'false' || modal.style.display === 'block' || modal.style.visibility === 'visible') {
                  ensureModalAtBody(modal);
                  // Make sure z-index is high
                  modal.style.zIndex = getComputedStyle(document.documentElement).getPropertyValue('--aw-z-modal').trim() || '4000';
                }
              }
            });
          });
          obs.observe(modal, { attributes: true, attributeFilter: ['style', 'aria-hidden'] });
        }
      } catch (e) { }
    })();
    /// === end aw-patch-20250930 ===</script>

    <script charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=BBCBZ-OEZKJ-FYJFW-KK45G-T7HSH-YNFMO"></script>
<script id="map-script-20251128">
  // ===== Tencent Map: è¶³è¿¹åœ°å›¾ï¼ˆåŒæ­¥åŠ è½½ç‰ˆï¼Œæ—  document.write æŠ¥é”™ï¼‰ =====
  (function () {
    let map = null;
    let markerCluster = null;
    const allMarkers = [];
    const SECTION_ID = 'mapView';

    // å°è£… LatLngï¼Œå…¼å®¹ qq.maps.LatLng åŠé™çº§ä¸ºæ™®é€šå¯¹è±¡
    function makeLatLng(lat, lng) {
      if (!isFinite(lat) || !isFinite(lng)) return null;
      if (window.qq && qq.maps && typeof qq.maps.LatLng === 'function') {
        try {
          return new qq.maps.LatLng(lat, lng);
        } catch (e) {}
      }
      return {
        lat: lat,
        lng: lng,
        getLat: function () { return lat; },
        getLng: function () { return lng; }
      };
    }

    // è§£æ [lng,lat] / [lat,lng]
    function parseLatLng(raw) {
      if (!Array.isArray(raw) || raw.length < 2) return null;
      const a0 = (typeof raw[0] === 'string') ? raw[0].trim() : raw[0];
      const a1 = (typeof raw[1] === 'string') ? raw[1].trim() : raw[1];
      let x = parseFloat(a0), y = parseFloat(a1);
      if (!isFinite(x) || !isFinite(y)) return null;

      const looksLatLng = Math.abs(x) <= 90 && Math.abs(y) <= 180;
      const looksLngLat = Math.abs(x) <= 180 && Math.abs(y) <= 90;
      let lat, lng;

      if (looksLatLng && !looksLngLat) {
        lat = x; lng = y; // [lat, lng]
      } else if (!looksLatLng && looksLngLat) {
        lat = y; lng = x; // [lng, lat]
      } else {
        lat = y; lng = x; // é»˜è®¤æŒ‰ [lng, lat]
      }

      if (!(Math.abs(lat) <= 90 && Math.abs(lng) <= 180)) return null;
      return makeLatLng(lat, lng);
    }

    function ensureMap() {
      if (map) return;

      if (!window.qq || !qq.maps) {
        console.error('[TencentMap] JS API æœªåŠ è½½ï¼Œè¯·ç¡®è®¤å·²åœ¨é¡µé¢ä¸­å¼•å…¥ï¼š',
          'https://map.qq.com/api/js?v=2.exp&key=YOUR_KEY');
        return;
      }

      const container = document.getElementById('tmapContainer');
      if (!container) return;

      const center = makeLatLng(35.0, 105.0) || new qq.maps.LatLng(35.0, 105.0);
      const options = {
        zoom: 4,
        center: center,
        // Tencent JS v2 ä½¿ç”¨å­—ç¬¦ä¸² mapTypeIdï¼Œè€Œä¸æ˜¯ qq.maps.MapTypeId.XXX
        mapTypeId: 'roadmap'
      };

      map = new qq.maps.Map(container, options);

      const resetBtn = document.getElementById('mapResetBtn');
      if (resetBtn) {
        resetBtn.addEventListener('click', function () {
          map.setZoom(4);
          map.panTo(center);
        });
      }

      // æ·»åŠ äº‹ä»¶ç‚¹
      addEventMarkers();
      window._MOTY_map = map;
    }

    function addEventMarkers() {
      if (!window.qq || !qq.maps || !map) return;

      const src = window.mapEvents || [];
      let list = [];
      if (Array.isArray(src)) {
        list = src.slice();
      } else {
        for (const k in src) {
          if (Object.prototype.hasOwnProperty.call(src, k)) {
            const v = src[k] || {};
            v.id = v.id || k;
            list.push(v);
          }
        }
      }

      const isTravel = function (e) { return e && (e.type === 'travel' || e.travel === true); };
      const hasLoc = function (e) { return e && e.location && String(e.location).trim().length > 0; };
      const hasLngLat = function (e) { return e && Array.isArray(e.lnglat) && e.lnglat.length >= 2; };

      const travel = list.filter(function (e) { return isTravel(e) && (hasLoc(e) || hasLngLat(e)); });
      const others = list.filter(function (e) { return !isTravel(e) && (hasLoc(e) || hasLngLat(e)); });

      const tasks = [];
      const markers = [];

      function makeMarker(latlng, e, type) {
        if (!latlng) return;

        const parts = [];
        if (e.date || e.dateKey) parts.push(e.date || e.dateKey);
        if (e.title) parts.push(e.title);
        const title = parts.join(' Â· ') || 'è¶³è¿¹';

        const marker = new qq.maps.Marker({
          position: latlng,
          map: map,
          title: title
        });

        qq.maps.event.addListener(marker, 'click', function () {
          try {
            const currentZoom = map.getZoom();
            map.setZoom(Math.max(currentZoom || 8, 8));
          } catch (e) {}

          map.panTo(marker.getPosition());

          const data = e || {};
          const html =
            '<div style="max-width:260px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;">' +
              '<div style="font-weight:600;font-size:14px;margin-bottom:4px;">' + (data.title || 'äº‹ä»¶') + '</div>' +
              '<div style="font-size:12px;color:#4b5563;margin-bottom:6px;">' +
                (data.date || data.dateKey || '') +
                (data.location ? ' Â· ' + data.location : '') +
              '</div>' +
              (data.lnglat && Array.isArray(data.lnglat)
                ? '<div style="font-size:11px;color:#6b7280;margin-bottom:6px;">åæ ‡: ' + data.lnglat.join(',') + '</div>'
                : '') +
              (data.image
                ? '<img src="' + data.image + '" alt="" data-zoom-map="event" style="width:100%;height:120px;object-fit:cover;border-radius:8px;margin-bottom:8px"/>'
                : '') +
              '<div style="font-size:12px;color:#374151;line-height:1.6">' +
                String(data.description || data.content || '').slice(0, 120) + '...' +
              '</div>' +
            '</div>';

          const info = new qq.maps.InfoWindow({
            map: map
          });
          info.open();
          info.setContent(html);
          info.setPosition(marker.getPosition());
        });

        markers.push(marker);
        allMarkers.push(marker);
      }

      function pushTask(e, type) {
        return new Promise(function (resolve) {
          const direct = hasLngLat(e) ? parseLatLng(e.lnglat) : null;
          if (direct) {
            makeMarker(direct, e, type);
            resolve();
            return;
          }

          if (hasLoc(e)) {
            try {
              const g = new qq.maps.Geocoder();
              g.setComplete(function (result) {
                try {
                  const loc = result.detail && result.detail.location;
                  if (loc) {
                    const latlng = makeLatLng(loc.lat, loc.lng);
                    makeMarker(latlng, e, type);
                  }
                } catch (err) {}
                resolve();
              });
              g.setError(function () { resolve(); });
              g.getLocation(e.location);
            } catch (err) {
              resolve();
            }
          } else {
            resolve();
          }
        });
      }

      travel.forEach(function (e) { tasks.push(pushTask(e, 'travel')); });
      others.forEach(function (e) { tasks.push(pushTask(e, 'other')); });

      Promise.all(tasks).then(function () {
        if (!markers.length) return;

        let minLat = 90, maxLat = -90, minLng = 180, maxLng = -180;
        markers.forEach(function (m) {
          if (!m || !m.getPosition) return;
          const p = m.getPosition();
          if (!p) return;
          const lat = p.getLat ? p.getLat() : p.lat;
          const lng = p.getLng ? p.getLng() : p.lng;
          if (!isFinite(lat) || !isFinite(lng)) return;
          if (lat < minLat) minLat = lat;
          if (lat > maxLat) maxLat = lat;
          if (lng < minLng) minLng = lng;
          if (lng > maxLng) maxLng = lng;
        });

        if (isFinite(minLat) && isFinite(maxLat) && isFinite(minLng) && isFinite(maxLng)) {
          try {
            const sw = makeLatLng(minLat, minLng);
            const ne = makeLatLng(maxLat, maxLng);
            if (sw && ne && qq.maps.LatLngBounds) {
              const bounds = new qq.maps.LatLngBounds(sw, ne);
              map.fitBounds(bounds);
            }
          } catch (e) {}
        }

        try {
          if (qq && qq.maps && qq.maps.MarkerCluster && markers.length > 1) {
            const mvc = new qq.maps.MVCArray(markers);
            markerCluster = new qq.maps.MarkerCluster({
              map: map,
              markers: mvc,
              minimumClusterSize: 2,
              gridSize: 80,
              zoomOnClick: true,
              averageCenter: true,
              maxZoom: 18
            });
          }
        } catch (e) {}
      });
    }

    document.addEventListener('DOMContentLoaded', function () {
      // Tab åˆ‡æ¢åˆ°â€œåœ°å›¾â€æ—¶å†åˆå§‹åŒ–
      const navBtn = document.querySelector('.nav-btn[data-section="mapView"]');
      if (navBtn) {
        navBtn.addEventListener('click', function () {
          setTimeout(ensureMap, 0);
        });
      }

      const sec = document.getElementById(SECTION_ID);
      if (sec && 'IntersectionObserver' in window) {
        const io = new IntersectionObserver(function (ents) {
          ents.forEach(function (en) {
            if (en.isIntersecting) ensureMap();
          });
        }, { threshold: 0.2 });
        io.observe(sec);
      }
    });
  })();
</script>



  <script>
    window.mapEvents = [
      { title: "æ±ŸåŸç•™å½±", type: "travel", lnglat: [114.31,30.55], image: "./pic/event29.avif", date: "2025-10-10", description: "åœ¨æ—¶ç©ºé‡Œä¸å¥¹äº¤ç»‡" },
      { title: "é¹åŸå¸¸é’",  type: "travel",  lnglat: [114.03,22.65], image: "./pic/event24.avif", date: "2025-08-03", content: "å°†æœŸè®¸åŒ–ä¸ºæ’ä¹…" },
      { title: "æ»¨æµ·ç¼©å½±",  type: "other",  lnglat: [117.72,39.01], image: "./pic/event31.avif", date: "2025-04-05", content: "åº†ä½™å¹´ç•™ä½™åº†" },
      { title: "æ›¼æ¸¸ä¸­å›½",  type: "other",  lnglat: [117.19225,39.119155], image: "./pic/event34.avif", date: "2025-11-22", content: "å¦‚æœä½ ä¹Ÿæ›¾æ¥è¿‡" },
      { title: "å±±åŸå°èš",  type: "other",  lnglat: [106.438194,29.519834], image: "./pic/event11.avif", date: "2025-07-01", content: "ä¸€æ®µæš‚æ€ä¹‹æ—…" },
      { title: "å¯¹å½±å¦‚æœˆ",  type: "travel",  lnglat: [22.518931,113.982434], image: "./pic/event35.avif", date: "2025-11-29", content: "é»„æ˜æµ·é£å’Œä½ " },
      { title: "çˆ±ä½ æ­æ¡£",  type: "travel",  lnglat: [22.533672,114.059218], image: "./pic/event35-2.avif", date: "2025-11-29", content: "å½¼æ­¤çš„å…”å­çª" },
    ];
  </script>

<script id="tourView-hover-init">
  (function () {
    function buildHoverAreas(root) {
      if (!root) return;
      const areas = root.querySelectorAll('.tour-hover-area');
      areas.forEach(area => {
        const parent = area.closest('.tour-ticket-eraser');
        let maxA = 30;
        if (parent) {
          const styleVal = parent.style.getPropertyValue('--max-a');
          const parsed = parseInt(styleVal, 10);
          if (!isNaN(parsed) && parsed > 0) maxA = parsed;
        }
        const total = maxA * 7;
        const current = area.children.length;
        for (let i = current; i < total; i++) {
          area.appendChild(document.createElement('i'));
        }
      });
    }

    document.addEventListener('DOMContentLoaded', function () {
      const tourSection = document.getElementById('tourView');
      if (tourSection) {
        buildHoverAreas(tourSection);
      }
    });

    window.buildTourHoverAreas = buildHoverAreas;
  })();
</script>

<style>
  :root{ --imgzoom-z: 5000; }
  .imgzoom{ position:fixed; inset:0; display:none; z-index:var(--imgzoom-z); }
  .imgzoom[aria-hidden="false"]{ display:block; }
  .imgzoom__backdrop{
    position:absolute; inset:0; background:rgba(0,0,0,.85);
    animation: imgzoom-fade .18s ease;
  }
  .imgzoom__dialog{
    position:absolute; inset:0; display:grid; place-items:center;
    padding: min(4vh,24px);
  }
  .imgzoom__img{
    max-width: 96vw; max-height: 92vh;
    box-shadow: 0 20px 80px rgba(0,0,0,.5);
    border-radius: 12px; background:#0b1220;
    transform-origin: center center; transition: transform .15s ease;
    cursor: zoom-out;
  }
  .imgzoom__close{
    position:absolute; top:16px; right:16px; width:44px; height:44px;
    border-radius:999px; border:1px solid #ffffff33; background:#ffffff1a;
    color:#fff; font-size:20px; cursor:pointer;
  }
  @keyframes imgzoom-fade{ from{opacity:0} to{opacity:1} }
  /* å…è®¸æ—…æ¸¸ç›¸å†ŒèƒŒæ™¯å›¾è¢«ç‚¹å‡»ï¼ˆè‹¥åŸæ ·å¼ä¸º pointer-events:noneï¼Œåˆ™è¦†ç›–ï¼‰ */
  .travel-photo{ pointer-events: none !important; }
</style>

<div class="imgzoom" id="imgZoom" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="imgzoom__backdrop" data-zoom-close></div>
  <div class="imgzoom__dialog">
    <img alt="" class="imgzoom__img" id="imgZoomImg">
    <button class="imgzoom__close" title="å…³é—­ï¼ˆEscï¼‰" aria-label="å…³é—­" data-zoom-close>âœ•</button>
  </div>
</div>

<script>
(function () {
  if (window.__IMG_ZOOM_INSTALLED__) return; // é˜²é‡å¤æ³¨å…¥
  window.__IMG_ZOOM_INSTALLED__ = true;

  const zoom = document.getElementById('imgZoom');
  const zoomImg = document.getElementById('imgZoomImg');
  let scale = 1, startX = 0, startY = 0, curX = 0, curY = 0, dragging = false;

  function canZoomTarget(el){
    if (!(el instanceof HTMLImageElement)) return false;
    if (el.dataset.nozoom !== undefined) return false; // æ‰‹åŠ¨æ’é™¤
    return true;
  }

  function openZoom(img){
    zoomImg.src = img.dataset.zoomSrc || img.currentSrc || img.src;
    zoom.setAttribute('aria-hidden','false');
    document.body.style.overflow = 'hidden';
    resetTransform();
    zoomImg.addEventListener('dblclick', onDbl);
  }

  function closeZoom(){
    zoom.setAttribute('aria-hidden','true');
    document.body.style.overflow = '';
    zoomImg.removeEventListener('dblclick', onDbl);
    zoomImg.src = '';
    resetTransform();
  }

  function resetTransform(){
    scale = 1; curX = curY = 0;
    zoomImg.style.transform = 'translate3d(0,0,0) scale(1)';
  }

  function onWheel(e){
    e.preventDefault();
    const delta = Math.sign(e.deltaY) * -0.12;
    const newScale = Math.min(4, Math.max(1, scale + delta));
    if (newScale !== scale){
      const rect = zoomImg.getBoundingClientRect();
      const cx = e.clientX - (rect.left + rect.width/2);
      const cy = e.clientY - (rect.top + rect.height/2);
      curX -= cx * (newScale/scale - 1);
      curY -= cy * (newScale/scale - 1);
      scale = newScale;
      applyTransform();
    }
  }

  function onDbl(){
    if (scale === 1){ scale = 2; applyTransform(); }
    else { resetTransform(); }
  }

  function applyTransform(){
    const limit = 300;
    curX = Math.max(-limit, Math.min(limit, curX));
    curY = Math.max(-limit, Math.min(limit, curY));
    zoomImg.style.transform = 'translate3d(' + curX + 'px,' + curY + 'px,0) scale(' + scale + ')';
  }

  function onDown(e){
    if (scale === 1) return;
    dragging = true;
    const p = getPoint(e);
    startX = p.x - curX; startY = p.y - curY;
  }
  function onMove(e){
    if (!dragging) return;
    const p = getPoint(e);
    curX = p.x - startX; curY = p.y - startY;
    applyTransform();
  }
  function onUp(){ dragging = false; }

  function getPoint(e){
    if (e.touches && e.touches[0]) return { x:e.touches[0].clientX, y:e.touches[0].clientY };
    return { x:e.clientX, y:e.clientY };
  }

  // å§”æ‰˜ï¼šç‚¹å‡»ä»»æ„ <img> æ‰“å¼€
  document.addEventListener('click', (e)=>{
    const img = e.target.closest && e.target.closest('img');
    if (!img || !canZoomTarget(img)) return;

    // åœ°å›¾ section ç‰¹ä¾‹å¤„ç†ï¼š
    // åœ¨ #mapView åŒºåŸŸå†…ï¼Œåªæœ‰æ ‡è®°ä¸º data-zoom-map="event" çš„å›¾ç‰‡æ‰å…è®¸æ”¾å¤§ã€‚
    const mapSection = document.getElementById('mapView');
    if (mapSection && mapSection.contains(img)) {
      if (!img.dataset.zoomMap || img.dataset.zoomMap !== 'event') return;
    }

    // è€çš„é«˜å¾· marker å…¼å®¹ï¼ˆå¦‚æœæŸäº›åœ°æ–¹ä»ç„¶å­˜åœ¨ï¼‰
    if (img.closest(".amap-marker")) return;

    // æŒ‰é’®ã€å¯¼èˆªç±»å›¾æ ‡é‡Œçš„ <img> ä¸è§¦å‘æ”¾å¤§
    if (img.closest('button,[role="button"],.swiper-button-next,.swiper-button-prev')) return;

    openZoom(img);
  });

  // å…³é—­é€»è¾‘
  zoom.addEventListener('click', (e)=>{ if (e.target.hasAttribute('data-zoom-close')) closeZoom(); });
  document.addEventListener('keydown', (e)=>{
    if (zoom.getAttribute('aria-hidden') === 'false' && e.key === 'Escape') closeZoom();
  });

  // äº¤äº’ï¼šæ»šè½®ç¼©æ”¾ã€æ‹–æ‹½ç§»åŠ¨ã€è§¦æ‘¸
  zoomImg.addEventListener('wheel', onWheel, { passive:false });
  zoomImg.addEventListener('mousedown', onDown);
  window.addEventListener('mousemove', onMove);
  window.addEventListener('mouseup', onUp);
  zoomImg.addEventListener('touchstart', onDown, { passive:false });
  zoomImg.addEventListener('touchmove', onMove, { passive:false });
  zoomImg.addEventListener('touchend', onUp, { passive:true });
})();
</script>

<script>
(function(){
  const root = document.documentElement;
  const thresh = 10;              // è¶…è¿‡ 10px è§†ä¸ºå¼€å§‹æ»šåŠ¨ï¼Œå¯æŒ‰éœ€è°ƒå¤§åˆ° var(--logo-height)
  let last = -1;

  function onScroll(){
    const y = window.scrollY || document.documentElement.scrollTop || 0;
    const shouldStick = y > thresh;
    // åªåœ¨çŠ¶æ€å˜åŒ–æ—¶å¤„ç†ï¼Œé¿å…æ— è°“é‡æ’
    if ((shouldStick ? 1 : 0) !== last){
      root.classList.toggle('is-stuck', shouldStick);
      last = shouldStick ? 1 : 0;
    }
  }

  // åˆæ¬¡è¿›æ¥ & æ»šåŠ¨æ—¶éƒ½æ£€æŸ¥ä¸€æ¬¡
  window.addEventListener('scroll', onScroll, { passive: true });
  window.addEventListener('load', onScroll);
})();
</script>

<script>
(function(){
  // === ä½ çš„å››å¼ å›¾ç‰‡ï¼šæŒ‰é¡ºåºæ·¡å‡ºè½®æ’­ ===
  const introImages = [
    "./pic/spring.avif",        // 1  â†
    "./pic/summer.avif",        // 2  â†
    "./pic/autumn.avif",        // 3  â† 
    "./pic/winter.avif"         // 4  â† 
  ];

  const slides = document.querySelectorAll('#introHero .intro-slide');
  slides.forEach((el, i) => {
    const url = introImages[i % introImages.length];
    el.style.backgroundImage = `url("${url}")`;
  });

  // è®© CSS èƒŒæ™¯è¯»å–å˜é‡ï¼ˆå¦‚æœä½ æ›´å–œæ¬¢ç”¨å˜é‡ï¼‰ï¼š
  slides.forEach(el => {
    const bg = el.style.backgroundImage;
    el.style.setProperty('background-image', bg);
  });

  // ===== å¦‚æœä½ å·²æœ‰ section åˆ‡æ¢é€»è¾‘ï¼Œè¿™é‡Œåªè´Ÿè´£é¦–æ¬¡é»˜è®¤åˆ°å¯¼è¨€ =====
  // ï¼ˆç¡®ä¿â€œå¯¼è¨€â€æŒ‰é’®æœ‰ .activeï¼Œå…¶å®ƒå»æ‰ .activeï¼‰
  const navBtns = document.querySelectorAll('.nav-btn');
  navBtns.forEach(btn => {
    if(btn.dataset.section === 'introView'){
      btn.classList.add('active');
    }else{
      btn.classList.remove('active');
    }
  });
  // å±•ç¤ºå¯¼è¨€ï¼Œéšè—å…¶ä»–
  document.querySelectorAll('.section').forEach(sec=>{
    if(sec.id === 'introView'){ sec.classList.add('active'); }
    else{ sec.classList.remove('active'); }
  });
})();
</script>


<!-- === BEGIN: IntroView Crossfade Patch === -->
<style>
/* å¯¼è¨€è½®æ’­åŸºç¡€å±‚å ä¸äº¤å‰æ·¡å…¥ */
#introView .intro-hero { position: relative; overflow: hidden; }
#introView .slides { position: relative; height: 100%; }
#introView .slide {
  position: absolute; inset: 0;
  opacity: 0;
  transition: opacity 800ms ease;
  will-change: opacity;
  pointer-events: none;
}
#introView .slide.is-active { opacity: 1; z-index: 2; }

/* Ken Burns è½»å¾®ç¼©æ”¾ */
#introView .slide img {
  width: 100%; height: 100%; object-fit: cover;
  transform: scale(1.02);
  transition: transform 6s linear;
  will-change: transform;
}
#introView .slide.is-active img { transform: scale(1.08); }

/* åˆæ¬¡åŠ è½½é¿å…é—ªç™½ï¼ˆè„šæœ¬ä¼šåœ¨ decode åç§»é™¤ï¼‰ */
#introView .slide.is-ready { opacity: 0; }

/* å¦‚æœä¿ç•™ .section é»˜è®¤å†…è¾¹è·ï¼Œå¯¼è¨€å»ºè®®å»æ‰ï¼Œé¿å…ä¸å¯¼èˆªé—´å‡ºç°é—´éš™ */
#introView.section{ padding: 0 !important; }

@media (prefers-reduced-motion: reduce) {
  #introView .slide { transition: none; }
  #introView .slide img { transition: none; transform: none; }
}
</style>

<script>
// IntroView äº¤å‰æ·¡å…¥ + é¢„è§£ç  + è½»å¾® Ken Burns
(function initIntroCrossfade(){
  const root = document.querySelector('#introView .slides');
  if (!root) return;
  const slides = Array.from(root.querySelectorAll('.slide'));
  if (slides.length === 0) return;

  let idx = slides.findIndex(s => s.classList.contains('is-active'));
  if (idx < 0) idx = 0;

  // åˆå§‹ï¼šä»…ä¸€å¼ æ¿€æ´»
  slides.forEach((s,i)=> s.classList.toggle('is-active', i===idx));

  // é¢„åŠ è½½/é¢„è§£ç ï¼Œé¿å…åˆ‡æ¢å¼¹å˜
  slides.forEach(s => {
    const img = s.querySelector('img');
    if (img) {
      if (img.decoding !== 'async') img.setAttribute('decoding','async');
      if (!img.complete && img.decode) {
        img.decode().catch(()=>{}).finally(()=> s.classList.add('is-ready'));
      } else {
        s.classList.add('is-ready');
      }
    }
  });

  let timer = null;
  let switching = false;
  const intervalMs = 5000;  // æ¯å¼ åœç•™æ—¶é•¿
  const fadeMs = 800;       // ä¸ CSS è¿‡æ¸¡ä¸€è‡´

  async function preload(i){
    const s = slides[i];
    const img = s && s.querySelector('img');
    if (!img) return;
    if (img.complete) return;
    try { await img.decode?.(); } catch(e){}
  }

  async function go(next){
    if (switching) return;
    switching = true;
    const nextIdx = (typeof next === 'number') ? ((next % slides.length) + slides.length) % slides.length
                                               : (idx + 1) % slides.length;
    await preload(nextIdx);
    slides[idx].classList.remove('is-active');
    slides[nextIdx].classList.add('is-active');
    await new Promise(r => setTimeout(r, fadeMs + 20));
    idx = nextIdx;
    switching = false;
  }

  function start(){ stop(); timer = setInterval(go, intervalMs); }
  function stop(){ if (timer) { clearInterval(timer); timer = null; } }

  // å½“ introView å¯è§æ—¶æ‰æ’­æ”¾ï¼ˆå‡è®¾é¡µé¢ç”¨ .section.active åˆ‡æ¢ï¼‰
  function inIntro(){ return document.querySelector('#introView.section.active'); }
  const mo = new MutationObserver(()=> { if (inIntro()) start(); else stop(); });
  document.querySelectorAll('.section').forEach(sec => {
    mo.observe(sec, {attributes:true, attributeFilter:['class']});
  });

  // é¡µé¢åˆå§‹çŠ¶æ€
  if (inIntro() || document.querySelector('#introView')?.classList.contains('active')) start();

  // å¯é€‰ï¼šå¦‚æœæœ‰åœ†ç‚¹/æŒ‰é’®ï¼Œæ”¯æŒ data-slide-to è·³è½¬
  root.addEventListener('click', e => {
    const dot = e.target.closest('[data-slide-to]');
    if (!dot) return;
    const n = parseInt(dot.getAttribute('data-slide-to'), 10) || 0;
    go(n);
    start();
  });

  // æ ‡ç­¾é¡µéšè—æ—¶æš‚åœ
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) stop(); else if (inIntro()) start();
  });
})();
</script>
<!-- === END: IntroView Crossfade Patch === -->


<script id="introView-mobile-js">
  (function(){
    const hero = document.getElementById('introHero');
    if (hero){
      const slides = hero.querySelectorAll('.intro-slide');
      const imgs = [
        './pic/spring.avif',
        './pic/summer.avif',
        './pic/autumn.avif',
        './pic/winter.avif'
      ];
      slides.forEach((el, i) => el.style.setProperty('--bg', `url('${imgs[i % imgs.length]}')`));
    }
    const setVh = () => {
      document.documentElement.style.setProperty('--vhpx', String(window.visualViewport ? window.visualViewport.height : window.innerHeight));
    };
    setVh();
    window.addEventListener('resize', setVh);
    if (window.visualViewport) window.visualViewport.addEventListener('resize', setVh);
  })();
</script>

<script id="tourView-swiper-init">
  (function () {
    let tourSwiper = null;
    let tourBuilt = false;

    function buildHoverAreas(root) {
      if (!root) return;
      const areas = root.querySelectorAll('.tour-hover-area');
      areas.forEach(area => {
        const parent = area.closest('.tour-ticket-eraser');
        let maxA = 30;
        if (parent) {
          const styleVal = parent.style.getPropertyValue('--max-a');
          const parsed = parseInt(styleVal, 10);
          if (!isNaN(parsed) && parsed > 0) maxA = parsed;
        }
        const total = maxA * 7;
        const current = area.children.length;
        for (let i = current; i < total; i++) {
          area.appendChild(document.createElement('i'));
        }
      });
    }

    function ensureTourSwiper() {
      const container = document.getElementById('tourSwiper');
      if (!container) return;

      if (!tourBuilt) {
        buildHoverAreas(container);
        tourBuilt = true;
      }

      if (!tourSwiper && window.Swiper) {
        tourSwiper = new Swiper('#tourSwiper', {
          loop: true,
          effect: 'fade',
          fadeEffect: { crossFade: true },
          pagination: {
            el: '#tourSwiper .swiper-pagination',
            clickable: true
          },
          navigation: {
            nextEl: '#tourSwiper .swiper-button-next',
            prevEl: '#tourSwiper .swiper-button-prev'
          },
          autoplay: {
            delay: 2600,
            disableOnInteraction: false
          },
          observer: true,
          observeParents: true
        });
      } else if (tourSwiper) {
        try { tourSwiper.update(); } catch (e) {}
      }
    }

    document.addEventListener('DOMContentLoaded', function () {
      const tourBtns = document.querySelectorAll('.nav-btn[data-section="tourView"]');
      tourBtns.forEach(btn => {
        btn.addEventListener('click', function () {
          try { ensureTourSwiper(); } catch (e) {}
        });
      });

      const tourSection = document.getElementById('tourView');
      if (tourSection && tourSection.classList.contains('active')) {
        ensureTourSwiper();
      }
    });

    // Expose for other lazy loaders / observers if needed
    window.ensureTourSwiper = ensureTourSwiper;
  })();
</script>



<script>
(function() {
/***********************
     * 1. åŸå§‹æ–‡æœ¬ï¼ˆå·²å†…åµŒï¼‰
     ***********************/
    const rawText = `
2025å¹´7æœˆ11æ—¥æ™šåˆ°æ¬¡æ—¥å‡Œæ™¨æ‰“äº†132'06''å¾®ä¿¡ç”µè¯å‘¢(ç»ˆæ­¢äº1:41AM)

2025å¹´7æœˆ12æ—¥ç…²äº†117'37''ç”µè¯(0:36å¼€å§‹)

2025å¹´7æœˆ13æ—¥æ‰“äº†197'32''å¾®ä¿¡ç”µè¯è€¶(13:12å¼€å§‹)

2025å¹´7æœˆ14æ—¥ç…²äº†109'12''ç”µè¯(æ­¢äº22:35)

2025å¹´7æœˆ16æ—¥41'08''(æ··åˆ)

2025å¹´7æœˆ17æ—¥46'49''å¾®ä¿¡

2025å¹´7æœˆ19æ—¥333'01''å¾®ä¿¡

2025å¹´7æœˆ20æ—¥137'43å¾®ä¿¡   

2025å¹´7æœˆ21æ—¥130'41''å¾®ä¿¡

2025å¹´7æœˆ22æ—¥58'38''å¾®ä¿¡

2025å¹´7æœˆ23æ—¥41'52''å¾®ä¿¡

2025å¹´7æœˆ24æ—¥147'05''å¾®ä¿¡

2025å¹´7æœˆ25æ—¥122'42''å¾®ä¿¡

2025å¹´7æœˆ26æ—¥39'40''å¾®ä¿¡

2025å¹´7æœˆ27æ—¥41'52''ç”µè¯

2025å¹´7æœˆ28æ—¥131'20''å¾®ä¿¡

2025å¹´7æœˆ29æ—¥47'è…¾è®¯ä¼šè®®ï¼‹37'36''å¾®ä¿¡

2025å¹´7æœˆ30æ—¥64'20''å¾®ä¿¡

2025å¹´7æœˆ31æ—¥71'24''å¾®ä¿¡

2025å¹´8æœˆ1æ—¥78'51''å¾®ä¿¡

2025å¹´8æœˆ2æ—¥182'15''å¾®ä¿¡

2025å¹´8æœˆ11æ—¥132'02''å¾®ä¿¡

2025å¹´8æœˆ12æ—¥210'23''å¾®ä¿¡

2025å¹´8æœˆ13æ—¥190'18''å¾®ä¿¡

2025å¹´8æœˆ14æ—¥138'18''å¾®ä¿¡

2025å¹´8æœˆ15æ—¥189'44''å¾®ä¿¡

2025å¹´8æœˆ16æ—¥138'03''å¾®ä¿¡

2025å¹´8æœˆ17æ—¥143'36''å¾®ä¿¡+72'23''è§†é¢‘

2025å¹´8æœˆ18æ—¥114'56''è§†é¢‘+2'35''å¾®ä¿¡

2025å¹´8æœˆ19æ—¥82'52''å¾®ä¿¡+46'38''è§†é¢‘

2025å¹´8æœˆ20æ—¥20'32''å¾®ä¿¡ï¼‹52'00''ç”µè¯

2025å¹´8æœˆ21æ—¥62'30''å¾®ä¿¡ï¼‹30'46''è§†é¢‘

2025å¹´8æœˆ22æ—¥117'07''å¾®ä¿¡

2025å¹´8æœˆ23æ—¥34'36''ç”µè¯+87'40'å¾®ä¿¡

2025å¹´8æœˆ24æ—¥318'10''å¾®ä¿¡+54'52''ç”µè¯

2025å¹´8æœˆ25æ—¥74'29''å¾®ä¿¡

2025å¹´8æœˆ26æ—¥84'04''å¾®ä¿¡

2025å¹´8æœˆ27æ—¥71'21''å¾®ä¿¡

2025å¹´8æœˆ28æ—¥41'24''å¾®ä¿¡+32'56''ç”µè¯

2025å¹´8æœˆ29æ—¥130'32''å¾®ä¿¡

2025å¹´8æœˆ30æ—¥404'02''å¾®ä¿¡

2025å¹´8æœˆ31æ—¥144'46''å¾®ä¿¡

2025å¹´9æœˆ1æ—¥71'36''å¾®ä¿¡

2025å¹´9æœˆ2æ—¥84'25''å¾®ä¿¡

2025å¹´9æœˆ3æ—¥93'37''å¾®ä¿¡

2025å¹´9æœˆ4æ—¥133'22''å¾®ä¿¡

2025å¹´9æœˆ5æ—¥215'24''å¾®ä¿¡

2025å¹´9æœˆ6æ—¥234'55''å¾®ä¿¡

2025å¹´9æœˆ7æ—¥154'37''å¾®ä¿¡

2025å¹´9æœˆ8æ—¥60'37''å¾®ä¿¡

2025å¹´9æœˆ9æ—¥83'40''å¾®ä¿¡

2025å¹´9æœˆ10æ—¥80'51''å¾®ä¿¡

2025å¹´9æœˆ11æ—¥62'23''å¾®ä¿¡

2025å¹´9æœˆ12æ—¥22'50''å¾®ä¿¡

2025å¹´9æœˆ15æ—¥62'31''å¾®ä¿¡

2025å¹´9æœˆ16æ—¥149'16''å¾®ä¿¡

2025å¹´9æœˆ17æ—¥106'31''å¾®ä¿¡

2025å¹´9æœˆ18æ—¥161'25''å¾®ä¿¡

2025å¹´9æœˆ19æ—¥214'30''å¾®ä¿¡

2025å¹´9æœˆ20æ—¥174'31''å¾®ä¿¡+319'12''è§†é¢‘

2025å¹´9æœˆ21æ—¥340'57''å¾®ä¿¡

2025å¹´9æœˆ22æ—¥56'40''å¾®ä¿¡

2025å¹´9æœˆ23æ—¥164'06''å¾®ä¿¡

2025å¹´9æœˆ24æ—¥121'36''å¾®ä¿¡+43'29''å¾®ä¿¡è§†é¢‘

2025å¹´9æœˆ25æ—¥36'44''å¾®ä¿¡+55'40''å¾®ä¿¡è§†é¢‘

2025å¹´9æœˆ26æ—¥91'33''å¾®ä¿¡

2025å¹´9æœˆ27æ—¥714'25''å¾®ä¿¡

2025å¹´9æœˆ28æ—¥209'05''å¾®ä¿¡

2025å¹´9æœˆ29æ—¥136'58''å¾®ä¿¡

2025å¹´9æœˆ30æ—¥154'16''ç”µè¯

2025å¹´10æœˆ1æ—¥63'31''ç”µè¯

2025å¹´10æœˆ6æ—¥81'45''å¾®ä¿¡

2025å¹´10æœˆ10æ—¥166'13''å¾®ä¿¡

2025å¹´10æœˆ11æ—¥164'22å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ12æ—¥223'58''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ13æ—¥84'02''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ14æ—¥156'24''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ15æ—¥120'20''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ16æ—¥77'20''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ17æ—¥86'25''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ18æ—¥299'41''å¾®ä¿¡

2025å¹´10æœˆ19æ—¥22'20''ç”µè¯+194'47''å¾®ä¿¡+240'03''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ20æ—¥46'26''å¾®ä¿¡+38'25''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ21æ—¥53'14''å¾®ä¿¡è§†é¢‘+24'56''å¾®ä¿¡

2025å¹´10æœˆ22æ—¥57'18''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ23æ—¥86'21''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ24æ—¥164'08''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ25æ—¥2'46''ç”µè¯ï¼Œæ¥æ‰¾å®å®å•¦ï¼

2025å¹´10æœˆ27æ—¥64'09''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ28æ—¥116'10''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ29æ—¥134'è…¾è®¯ä¼šè®®

2025å¹´10æœˆ30æ—¥14'51''å¾®ä¿¡+88'00''å¾®ä¿¡è§†é¢‘

2025å¹´10æœˆ31æ—¥210'06''å¾®ä¿¡è§†é¢‘

2025å¹´11æœˆ1æ—¥137'è…¾è®¯ä¼šè®®ï¼Œä¸€èµ·åœ¨å·¥ä½çœ‹ã€Šå—äº¬ç…§ç›¸é¦†ã€‹+71'16''å¾®ä¿¡è§†é¢‘+92'55''å¾®ä¿¡

2025å¹´11æœˆ2æ—¥324'10''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ3æ—¥59'26''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ4æ—¥33'24''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ5æ—¥56'00''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ6æ—¥69'05''å¾®ä¿¡ç”µè¯

2026å¹´11æœˆ7æ—¥87'00''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ8æ—¥271'50''å¾®ä¿¡ç”µè¯+1'37''ç”µè¯

2025å¹´11æœˆ10æ—¥70'40''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ11æ—¥70'48''è…¾è®¯ä¼šè®®

2025å¹´11æœˆ12æ—¥63'41''å¾®ä¿¡ç”µè¯


2025å¹´11æœˆ19æ—¥120'00''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ20æ—¥117'10''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ21æ—¥64'31''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ22æ—¥14'45''ç”µè¯+(206'34''è…¾è®¯ä¼šè®®çœ‹ã€Šæµªæµªå±±å°å¦–æ€ªã€‹å’ŒçŒ«çŒ«è§†é¢‘)375'31''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ23æ—¥554'07''å¾®ä¿¡ç”µè¯(åŒæ­¥åœ¨è…¾è®¯ä¼šè®®çœ‹ã€Šæ—¶å…‰ä»£ç†äººã€‹)

2025å¹´11æœˆ24æ—¥3'14''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ25æ—¥87'52''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ26æ—¥86'23''å¾®ä¿¡è§†é¢‘

2025å¹´11æœˆ27æ—¥49'54''å¾®ä¿¡ç”µè¯

2025å¹´11æœˆ28æ—¥130'11''å¾®ä¿¡ç”µè¯


2025å¹´12æœˆ1æ—¥45'46''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ2æ—¥72'29''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ3æ—¥40'01''å¾®ä¿¡ç”µè¯+20'50''ç”µè¯

2025å¹´12æœˆ4æ—¥123'10''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ5æ—¥74'12''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ6æ—¥77'32''å¾®ä¿¡ç”µè¯+260'25''è…¾è®¯ä¼šè®®'

2025å¹´12æœˆ7æ—¥26'36''å¾®ä¿¡ç”µè¯+421'56''è…¾è®¯ä¼šè®®'

2025å¹´12æœˆ8æ—¥81'01''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ9æ—¥66'49''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ10æ—¥104'15''å¾®ä¿¡ç”µè¯

2025å¹´12æœˆ11æ—¥70'55''å¾®ä¿¡ç”µè¯
    `;

    /***********************
     * 2. è§£æåŸå§‹æ–‡æœ¬
     ***********************/
    function parseRecords(text) {
      const lines = text
        .split(/\r?\n/)
        .map(l => l.trim())
        .filter(l => l.length > 0);

      const rows = [];
      const dateReg = /(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/;

      for (const line of lines) {
        const m = line.match(dateReg);
        if (!m) continue;

        let year = +m[1];
        const month = +m[2];
        const day = +m[3];

        // ä¿®æ­£æ˜æ˜¾çš„å¹´ä»½ç¬”è¯¯ï¼š2026-11-07 -> 2025-11-07
        if (year === 2026 && month === 11 && day === 7) {
          year = 2025;
        }

        const dateStr =
          year +
          "-" +
          String(month).padStart(2, "0") +
          "-" +
          String(day).padStart(2, "0");

        let rest = line.slice(line.indexOf(m[0]) + m[0].length);

        // ç¬¬ä¸€æ­¥ï¼šæŠŠ â€œåˆ†é’Ÿ+ç§’â€ ç»Ÿä¸€æˆ â€œåˆ†é’Ÿmâ€ï¼Œåªä¿ç•™åˆ†é’Ÿ
        // ä¾‹å¦‚ï¼š132'06'' -> 132m, 87'40' -> 87m
        rest = rest.replace(/(\d+)'(\d{1,2})'{1,2}/g, (match, m1, s1) => {
          return m1 + "m";
        });
        // ç¬¬äºŒæ­¥ï¼šå‰©ä¸‹çš„çº¯åˆ†é’Ÿï¼ˆå¦‚ 134'è…¾è®¯ä¼šè®®ï¼‰ä¹Ÿå˜æˆ â€œåˆ†é’Ÿmâ€
        rest = rest.replace(/(\d+)'/g, (match, m1) => {
          return m1 + "m";
        });

        // æå–æ‰€æœ‰ â€œxxmâ€
        const tokenReg = /(\d+)m/g;
        const tokens = [];
        let tm;
        while ((tm = tokenReg.exec(rest)) !== null) {
          tokens.push({
            minutes: +tm[1],
            index: tm.index,
            end: tokenReg.lastIndex
          });
        }
        if (!tokens.length) continue;

        for (let i = 0; i < tokens.length; i++) {
          const minutes = tokens[i].minutes;
          const segStart = tokens[i].end;
          const segEnd = i + 1 < tokens.length ? tokens[i + 1].index : rest.length;
          const seg = rest.slice(segStart, segEnd);

          let type;
          if (seg.includes("è…¾è®¯ä¼šè®®")) {
            type = "tencent_meeting";
          } else if (seg.includes("å¾®ä¿¡è§†é¢‘")) {
            type = "wechat_video";
          } else if (seg.includes("è§†é¢‘")) {
            // æœªæ˜¾å¼å†™â€œå¾®ä¿¡è§†é¢‘â€çš„è§†é¢‘ï¼Œé»˜è®¤ä¹ŸæŒ‰å¾®ä¿¡è§†é¢‘ç®—
            type = "wechat_video";
          } else if (seg.includes("å¾®ä¿¡ç”µè¯")) {
            type = "wechat_call";
          } else if (seg.includes("å¾®ä¿¡")) {
            type = "wechat_call";
          } else if (seg.includes("ç”µè¯")) {
            type = "phone";
          } else {
            // åƒ â€œ(æ··åˆ)â€ è¿™ç§æ²¡å†™æ˜é€šé“çš„ï¼Œé»˜è®¤ç®—å¾®ä¿¡ç”µè¯
            type = "wechat_call";
          }

          rows.push({ date: dateStr, minutes, type });
        }
      }

      return rows;
    }

    const rows = parseRecords(rawText);

    /***********************
     * 3. èšåˆæ•°æ®
     ***********************/
    const typeNameMap = {
      wechat_call: "å¾®ä¿¡ç”µè¯",
      wechat_video: "å¾®ä¿¡è§†é¢‘",
      tencent_meeting: "è…¾è®¯ä¼šè®®",
      phone: "ç”µè¯"
    };
    const typeOrder = ["wechat_call", "wechat_video", "tencent_meeting", "phone"];

    // 1ï¼‰æŒ‰ç±»å‹æ±‡æ€»æ€»æ—¶é•¿
    const totalByType = {
      wechat_call: 0,
      wechat_video: 0,
      tencent_meeting: 0,
      phone: 0
    };

    // 2ï¼‰æŒ‰æ—¥æœŸæ±‡æ€»æ€»æ—¶é•¿
    const totalByDate = {};

    for (const r of rows) {
      totalByType[r.type] += r.minutes;
      totalByDate[r.date] = (totalByDate[r.date] || 0) + r.minutes;
    }

    // æ‰€æœ‰æ—¥æœŸï¼ˆæœ‰é€šè¯çš„ï¼‰ï¼Œå‡åº
    const dates = Array.from(new Set(rows.map(r => r.date))).sort();

    // æ¯æ—¥æ€»æ—¶é•¿æ•°ç»„ï¼ˆåˆ†é’Ÿï¼‰
    const totalMinutesPerDay = dates.map(d => totalByDate[d] || 0);

    // æ¯æ—¥ + æ¯ç±»å‹çš„æ˜ç»†ï¼Œç”¨äºå †å æŸ±çŠ¶å›¾
    const perTypeSeries = {};
    for (const t of typeOrder) {
      perTypeSeries[t] = dates.map(d => 0);
    }
    for (const r of rows) {
      const idx = dates.indexOf(r.date);
      if (idx >= 0) {
        perTypeSeries[r.type][idx] += r.minutes;
      }
    }

    // ç´¯ç§¯é€šè¯æ—¶é•¿ï¼ˆåˆ†é’Ÿ & å°æ—¶ï¼‰
    const cumulativeMinutes = [];
    let running = 0;
    for (const d of dates) {
      running += totalByDate[d] || 0;
      cumulativeMinutes.push(running);
    }
    const cumulativeHours = cumulativeMinutes.map(v => v / 60);

    // é¥¼å›¾æ•°æ®
    const totalAll =
      totalByType.wechat_call +
      totalByType.wechat_video +
      totalByType.tencent_meeting +
      totalByType.phone;

    const pieData = typeOrder.map(t => ({
      name: typeNameMap[t],
      value: totalByType[t]
    }));

    // 3.1 æŒ‰æœˆä»½æ±‡æ€»ï¼ˆç”¨äºå­é¥¼å›¾ï¼‰
    const months = Array.from(new Set(dates.map(d => d.slice(0, 7)))).sort(); // "2025-07"
    const monthlyTypeTotals = {};
    months.forEach(m => {
      monthlyTypeTotals[m] = {
        wechat_call: 0,
        wechat_video: 0,
        tencent_meeting: 0,
        phone: 0
      };
    });
    for (const r of rows) {
      const monthKey = r.date.slice(0, 7);
      if (!monthlyTypeTotals[monthKey]) {
        monthlyTypeTotals[monthKey] = {
          wechat_call: 0,
          wechat_video: 0,
          tencent_meeting: 0,
          phone: 0
        };
      }
      monthlyTypeTotals[monthKey][r.type] += r.minutes;
    }

    /***********************
     * 4. ECharts å›¾è¡¨é…ç½®
     ***********************/
    // åˆå§‹åŒ–å®ä¾‹
    const pieChart = echarts.init(document.getElementById("pieChart"));
    const barLineChart = echarts.init(document.getElementById("barLineChart"));
    const stackedChart = echarts.init(document.getElementById("stackedChart"));
    const cumulativeChart = echarts.init(document.getElementById("cumulativeChart"));
    const monthlyCharts = [];

    // 4.1 é€šä¿¡æ–¹å¼æ€»å æ¯”é¥¼å›¾
    pieChart.setOption({
      title: {
        text: "é€šä¿¡å æ¯”",
        subtext:
          "æ€»æ—¶é•¿çº¦ " + (totalAll / 60).toFixed(1) + " å°æ—¶",
        left: "center"
      },
      tooltip: {
        trigger: "item",
        formatter: "{b}<br/>æ€»æ—¶é•¿ï¼š{c} åˆ†é’Ÿ ({d}%)"
      },
      legend: {
        orient: "vertical",
        left: "left",
        data: pieData.map(d => d.name)
      },
      series: [
        {
          name: "é€šè¯æ–¹å¼",
          type: "pie",
          radius: "60%",
          center: ["55%", "60%"],
          data: pieData,
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: "rgba(0, 0, 0, 0.3)"
            }
          }
        }
      ]
    });

    // 4.1.1 æ¯æœˆå­é¥¼å›¾ï¼ˆ7/8/9 ä¸€æ’ï¼Œ10/11/12 ä¸€æ’ï¼‰
    const monthlyRow1 = document.getElementById("monthlyRow1");
    const monthlyRow2 = document.getElementById("monthlyRow2");

    const row1Months = ["2025-07", "2025-08", "2025-09"].filter(m => months.includes(m));
    const row2Months = ["2025-10", "2025-11", "2025-12"].filter(m => months.includes(m));

    function createMonthlyPie(monthKey, container) {
      const div = document.createElement("div");
      div.className = "small-chart";
      const id = "pie_" + monthKey.replace("-", "_");
      div.id = id;
      container.appendChild(div);

      const chart = echarts.init(div);
      const data = typeOrder
        .map(t => ({
          name: typeNameMap[t],
          value: monthlyTypeTotals[monthKey][t]
        }))
        .filter(item => item.value > 0); // å½“æœˆä¸º 0 çš„ç±»å‹ä¸æ˜¾ç¤º

      const [year, month] = monthKey.split("-");
      const titleText = year + "å¹´" + month + "æœˆ";
      const totalMonthMinutes = Object.values(monthlyTypeTotals[monthKey]).reduce(
        (s, v) => s + v,
        0
      );
      const totalMonthHours = (totalMonthMinutes / 60).toFixed(1);

      chart.setOption({
        title: {
          text: titleText,
          subtext: "æœ¬æœˆçº¦ " + totalMonthHours + " å°æ—¶",
          left: "center",
          top: 4,
          textStyle: {
            fontSize: 12
          },
          subtextStyle: {
            fontSize: 11
          }
        },
        tooltip: {
          trigger: "item",
          formatter: "{b}<br/>æ—¶é•¿ï¼š{c} åˆ†é’Ÿ ({d}%)"
        },
        legend: {
          type: "scroll",
          bottom: 4,
          data: typeOrder.map(t => typeNameMap[t]),
          icon: "circle",
          itemWidth: 8,
          itemHeight: 8,
          textStyle: {
            fontSize: 10
          }
        },
        series: [
          {
            type: "pie",
            radius: "55%",
            center: ["50%", "60%"],
            data: data,
            label: {
              show: false
            }
          }
        ]
      });

      monthlyCharts.push(chart);
    }

    row1Months.forEach(m => createMonthlyPie(m, monthlyRow1));
    row2Months.forEach(m => createMonthlyPie(m, monthlyRow2));

    // 4.2 æ¯æ—¥æ€»æ—¶é•¿æŸ±çŠ¶ + è¶‹åŠ¿æŠ˜çº¿
    barLineChart.setOption({
      title: {
        text: "å•æ—¥æ€»æ—¶é•¿",
        left: "center"
      },
      tooltip: {
        trigger: "axis"
      },
      legend: {
        data: ["æ¯æ—¥æ€»æ—¶é•¿", "è¶‹åŠ¿"],
        top: 26
      },
      grid: {
        left: 40,
        right: 24,
        top: 70,
        bottom: 80
      },
      dataZoom: [
        {
          type: "slider",
          start: 0,
          end: 100,
          bottom: 20
        },
        {
          type: "inside"
        }
      ],
      xAxis: {
        type: "category",
        data: dates,
        axisLabel: {
          rotate: 45
        }
      },
      yAxis: {
        type: "value",
        name: "åˆ†é’Ÿ"
      },
      series: [
        {
          name: "æ¯æ—¥æ€»æ—¶é•¿",
          type: "bar",
          data: totalMinutesPerDay
        },
        {
          name: "è¶‹åŠ¿",
          type: "line",
          data: totalMinutesPerDay,
          smooth: true
        }
      ]
    });

    // 4.3 æŒ‰é€šè¯ç±»å‹çš„å †å æŸ±çŠ¶å›¾
    stackedChart.setOption({
      title: {
        text: "å•æ—¥æ—¶é•¿åˆ†æ‹†",
        left: "center"
      },
      tooltip: {
        trigger: "axis",
        axisPointer: {
          type: "shadow"
        }
      },
      legend: {
        top: 26,
        data: typeOrder.map(t => typeNameMap[t])
      },
      grid: {
        left: 40,
        right: 24,
        top: 70,
        bottom: 80
      },
      dataZoom: [
        {
          type: "slider",
          start: 0,
          end: 100,
          bottom: 20
        },
        {
          type: "inside"
        }
      ],
      xAxis: {
        type: "category",
        data: dates,
        axisLabel: {
          rotate: 45
        }
      },
      yAxis: {
        type: "value",
        name: "åˆ†é’Ÿ"
      },
      series: typeOrder.map(t => ({
        name: typeNameMap[t],
        type: "bar",
        stack: "æ€»é‡",
        emphasis: { focus: "series" },
        data: perTypeSeries[t]
      }))
    });

    // 4.4 ç´¯ç§¯é€šè¯æ—¶é•¿è¶‹åŠ¿ï¼ˆä½¿ç”¨â€œå°æ—¶â€ä¸ºçºµè½´å•ä½ï¼Œé¿å…æ•°å€¼è¿‡å¤§ï¼‰
    cumulativeChart.setOption({
      title: {
        text: "ç´¯ç§¯æ—¶é•¿æ¼”å˜",
        left: "center"
      },
      tooltip: {
        trigger: "axis",
        formatter: params => {
          const p = params[0];
          const hours = p.value;
          const minutes = (hours * 60).toFixed(0);
          return (
            p.axisValue +
            "<br/>ç´¯ç§¯çº¦ " +
            hours.toFixed(1) +
            " å°æ—¶ï¼ˆâ‰ˆ " +
            minutes +
            " åˆ†é’Ÿï¼‰"
          );
        }
      },
      grid: {
        left: 40,
        right: 24,
        top: 60,
        bottom: 60
      },
      dataZoom: [
        {
          type: "slider",
          start: 0,
          end: 100,
          bottom: 16
        },
        {
          type: "inside"
        }
      ],
      xAxis: {
        type: "category",
        data: dates,
        axisLabel: {
          rotate: 45
        }
      },
      yAxis: {
        type: "value",
        name: "ç´¯ç§¯å°æ—¶"
      },
      series: [
        {
          name: "ç´¯ç§¯æ—¶é•¿",
          type: "line",
          smooth: true,
          areaStyle: {},
          data: cumulativeHours
        }
      ]
    });

    // è‡ªé€‚åº”çª—å£å¤§å°
    window.addEventListener("resize", () => {
      pieChart.resize();
      barLineChart.resize();
      stackedChart.resize();
      cumulativeChart.resize();
      monthlyCharts.forEach(c => c.resize());
    });

  function tcResizeAll() {
    if (typeof pieChart !== 'undefined') pieChart.resize();
    if (typeof barLineChart !== 'undefined') barLineChart.resize();
    if (typeof stackedChart !== 'undefined') stackedChart.resize();
    if (typeof cumulativeChart !== 'undefined') cumulativeChart.resize();
    if (Array.isArray(monthlyCharts)) {
      monthlyCharts.forEach(c => c.resize());
    }
  }
  window.tcResizeAll = tcResizeAll;

  window.addEventListener("resize", () => {
    tcResizeAll();
  });
})();
</script>

</body>

</html>